steps:
    # Step to build the Docker image
    - name: 'gcr.io/cloud-builders/docker'
      args:
          - 'build'
          - '-t'
          - 'gcr.io/$PROJECT_ID/my-app'
          - '.'

    # Push the Docker image to Google Container Registry
    - name: 'gcr.io/cloud-builders/docker'
      args:
          - 'push'
          - 'gcr.io/$PROJECT_ID/my-app'

    # Deploy to Cloud Run
    - name: 'gcr.io/cloud-builders/gcloud'
      args:
          [
              'run',
              'deploy',
              'my-app',
              '--image',
              'gcr.io/$PROJECT_ID/my-app',
              '--region',
              'us-central1',
              '--platform',
              'managed',
              '--quiet',
              '--allow-unauthenticated',
          ]

images:
    - 'gcr.io/$PROJECT_ID/my-app'

# Logging configuration (Use one of these)
options:
    logging: 'NONE' # Logs only in Cloud Logging
    # OR use REGIONAL_USER_OWNED_BUCKET to specify a bucket for logs
    # logging: 'REGIONAL_USER_OWNED_BUCKET'
    # logsBucket: 'gs://your-log-bucket'  # specify a log bucket here

# Optionally, specify the service account to use
serviceAccount: 'firebase-adminsdk-fbsvc@personal-2025-e1099.iam.gserviceaccount.com'
