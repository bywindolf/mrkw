"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@firecms+editor@3.0.0-beta.12_@types+react-dom@18.3.6_@types+react@18.3.20__@types+react@18.3_h55f373iir4mnjhruau3i2zoxe";
exports.ids = ["vendor-chunks/@firecms+editor@3.0.0-beta.12_@types+react-dom@18.3.6_@types+react@18.3.20__@types+react@18.3_h55f373iir4mnjhruau3i2zoxe"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@firecms+editor@3.0.0-beta.12_@types+react-dom@18.3.6_@types+react@18.3.20__@types+react@18.3_h55f373iir4mnjhruau3i2zoxe/node_modules/@firecms/editor/dist/index.es.js":
/*!***************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@firecms+editor@3.0.0-beta.12_@types+react-dom@18.3.6_@types+react@18.3.20__@types+react@18.3_h55f373iir4mnjhruau3i2zoxe/node_modules/@firecms/editor/dist/index.es.js ***!
  \***************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FireCMSEditor: () => (/* binding */ FireCMSEditor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/.pnpm/next@15.0.3_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/.pnpm/next@15.0.3_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _firecms_ui__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @firecms/ui */ \"(ssr)/./node_modules/.pnpm/@firecms+ui@3.0.0-beta.12_@types+react-dom@18.3.6_@types+react@18.3.20__@types+react@18.3.20__gv3rlt2syyojh67e34v4sc3r6u/node_modules/@firecms/ui/dist/index.es.js\");\n/* harmony import */ var _tiptap_react__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @tiptap/react */ \"(ssr)/./node_modules/.pnpm/@tiptap+react@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5_react-dom@18.3._6vl4v3glheft34vpiydgtgwukq/node_modules/@tiptap/react/dist/index.js\");\n/* harmony import */ var _tiptap_react__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @tiptap/core */ \"(ssr)/./node_modules/.pnpm/@tiptap+core@2.11.5_@tiptap+pm@2.11.5/node_modules/@tiptap/core/dist/index.js\");\n/* harmony import */ var _tiptap_extension_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tiptap/extension-document */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-document@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-document/dist/index.js\");\n/* harmony import */ var tiptap_markdown__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! tiptap-markdown */ \"(ssr)/./node_modules/.pnpm/tiptap-markdown@0.8.10_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/tiptap-markdown/dist/tiptap-markdown.es.js\");\n/* harmony import */ var _tiptap_extension_underline__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @tiptap/extension-underline */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-underline@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-underline/dist/index.js\");\n/* harmony import */ var _tiptap_extension_heading__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @tiptap/extension-heading */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-heading@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-heading/dist/index.js\");\n/* harmony import */ var _tiptap_extension_text_style__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @tiptap/extension-text-style */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-text-style@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-text-style/dist/index.js\");\n/* harmony import */ var _tiptap_extension_color__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @tiptap/extension-color */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-color@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+extension-text-_j4nu2hynpisyyisqfyfhzpuhpe/node_modules/@tiptap/extension-color/dist/index.js\");\n/* harmony import */ var _tiptap_extension_highlight__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @tiptap/extension-highlight */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-highlight@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-highlight/dist/index.js\");\n/* harmony import */ var _tiptap_extension_bold__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @tiptap/extension-bold */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-bold@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-bold/dist/index.js\");\n/* harmony import */ var _tiptap_extension_italic__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @tiptap/extension-italic */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-italic@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-italic/dist/index.js\");\n/* harmony import */ var _tiptap_extension_strike__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @tiptap/extension-strike */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-strike@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-strike/dist/index.js\");\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-compiler-runtime */ \"(ssr)/./node_modules/.pnpm/react-compiler-runtime@19.0.0-beta-e993439-20250328_react@18.3.1/node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @radix-ui/react-slot */ \"(ssr)/./node_modules/.pnpm/@radix-ui+react-slot@1.1.2_@types+react@18.3.20_react@18.3.1/node_modules/@radix-ui/react-slot/dist/index.mjs\");\n/* harmony import */ var _tiptap_starter_kit__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @tiptap/starter-kit */ \"(ssr)/./node_modules/.pnpm/@tiptap+starter-kit@2.11.5/node_modules/@tiptap/starter-kit/dist/index.js\");\n/* harmony import */ var _tiptap_extension_horizontal_rule__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @tiptap/extension-horizontal-rule */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-horizontal-rule@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5/node_modules/@tiptap/extension-horizontal-rule/dist/index.js\");\n/* harmony import */ var _tiptap_extension_link__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @tiptap/extension-link */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-link@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5/node_modules/@tiptap/extension-link/dist/index.js\");\n/* harmony import */ var _tiptap_extension_image__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @tiptap/extension-image */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-image@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-image/dist/index.js\");\n/* harmony import */ var _tiptap_extension_placeholder__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @tiptap/extension-placeholder */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-placeholder@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5/node_modules/@tiptap/extension-placeholder/dist/index.js\");\n/* harmony import */ var _tiptap_extension_task_item__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @tiptap/extension-task-item */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-task-item@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5/node_modules/@tiptap/extension-task-item/dist/index.js\");\n/* harmony import */ var _tiptap_extension_task_list__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @tiptap/extension-task-list */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-task-list@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-task-list/dist/index.js\");\n/* harmony import */ var prosemirror_state__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! prosemirror-state */ \"(ssr)/./node_modules/.pnpm/prosemirror-state@1.4.3/node_modules/prosemirror-state/dist/index.js\");\n/* harmony import */ var prosemirror_view__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! prosemirror-view */ \"(ssr)/./node_modules/.pnpm/prosemirror-view@1.37.2/node_modules/prosemirror-view/dist/index.js\");\n/* harmony import */ var _tiptap_extension_ordered_list__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @tiptap/extension-ordered-list */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-ordered-list@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-ordered-list/dist/index.js\");\n/* harmony import */ var _tiptap_extension_bullet_list__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @tiptap/extension-bullet-list */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-bullet-list@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-bullet-list/dist/index.js\");\n/* harmony import */ var _tiptap_extension_list_item__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @tiptap/extension-list-item */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-list-item@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-list-item/dist/index.js\");\n/* harmony import */ var _tiptap_extension_code_block__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @tiptap/extension-code-block */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-code-block@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5/node_modules/@tiptap/extension-code-block/dist/index.js\");\n/* harmony import */ var _tiptap_extension_blockquote__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @tiptap/extension-blockquote */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-blockquote@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-blockquote/dist/index.js\");\n/* harmony import */ var _tiptap_extension_code__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @tiptap/extension-code */ \"(ssr)/./node_modules/.pnpm/@tiptap+extension-code@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5_/node_modules/@tiptap/extension-code/dist/index.js\");\n/* harmony import */ var _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @tiptap/pm/view */ \"(ssr)/./node_modules/.pnpm/@tiptap+pm@2.11.5/node_modules/@tiptap/pm/view/dist/index.js\");\n/* harmony import */ var _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @tiptap/pm/state */ \"(ssr)/./node_modules/.pnpm/@tiptap+pm@2.11.5/node_modules/@tiptap/pm/state/dist/index.js\");\n/* harmony import */ var _tiptap_suggestion__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @tiptap/suggestion */ \"(ssr)/./node_modules/.pnpm/@tiptap+suggestion@2.11.5_@tiptap+core@2.11.5_@tiptap+pm@2.11.5__@tiptap+pm@2.11.5/node_modules/@tiptap/suggestion/dist/index.js\");\n/* harmony import */ var tippy_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! tippy.js */ \"(ssr)/./node_modules/.pnpm/tippy.js@6.3.7/node_modules/tippy.js/dist/tippy.esm.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EditorBubble = (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((t0, ref) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__.c)(21);\n  let children;\n  let rest;\n  let tippyOptions;\n  if ($[0] !== t0) {\n    ({\n      children,\n      tippyOptions,\n      ...rest\n    } = t0);\n    $[0] = t0;\n    $[1] = children;\n    $[2] = rest;\n    $[3] = tippyOptions;\n  } else {\n    children = $[1];\n    rest = $[2];\n    tippyOptions = $[3];\n  }\n  const {\n    editor\n  } = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.useCurrentEditor)();\n  const instanceRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  let t1;\n  if ($[4] !== tippyOptions) {\n    t1 = () => {\n      if (!instanceRef.current || !tippyOptions?.placement) {\n        return;\n      }\n      instanceRef.current.setProps({\n        placement: tippyOptions.placement\n      });\n      instanceRef.current.popperInstance?.update();\n    };\n    $[4] = tippyOptions;\n    $[5] = t1;\n  } else {\n    t1 = $[5];\n  }\n  const t2 = tippyOptions?.placement;\n  let t3;\n  if ($[6] !== t2) {\n    t3 = [t2];\n    $[6] = t2;\n    $[7] = t3;\n  } else {\n    t3 = $[7];\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(t1, t3);\n  let t4;\n  const shouldShow = _temp$1;\n  let t5;\n  if ($[8] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t5 = (val) => {\n      instanceRef.current = val;\n    };\n    $[8] = t5;\n  } else {\n    t5 = $[8];\n  }\n  let t6;\n  if ($[9] !== tippyOptions) {\n    t6 = {\n      onCreate: t5,\n      moveTransition: \"transform 0.15s ease-out\",\n      ...tippyOptions\n    };\n    $[9] = tippyOptions;\n    $[10] = t6;\n  } else {\n    t6 = $[10];\n  }\n  let t7;\n  if ($[11] !== rest || $[12] !== t6) {\n    t7 = {\n      shouldShow,\n      tippyOptions: t6,\n      ...rest\n    };\n    $[11] = rest;\n    $[12] = t6;\n    $[13] = t7;\n  } else {\n    t7 = $[13];\n  }\n  t4 = t7;\n  const bubbleMenuProps = t4;\n  if (!editor) {\n    return null;\n  }\n  let t8;\n  if ($[14] !== bubbleMenuProps || $[15] !== children || $[16] !== editor) {\n    t8 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.BubbleMenu, { editor, ...bubbleMenuProps, children });\n    $[14] = bubbleMenuProps;\n    $[15] = children;\n    $[16] = editor;\n    $[17] = t8;\n  } else {\n    t8 = $[17];\n  }\n  let t9;\n  if ($[18] !== ref || $[19] !== t8) {\n    t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ref, children: t8 });\n    $[18] = ref;\n    $[19] = t8;\n    $[20] = t9;\n  } else {\n    t9 = $[20];\n  }\n  return t9;\n});\nfunction _temp$1(t0) {\n  const {\n    editor: editor_0,\n    state\n  } = t0;\n  const {\n    selection\n  } = state;\n  const {\n    empty\n  } = selection;\n  if (editor_0.isActive(\"image\") || empty || (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_30__.isNodeSelection)(selection)) {\n    return false;\n  }\n  return true;\n}\nconst EditorBubbleItem = (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((t0, ref) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__.c)(14);\n  let asChild;\n  let children;\n  let onSelect;\n  let rest;\n  if ($[0] !== t0) {\n    ({\n      children,\n      asChild,\n      onSelect,\n      ...rest\n    } = t0);\n    $[0] = t0;\n    $[1] = asChild;\n    $[2] = children;\n    $[3] = onSelect;\n    $[4] = rest;\n  } else {\n    asChild = $[1];\n    children = $[2];\n    onSelect = $[3];\n    rest = $[4];\n  }\n  const {\n    editor\n  } = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.useCurrentEditor)();\n  const Comp = asChild ? _radix_ui_react_slot__WEBPACK_IMPORTED_MODULE_31__.Slot : \"div\";\n  if (!editor) {\n    return null;\n  }\n  let t1;\n  if ($[5] !== editor || $[6] !== onSelect) {\n    t1 = () => onSelect?.(editor);\n    $[5] = editor;\n    $[6] = onSelect;\n    $[7] = t1;\n  } else {\n    t1 = $[7];\n  }\n  let t2;\n  if ($[8] !== Comp || $[9] !== children || $[10] !== ref || $[11] !== rest || $[12] !== t1) {\n    t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Comp, { ref, ...rest, onClick: t1, children });\n    $[8] = Comp;\n    $[9] = children;\n    $[10] = ref;\n    $[11] = rest;\n    $[12] = t1;\n    $[13] = t2;\n  } else {\n    t2 = $[13];\n  }\n  return t2;\n});\nEditorBubbleItem.displayName = \"EditorBubbleItem\";\nconst items = [{\n  name: \"Text\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.TextFieldsIcon,\n  command: (editor) => editor?.chain().focus().toggleNode(\"paragraph\", \"paragraph\").run(),\n  // I feel like there has to be a more efficient way to do this – feel free to PR if you know how!\n  isActive: (editor) => (editor?.isActive(\"paragraph\") && !editor?.isActive(\"bulletList\") && !editor?.isActive(\"orderedList\")) ?? false\n}, {\n  name: \"Heading 1\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.LooksOneIcon,\n  command: (editor) => editor?.chain().focus().toggleHeading({\n    level: 1\n  }).run(),\n  isActive: (editor) => editor?.isActive(\"heading\", {\n    level: 1\n  }) ?? false\n}, {\n  name: \"Heading 2\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.LooksTwoIcon,\n  command: (editor) => editor?.chain().focus().toggleHeading({\n    level: 2\n  }).run(),\n  isActive: (editor) => editor?.isActive(\"heading\", {\n    level: 2\n  }) ?? false\n}, {\n  name: \"Heading 3\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Looks3Icon,\n  command: (editor) => editor?.chain().focus().toggleHeading({\n    level: 3\n  }).run(),\n  isActive: (editor) => editor?.isActive(\"heading\", {\n    level: 3\n  }) ?? false\n}, {\n  name: \"To-do List\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CheckBoxIcon,\n  command: (editor) => editor?.chain().focus().toggleTaskList().run(),\n  isActive: (editor) => editor?.isActive(\"taskItem\") ?? false\n}, {\n  name: \"Bullet List\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatListBulletedIcon,\n  command: (editor) => editor?.chain().focus().toggleBulletList().run(),\n  isActive: (editor) => editor?.isActive(\"bulletList\") ?? false\n}, {\n  name: \"Numbered List\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatListNumberedIcon,\n  command: (editor) => editor?.chain().focus().toggleOrderedList().run(),\n  isActive: (editor) => editor?.isActive(\"orderedList\") ?? false\n}, {\n  name: \"Quote\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatQuoteIcon,\n  command: (editor) => editor?.chain().focus().toggleNode(\"paragraph\", \"paragraph\").toggleBlockquote().run(),\n  isActive: (editor) => editor?.isActive(\"blockquote\") ?? false\n}, {\n  name: \"Code\",\n  icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CodeIcon,\n  command: (editor) => editor?.chain().focus().toggleCodeBlock().run(),\n  isActive: (editor) => editor?.isActive(\"codeBlock\") ?? false\n}];\nconst NodeSelector = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__.c)(16);\n  const {\n    open,\n    onOpenChange,\n    portalContainer\n  } = t0;\n  const {\n    editor\n  } = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.useCurrentEditor)();\n  if (!editor) {\n    return null;\n  }\n  let t1;\n  if ($[0] !== editor) {\n    t1 = items.filter((item) => item.isActive(editor)).pop() ?? {\n      name: \"Multiple\"\n    };\n    $[0] = editor;\n    $[1] = t1;\n  } else {\n    t1 = $[1];\n  }\n  const activeItem = t1;\n  let t2;\n  if ($[2] !== activeItem.name) {\n    t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { className: \"whitespace-nowrap text-sm\", children: activeItem.name });\n    $[2] = activeItem.name;\n    $[3] = t2;\n  } else {\n    t2 = $[3];\n  }\n  let t3;\n  if ($[4] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.KeyboardArrowDownIcon, { size: \"small\" });\n    $[4] = t3;\n  } else {\n    t3 = $[4];\n  }\n  let t4;\n  if ($[5] !== t2) {\n    t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { variant: \"text\", className: \"gap-2 rounded-none\", color: \"text\", children: [\n      t2,\n      t3\n    ] });\n    $[5] = t2;\n    $[6] = t4;\n  } else {\n    t4 = $[6];\n  }\n  let t5;\n  if ($[7] !== activeItem.name || $[8] !== onOpenChange) {\n    t5 = items.map((item_0, index) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(EditorBubbleItem, { onSelect: (editor_0) => {\n      item_0.command(editor_0);\n      onOpenChange(false);\n    }, className: \"flex cursor-pointer items-center justify-between rounded px-2 py-1 text-sm hover:bg-blue-50 hover:dark:bg-surface-700 text-surface-900 dark:text-white\", children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { className: \"flex items-center space-x-2\", children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(item_0.icon, { size: \"smallest\" }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"span\", { children: item_0.name })\n      ] }),\n      activeItem.name === item_0.name && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CheckIcon, { size: \"smallest\" })\n    ] }, index));\n    $[7] = activeItem.name;\n    $[8] = onOpenChange;\n    $[9] = t5;\n  } else {\n    t5 = $[9];\n  }\n  let t6;\n  if ($[10] !== onOpenChange || $[11] !== open || $[12] !== portalContainer || $[13] !== t4 || $[14] !== t5) {\n    t6 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Popover, { sideOffset: 5, align: \"start\", portalContainer, className: \"w-48 p-1\", trigger: t4, modal: true, open, onOpenChange, children: t5 });\n    $[10] = onOpenChange;\n    $[11] = open;\n    $[12] = portalContainer;\n    $[13] = t4;\n    $[14] = t5;\n    $[15] = t6;\n  } else {\n    t6 = $[15];\n  }\n  return t6;\n};\nfunction isValidUrl(url) {\n  try {\n    new URL(url);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction getUrlFromString(str) {\n  if (isValidUrl(str)) return str;\n  try {\n    if (str.includes(\".\") && !str.includes(\" \")) {\n      return new URL(`https://${str}`).toString();\n    }\n    return null;\n  } catch (e) {\n    return null;\n  }\n}\nconst LinkSelector = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__.c)(24);\n  const {\n    open,\n    onOpenChange\n  } = t0;\n  const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  const {\n    editor\n  } = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.useCurrentEditor)();\n  let t1;\n  if ($[0] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t1 = () => {\n      inputRef.current && inputRef.current?.focus();\n    };\n    $[0] = t1;\n  } else {\n    t1 = $[0];\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(t1);\n  if (!editor) {\n    return null;\n  }\n  let t2;\n  if ($[1] !== editor) {\n    t2 = (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"underline decoration-stone-400 underline-offset-4\", {\n      \"text-blue-500\": editor.isActive(\"link\")\n    });\n    $[1] = editor;\n    $[2] = t2;\n  } else {\n    t2 = $[2];\n  }\n  let t3;\n  if ($[3] !== t2) {\n    t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { variant: \"text\", className: \"gap-2 rounded-none\", color: \"text\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: t2, children: \"Link\" }) });\n    $[3] = t2;\n    $[4] = t3;\n  } else {\n    t3 = $[4];\n  }\n  let t4;\n  if ($[5] !== editor) {\n    t4 = (e) => {\n      const target = e.currentTarget;\n      e.preventDefault();\n      const input = target[0];\n      const url = getUrlFromString(input.value);\n      url && editor.chain().focus().setLink({\n        href: url\n      }).run();\n    };\n    $[5] = editor;\n    $[6] = t4;\n  } else {\n    t4 = $[6];\n  }\n  let t5;\n  if ($[7] !== editor) {\n    t5 = editor.getAttributes(\"link\").href || \"\";\n    $[7] = editor;\n    $[8] = t5;\n  } else {\n    t5 = $[8];\n  }\n  let t6;\n  if ($[9] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t6 = (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"text-surface-900 dark:text-white flex-grow bg-transparent p-1 text-sm outline-none\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.focusedDisabled);\n    $[9] = t6;\n  } else {\n    t6 = $[9];\n  }\n  let t7;\n  if ($[10] !== open || $[11] !== t5) {\n    t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"input\", { ref: inputRef, autoFocus: open, placeholder: \"Paste a link\", defaultValue: t5, className: t6 });\n    $[10] = open;\n    $[11] = t5;\n    $[12] = t7;\n  } else {\n    t7 = $[12];\n  }\n  let t8;\n  if ($[13] !== editor) {\n    t8 = editor.getAttributes(\"link\").href ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: \"small\", variant: \"text\", type: \"button\", color: \"text\", className: \"flex items-center\", onClick: () => {\n      editor.chain().focus().unsetLink().run();\n    }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.DeleteIcon, { size: \"small\" }) }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: \"small\", variant: \"text\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CheckIcon, { size: \"small\" }) });\n    $[13] = editor;\n    $[14] = t8;\n  } else {\n    t8 = $[14];\n  }\n  let t9;\n  if ($[15] !== t4 || $[16] !== t7 || $[17] !== t8) {\n    t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"form\", { onSubmit: t4, className: \"flex p-1\", children: [\n      t7,\n      t8\n    ] });\n    $[15] = t4;\n    $[16] = t7;\n    $[17] = t8;\n    $[18] = t9;\n  } else {\n    t9 = $[18];\n  }\n  let t10;\n  if ($[19] !== onOpenChange || $[20] !== open || $[21] !== t3 || $[22] !== t9) {\n    t10 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Popover, { modal: true, open, onOpenChange, trigger: t3, children: t9 });\n    $[19] = onOpenChange;\n    $[20] = open;\n    $[21] = t3;\n    $[22] = t9;\n    $[23] = t10;\n  } else {\n    t10 = $[23];\n  }\n  return t10;\n};\nconst TextButtons = () => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__.c)(2);\n  const {\n    editor\n  } = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.useCurrentEditor)();\n  if (!editor) {\n    return null;\n  }\n  let t0;\n  if ($[0] !== editor) {\n    const items2 = [{\n      name: \"bold\",\n      isActive: _temp,\n      command: _temp2,\n      icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatBoldIcon\n    }, {\n      name: \"italic\",\n      isActive: _temp3,\n      command: _temp4,\n      icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatItalicIcon\n    }, {\n      name: \"underline\",\n      isActive: _temp5,\n      command: _temp6,\n      icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatUnderlinedIcon\n    }, {\n      name: \"strike\",\n      isActive: _temp7,\n      command: _temp8,\n      icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatStrikethroughIcon\n    }, {\n      name: \"code\",\n      isActive: _temp9,\n      command: _temp10,\n      icon: _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CodeIcon\n    }];\n    t0 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"flex\", children: items2.map((item, index) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(EditorBubbleItem, { onSelect: (editor_10) => {\n      item.command(editor_10);\n    }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Button, { size: \"small\", color: \"text\", className: \"gap-2 rounded-none h-full\", variant: \"text\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(item.icon, { className: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)({\n      \"text-inherit\": !item.isActive(editor),\n      \"text-blue-500\": item.isActive(editor)\n    }) }) }) }, index)) });\n    $[0] = editor;\n    $[1] = t0;\n  } else {\n    t0 = $[1];\n  }\n  return t0;\n};\nfunction _temp(editor_0) {\n  return editor_0?.isActive(\"bold\") ?? false;\n}\nfunction _temp2(editor_1) {\n  return editor_1?.chain().focus().toggleBold().run();\n}\nfunction _temp3(editor_2) {\n  return editor_2?.isActive(\"italic\") ?? false;\n}\nfunction _temp4(editor_3) {\n  return editor_3?.chain().focus().toggleItalic().run();\n}\nfunction _temp5(editor_4) {\n  return editor_4?.isActive(\"underline\") ?? false;\n}\nfunction _temp6(editor_5) {\n  return editor_5?.chain().focus().toggleUnderline().run();\n}\nfunction _temp7(editor_6) {\n  return editor_6?.isActive(\"strike\") ?? false;\n}\nfunction _temp8(editor_7) {\n  return editor_7?.chain().focus().toggleStrike().run();\n}\nfunction _temp9(editor_8) {\n  return editor_8?.isActive(\"code\") ?? false;\n}\nfunction _temp10(editor_9) {\n  return editor_9?.chain().focus().toggleCode().run();\n}\nfunction removeClassesFromJson(jsonObj) {\n  if (Array.isArray(jsonObj)) {\n    return jsonObj.map((item) => removeClassesFromJson(item));\n  } else if (typeof jsonObj === \"object\" && jsonObj !== null) {\n    if (jsonObj.attrs && typeof jsonObj.attrs === \"object\" && \"class\" in jsonObj.attrs) {\n      delete jsonObj.attrs.class;\n    }\n    Object.keys(jsonObj).forEach((key) => {\n      jsonObj[key] = removeClassesFromJson(jsonObj[key]);\n    });\n  }\n  return jsonObj;\n}\nconst loadingDecorationKey = new prosemirror_state__WEBPACK_IMPORTED_MODULE_32__.PluginKey(\"loadingDecoration\");\nconst TextLoadingDecorationExtension = _tiptap_react__WEBPACK_IMPORTED_MODULE_30__.Extension.create({\n  name: \"loadingDecoration\",\n  addOptions() {\n    return {\n      pluginKey: loadingDecorationKey\n    };\n  },\n  addProseMirrorPlugins() {\n    const pluginKey = this.options.pluginKey;\n    return [new prosemirror_state__WEBPACK_IMPORTED_MODULE_32__.Plugin({\n      key: pluginKey,\n      state: {\n        init() {\n          return {\n            decorationSet: prosemirror_view__WEBPACK_IMPORTED_MODULE_33__.DecorationSet.empty,\n            hasDecoration: false\n          };\n        },\n        apply(tr, oldState) {\n          const action = tr.getMeta(pluginKey);\n          if (action?.type === \"loadingDecoration\") {\n            const {\n              pos,\n              remove,\n              loadingHtml\n            } = action;\n            if (remove) {\n              return {\n                decorationSet: prosemirror_view__WEBPACK_IMPORTED_MODULE_33__.DecorationSet.empty,\n                hasDecoration: false\n              };\n            }\n            const decoration = prosemirror_view__WEBPACK_IMPORTED_MODULE_33__.Decoration.widget(pos, () => {\n              const container = document.createElement(\"span\");\n              container.className = \"loading-decoration\";\n              if (loadingHtml) {\n                container.innerHTML = loadingHtml;\n              } else {\n                const span = document.createElement(\"span\");\n                span.innerText = \"loading...\";\n                container.appendChild(span);\n              }\n              return container;\n            });\n            return {\n              decorationSet: prosemirror_view__WEBPACK_IMPORTED_MODULE_33__.DecorationSet.empty.add(tr.doc, [decoration]),\n              hasDecoration: true\n            };\n          }\n          return {\n            decorationSet: oldState.decorationSet.map(tr.mapping, tr.doc),\n            hasDecoration: oldState.hasDecoration\n          };\n        }\n      },\n      props: {\n        decorations(state) {\n          return this.getState(state)?.decorationSet || prosemirror_view__WEBPACK_IMPORTED_MODULE_33__.DecorationSet.empty;\n        }\n      }\n    })];\n  },\n  addCommands() {\n    return {\n      toggleLoadingDecoration: (loadingHtml) => ({\n        state,\n        dispatch\n      }) => {\n        const {\n          selection\n        } = state;\n        const pos = selection.from;\n        if (!dispatch) return false;\n        const pluginKey = this.options.pluginKey;\n        const tr = state.tr.setMeta(pluginKey, {\n          pos,\n          type: \"loadingDecoration\",\n          remove: false,\n          loadingHtml\n        });\n        dispatch(tr);\n        return true;\n      },\n      removeLoadingDecoration: () => ({\n        state,\n        dispatch\n      }) => {\n        if (!dispatch) return false;\n        const pluginKey = this.options.pluginKey;\n        const tr = state.tr.setMeta(pluginKey, {\n          pos: 0,\n          // We can pass any position as it will remove the entire decoration set\n          type: \"loadingDecoration\",\n          remove: true\n        });\n        dispatch(tr);\n        return true;\n      }\n    };\n  }\n});\nconst PlaceholderExtension = _tiptap_extension_placeholder__WEBPACK_IMPORTED_MODULE_17__[\"default\"].configure({\n  placeholder: ({\n    node,\n    editor\n  }) => {\n    editor.state.selection;\n    function hasLoadingDecoration(editor2) {\n      const pluginState = loadingDecorationKey.get(editor2.state);\n      return pluginState?.getState(editor2.state)?.hasDecoration ?? false;\n    }\n    const hasDecoration = hasLoadingDecoration(editor);\n    if (hasDecoration) {\n      return \"\";\n    }\n    if (node.type.name === \"heading\") {\n      return `Heading ${node.attrs.level}`;\n    }\n    if (node.type.name === \"paragraph\") {\n      return \"Press '/' for commands\";\n    }\n    return \"\";\n  },\n  includeChildren: true\n});\nconst Horizontal = _tiptap_extension_horizontal_rule__WEBPACK_IMPORTED_MODULE_14__[\"default\"].extend({\n  addInputRules() {\n    return [new _tiptap_react__WEBPACK_IMPORTED_MODULE_30__.InputRule({\n      find: /^(?:---|—-|___\\s|\\*\\*\\*\\s)$/,\n      handler: ({\n        state,\n        range\n      }) => {\n        const attributes = {};\n        const {\n          tr\n        } = state;\n        const start = range.from;\n        const end = range.to;\n        tr.insert(start - 1, this.type.create(attributes)).delete(tr.mapping.map(start), tr.mapping.map(end));\n      }\n    })];\n  }\n});\nconst placeholder = PlaceholderExtension;\nconst tiptapLink = _tiptap_extension_link__WEBPACK_IMPORTED_MODULE_15__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"text-surface-700 dark:text-surface-accent-200 underline underline-offset-[3px] hover:text-primary transition-colors cursor-pointer\")\n  }\n});\nconst taskList = _tiptap_extension_task_list__WEBPACK_IMPORTED_MODULE_19__.TaskList.configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"not-prose\")\n  }\n});\nconst taskItem = _tiptap_extension_task_item__WEBPACK_IMPORTED_MODULE_18__.TaskItem.configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"flex items-start my-4\")\n  },\n  nested: true\n});\nconst horizontalRule = Horizontal.configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"mt-4 mb-6 border-t\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin)\n  }\n});\nconst bulletList = _tiptap_extension_bullet_list__WEBPACK_IMPORTED_MODULE_21__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"list-disc list-outside leading-3 -mt-2\")\n  }\n});\nconst orderedList = _tiptap_extension_ordered_list__WEBPACK_IMPORTED_MODULE_20__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"list-decimal list-outside leading-3 -mt-2\")\n  }\n});\nconst listItem = _tiptap_extension_list_item__WEBPACK_IMPORTED_MODULE_22__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"leading-normal -mb-2\")\n  }\n});\nconst blockquote = _tiptap_extension_blockquote__WEBPACK_IMPORTED_MODULE_24__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"border-l-4 border-primary\")\n  }\n});\nconst codeBlock = _tiptap_extension_code_block__WEBPACK_IMPORTED_MODULE_23__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"rounded bg-blue-50 dark:bg-surface-700 border p-5 font-mono font-medium\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin)\n  }\n});\nconst code = _tiptap_extension_code__WEBPACK_IMPORTED_MODULE_25__[\"default\"].configure({\n  HTMLAttributes: {\n    class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"rounded-md bg-surface-accent-50 dark:bg-surface-700 px-1.5 py-1 font-mono font-medium\"),\n    spellcheck: \"false\"\n  }\n});\nconst starterKit = _tiptap_starter_kit__WEBPACK_IMPORTED_MODULE_13__[\"default\"].configure({\n  document: false,\n  horizontalRule: false,\n  dropcursor: {\n    color: \"#DBEAFE\",\n    width: 4\n  },\n  gapcursor: false\n});\nasync function onFileRead(view, readerEvent, pos, upload, image) {\n  const {\n    schema\n  } = view.state;\n  const plugin = view.state.plugins.find((p) => p.key === ImagePluginKey.key);\n  if (!plugin) {\n    console.error(\"Image plugin not found\");\n    return;\n  }\n  let decorationSet = plugin.getState(view.state);\n  const placeholder2 = document.createElement(\"div\");\n  const imageElement = document.createElement(\"img\");\n  imageElement.setAttribute(\"class\", \"opacity-40 rounded-lg border \" + _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin);\n  imageElement.src = readerEvent.target?.result;\n  placeholder2.appendChild(imageElement);\n  const deco = _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.Decoration.widget(pos, placeholder2);\n  decorationSet = decorationSet?.add(view.state.doc, [deco]);\n  view.dispatch(view.state.tr.setMeta(plugin, {\n    decorationSet\n  }));\n  const src = await upload(image);\n  console.debug(\"Uploaded image\", src);\n  const imageNode = schema.nodes.image.create({\n    src\n  });\n  const tr = view.state.tr.replaceWith(pos, pos, imageNode);\n  decorationSet = decorationSet?.remove([deco]);\n  tr.setMeta(plugin, {\n    decorationSet\n  });\n  view.dispatch(tr);\n}\nconst ImagePluginKey = new _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.PluginKey(\"imagePlugin\");\nconst createDropImagePlugin = (upload) => {\n  const plugin = new _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.Plugin({\n    key: ImagePluginKey,\n    state: {\n      // Initialize the plugin state with an empty DecorationSet\n      init: () => _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.DecorationSet.empty,\n      // Apply transactions to update the state\n      apply: (tr, old) => {\n        const meta = tr.getMeta(plugin);\n        if (meta && meta.decorationSet) {\n          return meta.decorationSet;\n        }\n        return old.map(tr.mapping, tr.doc);\n      }\n    },\n    props: {\n      handleDOMEvents: {\n        drop: (view, event) => {\n          if (!event.dataTransfer?.files || event.dataTransfer?.files.length === 0) {\n            return false;\n          }\n          event.preventDefault();\n          const files = Array.from(event.dataTransfer.files);\n          const images = files.filter((file) => /image/i.test(file.type));\n          if (images.length === 0) {\n            console.log(\"No images found in dropped files\");\n            return false;\n          }\n          images.forEach((image) => {\n            const position = view.posAtCoords({\n              left: event.clientX,\n              top: event.clientY\n            });\n            if (!position) return;\n            const reader = new FileReader();\n            reader.onload = async (readerEvent) => {\n              await onFileRead(view, readerEvent, position.pos, upload, image);\n            };\n            reader.readAsDataURL(image);\n          });\n          return true;\n        }\n      },\n      handlePaste(view, event, slice) {\n        const items2 = Array.from(event.clipboardData?.items || []);\n        const pos = view.state.selection.from;\n        let anyImageFound = false;\n        items2.forEach((item) => {\n          const image = item.getAsFile();\n          if (image) {\n            anyImageFound = true;\n            const reader = new FileReader();\n            reader.onload = async (readerEvent) => {\n              await onFileRead(view, readerEvent, pos, upload, image);\n            };\n            reader.readAsDataURL(image);\n          }\n        });\n        return anyImageFound;\n      },\n      decorations(state) {\n        return plugin.getState(state);\n      }\n    },\n    view(editorView) {\n      return {\n        update(view, prevState) {\n          const prevDecos = plugin.getState(prevState);\n          const newDecos = plugin.getState(view.state);\n          if (prevDecos !== newDecos) {\n            view.updateState(view.state);\n          }\n        }\n      };\n    }\n  });\n  return plugin;\n};\nconst createImageExtension = (dropImagePlugin) => {\n  return _tiptap_extension_image__WEBPACK_IMPORTED_MODULE_16__[\"default\"].extend({\n    addProseMirrorPlugins() {\n      return [dropImagePlugin];\n    }\n  }).configure({\n    allowBase64: true,\n    HTMLAttributes: {\n      class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"rounded-lg border\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin)\n    }\n  });\n};\nconst CustomKeymap = _tiptap_react__WEBPACK_IMPORTED_MODULE_30__.Extension.create({\n  name: \"CustomKeymap\",\n  addCommands() {\n    return {\n      selectTextWithinNodeBoundaries: () => ({\n        editor,\n        commands\n      }) => {\n        const {\n          state\n        } = editor;\n        const {\n          tr\n        } = state;\n        const startNodePos = tr.selection.$from.start();\n        const endNodePos = tr.selection.$to.end();\n        return commands.setTextSelection({\n          from: startNodePos,\n          to: endNodePos\n        });\n      }\n    };\n  },\n  addKeyboardShortcuts() {\n    return {\n      \"Mod-a\": ({\n        editor\n      }) => {\n        const {\n          state\n        } = editor;\n        const {\n          tr\n        } = state;\n        const startSelectionPos = tr.selection.from;\n        const endSelectionPos = tr.selection.to;\n        const startNodePos = tr.selection.$from.start();\n        const endNodePos = tr.selection.$to.end();\n        const isCurrentTextSelectionNotExtendedToNodeBoundaries = startSelectionPos > startNodePos || endSelectionPos < endNodePos;\n        if (isCurrentTextSelectionNotExtendedToNodeBoundaries) {\n          editor.chain().selectTextWithinNodeBoundaries().run();\n          return true;\n        }\n        return false;\n      }\n    };\n  }\n});\nfunction absoluteRect(element) {\n  const data = element.getBoundingClientRect();\n  let ancestor = element.parentElement;\n  while (ancestor && window.getComputedStyle(ancestor).position === \"static\") {\n    ancestor = ancestor.parentElement;\n  }\n  const ancestorRect = ancestor?.getBoundingClientRect();\n  return {\n    top: data.top - (ancestorRect?.top ?? 0),\n    left: data.left - (ancestorRect?.left ?? 0),\n    width: data.width\n  };\n}\nfunction nodeDOMAtCoords(coords) {\n  return document.elementsFromPoint(coords.x, coords.y).find((elem) => elem.parentElement?.matches?.(\".ProseMirror\") || elem.matches([\"li\", \"p:not(:first-child)\", \"pre\", \"blockquote\", \"h1, h2, h3, h4, h5, h6\"].join(\", \")));\n}\nfunction nodePosAtDOM(node, view, options) {\n  const boundingRect = node.getBoundingClientRect();\n  return view.posAtCoords({\n    left: boundingRect.left + 50 + options.dragHandleWidth,\n    top: boundingRect.top + 1\n  })?.inside;\n}\nfunction DragHandle(options) {\n  function handleDragStart(event, view) {\n    view.focus();\n    if (!event.dataTransfer) return;\n    const node = nodeDOMAtCoords({\n      x: event.clientX + 50 + options.dragHandleWidth,\n      y: event.clientY\n    });\n    if (!(node instanceof Element)) return;\n    const nodePos = nodePosAtDOM(node, view, options);\n    if (nodePos == null || nodePos < 0) return;\n    view.dispatch(view.state.tr.setSelection(_tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.NodeSelection.create(view.state.doc, nodePos)));\n    const slice = view.state.selection.content();\n    const {\n      dom,\n      text\n    } = (0,_tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.__serializeForClipboard)(view, slice);\n    event.dataTransfer.clearData();\n    event.dataTransfer.setData(\"text/html\", dom.innerHTML);\n    event.dataTransfer.setData(\"text/plain\", text);\n    event.dataTransfer.effectAllowed = \"copyMove\";\n    event.dataTransfer.setDragImage(node, 0, 0);\n    view.dragging = {\n      slice,\n      move: event.ctrlKey\n    };\n  }\n  function handleClick(event, view) {\n    view.focus();\n    view.dom.classList.remove(\"dragging\");\n    const node = nodeDOMAtCoords({\n      x: event.clientX + 50 + options.dragHandleWidth,\n      y: event.clientY\n    });\n    if (!(node instanceof Element)) return;\n    const nodePos = nodePosAtDOM(node, view, options);\n    if (!nodePos) return;\n    view.dispatch(view.state.tr.setSelection(_tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.NodeSelection.create(view.state.doc, nodePos)));\n  }\n  let dragHandleElement = null;\n  function hideDragHandle() {\n    if (dragHandleElement) {\n      dragHandleElement.classList.add(\"hide\");\n    }\n  }\n  function showDragHandle() {\n    if (dragHandleElement) {\n      dragHandleElement.classList.remove(\"hide\");\n    }\n  }\n  return new _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.Plugin({\n    view: (view) => {\n      dragHandleElement = document.createElement(\"div\");\n      dragHandleElement.draggable = true;\n      dragHandleElement.dataset.dragHandle = \"\";\n      dragHandleElement.classList.add(\"drag-handle\");\n      dragHandleElement.addEventListener(\"dragstart\", (e) => {\n        handleDragStart(e, view);\n      });\n      dragHandleElement.addEventListener(\"click\", (e) => {\n        handleClick(e, view);\n      });\n      hideDragHandle();\n      view?.dom?.parentElement?.appendChild(dragHandleElement);\n      return {\n        destroy: () => {\n        }\n      };\n    },\n    props: {\n      handleDOMEvents: {\n        mousemove: (view, event) => {\n          if (!view.editable) {\n            return;\n          }\n          const node = nodeDOMAtCoords({\n            x: event.clientX + 50 + options.dragHandleWidth,\n            y: event.clientY\n          });\n          if (!(node instanceof Element)) {\n            hideDragHandle();\n            return;\n          }\n          const compStyle = window.getComputedStyle(node);\n          const lineHeight = parseInt(compStyle.lineHeight, 10);\n          const paddingTop = parseInt(compStyle.paddingTop, 10);\n          const rect = absoluteRect(node);\n          rect.top += (lineHeight - 24) / 2;\n          rect.top += paddingTop;\n          if (node.matches(\"ul:not([data-type=taskList]) li, ol li\")) {\n            rect.left -= options.dragHandleWidth;\n          }\n          rect.width = options.dragHandleWidth;\n          if (!dragHandleElement) return;\n          dragHandleElement.style.left = `${rect.left - rect.width}px`;\n          dragHandleElement.style.top = `${rect.top}px`;\n          showDragHandle();\n        },\n        keydown: () => {\n          hideDragHandle();\n        },\n        mousewheel: () => {\n          hideDragHandle();\n        },\n        // dragging class is used for CSS\n        dragstart: (view) => {\n          view.dom.classList.add(\"dragging\");\n        },\n        drop: (view) => {\n          view.dom.classList.remove(\"dragging\");\n        },\n        dragend: (view) => {\n          view.dom.classList.remove(\"dragging\");\n        }\n      }\n    }\n  });\n}\nconst DragAndDrop = _tiptap_react__WEBPACK_IMPORTED_MODULE_30__.Extension.create({\n  name: \"dragAndDrop\",\n  addProseMirrorPlugins() {\n    return [DragHandle({\n      dragHandleWidth: 24\n    })];\n  }\n});\nfunction buildDecorationSet(highlight, doc) {\n  const decorations = [];\n  if (highlight) {\n    decorations.push(_tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.Decoration.inline(highlight.from, highlight.to, {\n      class: \"dark:bg-surface-accent-700 bg-surface-accent-300\"\n    }));\n  }\n  const decorationSet = _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.DecorationSet.create(doc, decorations);\n  return decorationSet;\n}\nconst HighlightDecorationExtension = (initialHighlight) => _tiptap_react__WEBPACK_IMPORTED_MODULE_30__.Extension.create({\n  name: \"highlightDecoration\",\n  addOptions() {\n    return {\n      pluginKey: new _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.PluginKey(\"highlightDecoration\"),\n      highlight: initialHighlight\n    };\n  },\n  addProseMirrorPlugins() {\n    const pluginKey = this.options.pluginKey;\n    return [new _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.Plugin({\n      key: pluginKey,\n      state: {\n        init: (_, {\n          doc\n        }) => {\n          const highlight = this.options.highlight;\n          const decorationSet = highlight && doc ? buildDecorationSet(highlight, doc) : _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.DecorationSet.empty;\n          return {\n            decorationSet,\n            highlight\n          };\n        },\n        apply(transaction, oldState) {\n          const action = transaction.getMeta(pluginKey);\n          const highlight = action?.range;\n          if (action?.type === \"highlightDecoration\") {\n            const doc = transaction.doc;\n            const {\n              remove\n            } = action;\n            if (remove) {\n              return {\n                decorationSet: _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.DecorationSet.empty\n              };\n            }\n            const decorationSet = buildDecorationSet(highlight, doc);\n            return {\n              decorationSet,\n              highlight\n            };\n          } else {\n            return oldState;\n          }\n        }\n      },\n      props: {\n        decorations(state) {\n          const autocompleteState = this.getState(state);\n          if (autocompleteState?.decorationSet) {\n            return autocompleteState.decorationSet;\n          } else {\n            return _tiptap_pm_view__WEBPACK_IMPORTED_MODULE_26__.DecorationSet.empty;\n          }\n        }\n      }\n    })];\n  },\n  addCommands() {\n    return {\n      toggleAutocompleteHighlight: (range) => ({\n        state,\n        dispatch\n      }) => {\n        const {\n          selection\n        } = state;\n        const pos = selection.from;\n        if (!dispatch) return false;\n        const pluginKey = this.options.pluginKey;\n        const tr = state.tr.setMeta(pluginKey, {\n          pos,\n          type: \"highlightDecoration\",\n          remove: false,\n          range\n        });\n        dispatch(tr);\n        return true;\n      },\n      removeAutocompleteHighlight: () => ({\n        state,\n        dispatch\n      }) => {\n        if (!dispatch) return false;\n        const pluginKey = this.options.pluginKey;\n        const tr = state.tr.setMeta(pluginKey, {\n          pos: 0,\n          // We can pass any position as it will remove the entire decoration set\n          type: \"highlightDecoration\",\n          remove: true\n        });\n        dispatch(tr);\n        return true;\n      }\n    };\n  }\n});\nconst CommandPluginKey = new _tiptap_pm_state__WEBPACK_IMPORTED_MODULE_27__.PluginKey(\"slash-command\");\nconst SlashCommand = _tiptap_react__WEBPACK_IMPORTED_MODULE_30__.Node.create({\n  name: \"command\",\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n      renderText({\n        options,\n        node\n      }) {\n        return `${options.suggestion.char}${node.attrs.label ?? node.attrs.id}`;\n      },\n      deleteTriggerWithBackspace: false,\n      renderHTML({\n        options,\n        node\n      }) {\n        return [\"span\", (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_30__.mergeAttributes)(this.HTMLAttributes, options.HTMLAttributes), `${options.suggestion.char}${node.attrs.label ?? node.attrs.id}`];\n      },\n      suggestion: {\n        char: \"/\",\n        pluginKey: CommandPluginKey,\n        command: ({\n          editor,\n          range,\n          props\n        }) => {\n          const nodeAfter = editor.view.state.selection.$to.nodeAfter;\n          const overrideSpace = nodeAfter?.text?.startsWith(\" \");\n          if (overrideSpace) {\n            range.to += 1;\n          }\n          editor.chain().focus().insertContentAt(range, [{\n            type: this.name,\n            attrs: props\n          }, {\n            type: \"text\",\n            text: \" \"\n          }]).run();\n          window.getSelection()?.collapseToEnd();\n        },\n        allow: ({\n          state,\n          range\n        }) => {\n          const $from = state.doc.resolve(range.from);\n          const type = state.schema.nodes[this.name];\n          const allow = !!$from.parent.type.contentMatch.matchType(type);\n          return allow;\n        }\n      }\n    };\n  },\n  group: \"inline\",\n  inline: true,\n  selectable: false,\n  atom: true,\n  addAttributes() {\n    return {\n      id: {\n        default: null,\n        parseHTML: (element) => element.getAttribute(\"data-id\"),\n        renderHTML: (attributes) => {\n          if (!attributes.id) {\n            return {};\n          }\n          return {\n            \"data-id\": attributes.id\n          };\n        }\n      },\n      label: {\n        default: null,\n        parseHTML: (element) => element.getAttribute(\"data-label\"),\n        renderHTML: (attributes) => {\n          if (!attributes.label) {\n            return {};\n          }\n          return {\n            \"data-label\": attributes.label\n          };\n        }\n      }\n    };\n  },\n  parseHTML() {\n    return [{\n      tag: `span[data-type=\"${this.name}\"]`\n    }];\n  },\n  renderHTML({\n    node,\n    HTMLAttributes\n  }) {\n    if (this.options.renderLabel !== void 0) {\n      console.warn(\"renderLabel is deprecated use renderText and renderHTML instead\");\n      return [\"span\", (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_30__.mergeAttributes)({\n        \"data-type\": this.name\n      }, this.options.HTMLAttributes, HTMLAttributes), this.options.renderLabel({\n        options: this.options,\n        node\n      })];\n    }\n    const mergedOptions = {\n      ...this.options\n    };\n    mergedOptions.HTMLAttributes = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_30__.mergeAttributes)({\n      \"data-type\": this.name\n    }, this.options.HTMLAttributes, HTMLAttributes);\n    const html = this.options.renderHTML({\n      options: mergedOptions,\n      node\n    });\n    if (typeof html === \"string\") {\n      return [\"span\", (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_30__.mergeAttributes)({\n        \"data-type\": this.name\n      }, this.options.HTMLAttributes, HTMLAttributes), html];\n    }\n    return html;\n  },\n  renderText({\n    node\n  }) {\n    return this.options.renderText({\n      options: this.options,\n      node\n    });\n  },\n  addKeyboardShortcuts() {\n    return {\n      Backspace: () => this.editor.commands.command(({\n        tr,\n        state\n      }) => {\n        let isCommand = false;\n        const {\n          selection\n        } = state;\n        const {\n          empty,\n          anchor\n        } = selection;\n        if (!empty) {\n          return false;\n        }\n        state.doc.nodesBetween(anchor - 1, anchor, (node, pos) => {\n          if (node.type.name === this.name) {\n            isCommand = true;\n            tr.insertText(this.options.deleteTriggerWithBackspace ? \"\" : this.options.suggestion.char || \"\", pos, pos + node.nodeSize);\n            return false;\n          }\n          return true;\n        });\n        return isCommand;\n      })\n    };\n  },\n  addProseMirrorPlugins() {\n    return [(0,_tiptap_suggestion__WEBPACK_IMPORTED_MODULE_28__[\"default\"])({\n      editor: this.editor,\n      ...this.options.suggestion\n    })];\n  }\n});\nconst suggestion = (ref, {\n  upload,\n  aiController\n}) => ({\n  items: ({\n    query\n  }) => {\n    const availableSuggestionItems = [...suggestionItems];\n    if (aiController) {\n      availableSuggestionItems.push(autocompleteSuggestionItem);\n    }\n    return availableSuggestionItems.filter((item) => {\n      const inTitle = item.title.toLowerCase().startsWith(query.toLowerCase());\n      if (inTitle) return inTitle;\n      const inSearchTerms = item.searchTerms?.some((term) => term.toLowerCase().startsWith(query.toLowerCase()));\n      return inSearchTerms;\n    });\n  },\n  render: () => {\n    let component;\n    let popup;\n    return {\n      onStart: (props) => {\n        component = new _tiptap_react__WEBPACK_IMPORTED_MODULE_29__.ReactRenderer(CommandList, {\n          props: {\n            ...props,\n            upload,\n            aiController\n          },\n          editor: props.editor\n        });\n        if (!props.clientRect) {\n          return;\n        }\n        popup = (0,tippy_js__WEBPACK_IMPORTED_MODULE_34__[\"default\"])(\"body\", {\n          getReferenceClientRect: props.clientRect,\n          appendTo: ref?.current,\n          content: component.element,\n          showOnCreate: true,\n          interactive: true,\n          trigger: \"manual\",\n          placement: \"bottom-start\"\n        });\n      },\n      onUpdate(props) {\n        component.updateProps(props);\n        if (!props.clientRect) {\n          return;\n        }\n        popup[0].setProps({\n          getReferenceClientRect: props.clientRect\n        });\n      },\n      onKeyDown(props) {\n        if (props.event.key === \"Escape\") {\n          popup[0].hide();\n          props.event.preventDefault();\n          return true;\n        }\n        return component.ref?.onKeyDown(props);\n      },\n      onExit() {\n        if (popup && popup[0]) popup[0].destroy();\n        component?.destroy();\n      }\n    };\n  }\n});\nconst CommandList = (0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((props, ref) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_12__.c)(33);\n  const [selectedIndex, setSelectedIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n  const {\n    editor\n  } = (0,_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.useCurrentEditor)();\n  let t0;\n  if ($[0] !== editor || $[1] !== props.aiController || $[2] !== props.range || $[3] !== props.upload) {\n    t0 = (item) => {\n      if (!editor) {\n        return;\n      }\n      item?.command?.({\n        editor,\n        range: props.range,\n        upload: props.upload,\n        aiController: props.aiController\n      });\n    };\n    $[0] = editor;\n    $[1] = props.aiController;\n    $[2] = props.range;\n    $[3] = props.upload;\n    $[4] = t0;\n  } else {\n    t0 = $[4];\n  }\n  const selectItem = t0;\n  let t1;\n  if ($[5] !== props.items.length || $[6] !== selectedIndex) {\n    t1 = () => {\n      setSelectedIndex((selectedIndex + props.items.length - 1) % props.items.length);\n    };\n    $[5] = props.items.length;\n    $[6] = selectedIndex;\n    $[7] = t1;\n  } else {\n    t1 = $[7];\n  }\n  const upHandler = t1;\n  let t2;\n  if ($[8] !== props.items.length || $[9] !== selectedIndex) {\n    t2 = () => {\n      setSelectedIndex((selectedIndex + 1) % props.items.length);\n    };\n    $[8] = props.items.length;\n    $[9] = selectedIndex;\n    $[10] = t2;\n  } else {\n    t2 = $[10];\n  }\n  const downHandler = t2;\n  let t3;\n  if ($[11] !== props.items || $[12] !== selectItem || $[13] !== selectedIndex) {\n    t3 = () => {\n      const item_0 = props.items[selectedIndex];\n      selectItem(item_0);\n    };\n    $[11] = props.items;\n    $[12] = selectItem;\n    $[13] = selectedIndex;\n    $[14] = t3;\n  } else {\n    t3 = $[14];\n  }\n  const enterHandler = t3;\n  let t4;\n  if ($[15] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t4 = () => setSelectedIndex(0);\n    $[15] = t4;\n  } else {\n    t4 = $[15];\n  }\n  let t5;\n  if ($[16] !== props.items) {\n    t5 = [props.items];\n    $[16] = props.items;\n    $[17] = t5;\n  } else {\n    t5 = $[17];\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(t4, t5);\n  let t6;\n  if ($[18] !== downHandler || $[19] !== enterHandler || $[20] !== upHandler) {\n    t6 = () => ({\n      onKeyDown: (t72) => {\n        const {\n          event\n        } = t72;\n        if (event.key === \"ArrowUp\") {\n          upHandler();\n          return true;\n        }\n        if (event.key === \"ArrowDown\") {\n          downHandler();\n          return true;\n        }\n        if (event.key === \"Enter\") {\n          enterHandler();\n          return true;\n        }\n        return false;\n      }\n    });\n    $[18] = downHandler;\n    $[19] = enterHandler;\n    $[20] = upHandler;\n    $[21] = t6;\n  } else {\n    t6 = $[21];\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useImperativeHandle)(ref, t6);\n  let t7;\n  if ($[22] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t7 = [];\n    $[22] = t7;\n  } else {\n    t7 = $[22];\n  }\n  const itemRefs = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(t7);\n  let t8;\n  let t9;\n  if ($[23] !== selectedIndex) {\n    t8 = () => {\n      if (itemRefs.current[selectedIndex]) {\n        itemRefs.current[selectedIndex].scrollIntoView({\n          block: \"nearest\"\n        });\n      }\n    };\n    t9 = [selectedIndex];\n    $[23] = selectedIndex;\n    $[24] = t8;\n    $[25] = t9;\n  } else {\n    t8 = $[24];\n    t9 = $[25];\n  }\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(t8, t9);\n  let t10;\n  if ($[26] === Symbol.for(\"react.memo_cache_sentinel\")) {\n    t10 = (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"text-surface-900 dark:text-white z-50 max-h-[280px] h-auto w-72 overflow-y-auto rounded-md border bg-white dark:bg-surface-900 px-1 py-2 shadow transition-all\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin);\n    $[26] = t10;\n  } else {\n    t10 = $[26];\n  }\n  let t11;\n  if ($[27] !== props.items || $[28] !== selectItem || $[29] !== selectedIndex) {\n    t11 = props.items.length ? props.items.map((item_1, index) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"button\", { value: item_1.title, ref: (el) => {\n      if (!el) {\n        return;\n      }\n      itemRefs.current[index] = el;\n    }, onClick: () => selectItem(item_1), tabIndex: index === selectedIndex ? 0 : -1, \"aria-selected\": index === selectedIndex, className: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"flex w-full items-center space-x-2 rounded-md px-2 py-1 text-left text-sm hover:bg-blue-50 hover:dark:bg-surface-700 aria-selected:bg-blue-50 aria-selected:dark:bg-surface-700\", index === selectedIndex ? \"bg-blue-100 dark:bg-surface-accent-950\" : \"\"), children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"flex h-10 w-10 items-center justify-center rounded-md border bg-white dark:bg-surface-900\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin), children: item_1.icon }),\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(\"div\", { children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: \"font-medium\", children: item_1.title }),\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"p\", { className: \"text-xs text-surface-700 dark:text-surface-accent-300\", children: item_1.description })\n      ] })\n    ] }, item_1.title)) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: \"item\", children: \"No result\" });\n    $[27] = props.items;\n    $[28] = selectItem;\n    $[29] = selectedIndex;\n    $[30] = t11;\n  } else {\n    t11 = $[30];\n  }\n  let t12;\n  if ($[31] !== t11) {\n    t12 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: t10, children: t11 });\n    $[31] = t11;\n    $[32] = t12;\n  } else {\n    t12 = $[32];\n  }\n  return t12;\n});\nCommandList.displayName = \"CommandList\";\nconst autocompleteSuggestionItem = {\n  title: \"Autocomplete\",\n  description: \"Add text based on the context.\",\n  searchTerms: [\"ai\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.AutoFixHighIcon, { size: 18 }),\n  command: async ({\n    editor,\n    range,\n    aiController\n  }) => {\n    if (!aiController) throw Error(\"No AiController\");\n    editor.chain().focus().deleteRange(range).toggleNode(\"paragraph\", \"paragraph\").run();\n    const {\n      state\n    } = editor;\n    const {\n      from,\n      to\n    } = state.selection;\n    const textBeforeCursor = state.doc.textBetween(0, from, \"\\n\");\n    const textAfterCursor = state.doc.textBetween(to, state.doc.content.size, \"\\n\");\n    let buffer = \"\";\n    const result = await aiController.autocomplete(textBeforeCursor, textAfterCursor, (delta) => {\n      buffer += delta;\n      if (delta.length !== 0) {\n        editor.chain().focus().toggleLoadingDecoration(buffer).run();\n      }\n    });\n    editor.chain().focus().insertContent(result, {\n      applyInputRules: false,\n      applyPasteRules: false,\n      parseOptions: {\n        preserveWhitespace: false\n      }\n    }).run();\n  }\n};\nconst suggestionItems = [{\n  title: \"Text\",\n  description: \"Just start typing with plain text.\",\n  searchTerms: [\"p\", \"paragraph\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.TextFieldsIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).toggleNode(\"paragraph\", \"paragraph\").run();\n  }\n}, {\n  title: \"To-do List\",\n  description: \"Track tasks with a to-do list.\",\n  searchTerms: [\"todo\", \"task\", \"list\", \"check\", \"checkbox\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CheckBoxIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).toggleTaskList().run();\n  }\n}, {\n  title: \"Heading 1\",\n  description: \"Big section heading.\",\n  searchTerms: [\"title\", \"big\", \"large\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.LooksOneIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).setNode(\"heading\", {\n      level: 1\n    }).run();\n  }\n}, {\n  title: \"Heading 2\",\n  description: \"Medium section heading.\",\n  searchTerms: [\"subtitle\", \"medium\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.LooksTwoIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).setNode(\"heading\", {\n      level: 2\n    }).run();\n  }\n}, {\n  title: \"Heading 3\",\n  description: \"Small section heading.\",\n  searchTerms: [\"subtitle\", \"small\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Looks3Icon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).setNode(\"heading\", {\n      level: 3\n    }).run();\n  }\n}, {\n  title: \"Bullet List\",\n  description: \"Create a simple bullet list.\",\n  searchTerms: [\"unordered\", \"point\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatListBulletedIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).toggleBulletList().run();\n  }\n}, {\n  title: \"Numbered List\",\n  description: \"Create a list with numbering.\",\n  searchTerms: [\"ordered\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatListNumberedIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => {\n    editor.chain().focus().deleteRange(range).toggleOrderedList().run();\n  }\n}, {\n  title: \"Quote\",\n  description: \"Capture a quote.\",\n  searchTerms: [\"blockquote\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.FormatQuoteIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => editor.chain().focus().deleteRange(range).toggleNode(\"paragraph\", \"paragraph\").toggleBlockquote().run()\n}, {\n  title: \"Code\",\n  description: \"Capture a code snippet.\",\n  searchTerms: [\"codeblock\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.CodeIcon, { size: 18 }),\n  command: ({\n    editor,\n    range\n  }) => editor.chain().focus().deleteRange(range).toggleCodeBlock().run()\n}, {\n  title: \"Image\",\n  description: \"Upload an image from your computer.\",\n  searchTerms: [\"photo\", \"picture\", \"media\", \"upload\", \"file\"],\n  icon: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.ImageIcon, { size: 18 }),\n  command: ({\n    editor,\n    range,\n    upload\n  }) => {\n    editor.chain().focus().deleteRange(range).run();\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/*\";\n    input.onchange = async () => {\n      if (input.files?.length) {\n        const file = input.files[0];\n        if (!file) return;\n        const pos = editor.view.state.selection.from;\n        const fileList = input.files;\n        const files = Array.from(fileList);\n        const images = files.filter((file2) => /image/i.test(file2.type));\n        if (images.length === 0) {\n          console.log(\"No images found in uploaded files\");\n          return false;\n        }\n        const view = editor.view;\n        images.forEach((image) => {\n          const reader = new FileReader();\n          reader.onload = async (readerEvent) => {\n            await onFileRead(view, readerEvent, pos, upload, image);\n          };\n          reader.readAsDataURL(image);\n        });\n      }\n      return true;\n    };\n    input.click();\n  }\n}];\nconst CustomDocument = _tiptap_extension_document__WEBPACK_IMPORTED_MODULE_3__[\"default\"].extend({\n  // content: 'heading block*',\n});\nconst proseClasses = {\n  \"sm\": \"prose-sm\",\n  \"base\": \"prose-base\",\n  \"lg\": \"prose-lg\"\n};\nconst FireCMSEditor = ({\n  content,\n  onJsonContentChange,\n  onHtmlContentChange,\n  onMarkdownContentChange,\n  version,\n  textSize = \"base\",\n  highlight,\n  handleImageUpload,\n  aiController,\n  disabled\n}) => {\n  const ref = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const editorRef = react__WEBPACK_IMPORTED_MODULE_1__.useRef(null);\n  const imagePlugin = createDropImagePlugin(handleImageUpload);\n  const imageExtension = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => createImageExtension(imagePlugin), []);\n  const [openNode, setOpenNode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  const [openLink, setOpenLink] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n  (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.useInjectStyles)(\"Editor\", cssStyles);\n  const deferredHighlight = (0,react__WEBPACK_IMPORTED_MODULE_1__.useDeferredValue)(highlight);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (version === void 0) return;\n    if (version > -1 && editorRef.current) {\n      editorRef.current?.commands.setContent(content ?? \"\");\n    }\n  }, [version]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    editorRef?.current?.setEditable(!disabled);\n  }, [disabled]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(() => {\n    if (version === void 0) return;\n    if (editorRef.current && version > 0) {\n      const chain = editorRef.current.chain();\n      if (deferredHighlight) {\n        chain.focus().toggleAutocompleteHighlight(deferredHighlight).run();\n      } else {\n        chain.focus().removeAutocompleteHighlight().run();\n      }\n    }\n  }, [deferredHighlight?.from, deferredHighlight?.to]);\n  const onEditorUpdate = (editor) => {\n    editorRef.current = editor;\n    if (onMarkdownContentChange) {\n      const markdown = editorRef.current.storage.markdown.getMarkdown();\n      onMarkdownContentChange?.(addLineBreakAfterImages(markdown));\n    }\n    if (onJsonContentChange) {\n      const jsonContent = removeClassesFromJson(editor.getJSON());\n      onJsonContentChange(jsonContent);\n    }\n    if (onHtmlContentChange) {\n      onHtmlContentChange?.(editor.getHTML());\n    }\n  };\n  const proseClass = proseClasses[textSize];\n  const extensions = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(() => [\n    starterKit,\n    CustomDocument,\n    HighlightDecorationExtension(highlight),\n    TextLoadingDecorationExtension,\n    _tiptap_extension_underline__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n    _tiptap_extension_bold__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\n    _tiptap_extension_text_style__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\n    _tiptap_extension_italic__WEBPACK_IMPORTED_MODULE_10__[\"default\"],\n    _tiptap_extension_strike__WEBPACK_IMPORTED_MODULE_11__[\"default\"],\n    _tiptap_extension_color__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\n    _tiptap_extension_highlight__WEBPACK_IMPORTED_MODULE_8__[\"default\"].configure({\n      multicolor: true\n    }),\n    // CustomBlock.configure({\n    //     component: CustomComponent,\n    //     delimiter: \"```custom\"\n    // }),\n    _tiptap_extension_heading__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\n    CustomKeymap,\n    DragAndDrop,\n    placeholder,\n    tiptapLink,\n    imageExtension,\n    taskList,\n    taskItem,\n    tiptap_markdown__WEBPACK_IMPORTED_MODULE_35__.Markdown.configure({\n      html: true\n    }),\n    horizontalRule,\n    bulletList,\n    orderedList,\n    listItem,\n    blockquote,\n    codeBlock,\n    code,\n    SlashCommand.configure({\n      HTMLAttributes: {\n        class: \"mention\"\n      },\n      suggestion: suggestion(ref, {\n        upload: handleImageUpload,\n        aiController\n      })\n    })\n  ], []);\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { ref, className: \"relative min-h-[300px] w-full\", children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_tiptap_react__WEBPACK_IMPORTED_MODULE_29__.EditorProvider, { content: content ?? \"\", extensions, editorProps: {\n    editable: () => !disabled,\n    attributes: {\n      class: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(proseClass, \"prose-headings:font-title font-default focus:outline-none max-w-full p-12\")\n    }\n  }, onCreate: ({\n    editor: editor_0\n  }) => {\n    editorRef.current = editor_0;\n    editor_0.setEditable(!disabled);\n  }, onUpdate: ({\n    editor: editor_1\n  }) => {\n    onEditorUpdate(editor_1);\n  }, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(EditorBubble, { tippyOptions: {\n    placement: \"top\"\n  }, className: (0,_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.cls)(\"flex w-fit max-w-[90vw] h-10 overflow-hidden rounded border bg-white dark:bg-surface-900 shadow\", _firecms_ui__WEBPACK_IMPORTED_MODULE_2__.defaultBorderMixin), children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(NodeSelector, { portalContainer: ref.current, open: openNode, onOpenChange: setOpenNode }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Separator, { orientation: \"vertical\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(LinkSelector, { open: openLink, onOpenChange: setOpenLink }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_firecms_ui__WEBPACK_IMPORTED_MODULE_2__.Separator, { orientation: \"vertical\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TextButtons, {})\n  ] }) }) });\n};\nfunction addLineBreakAfterImages(markdown) {\n  const imageRegex = /!\\[.*?\\]\\(.*?\\)/g;\n  return markdown.replace(imageRegex, (match) => `${match}\n`);\n}\nconst cssStyles = `\n.ProseMirror {\n    box-shadow: none !important;\n}\n.ProseMirror .is-editor-empty:first-child::before {\n  content: attr(data-placeholder);\n  float: left;\n  color:  rgb(100 116 139); //500\n  pointer-events: none;\n  height: 0;\n}\n.ProseMirror .is-empty::before {\n  content: attr(data-placeholder);\n  float: left;\n  color:  rgb(100 116 139); //500\n  pointer-events: none;\n  height: 0;\n}\n\n[data-theme=\"dark\"] {\n  .ProseMirror .is-empty::before {\n    color: rgb(100 116 139); //500\n  }\n}\n\n.is-empty {\n  cursor: text;\n  color: rgb(100 116 139); //500\n}\n\n\n/* Custom image styles */\n\n.ProseMirror img {\n  transition: filter 0.1s ease-in-out;\n\n  &:hover {\n    cursor: pointer;\n    filter: brightness(90%);\n  }\n\n  &.ProseMirror-selectednode {\n    outline: 3px solid #5abbf7;\n    filter: brightness(90%);\n    box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important;\n  }\n}\n\n/* Custom TODO list checkboxes – shoutout to this awesome tutorial: https://moderncss.dev/pure-css-custom-checkbox-style/ */\n\nul[data-type=\"taskList\"] li > label {\n  margin-right: 0.2rem;\n  user-select: none;\n}\n\n@media screen and (max-width: 768px) {\n  ul[data-type=\"taskList\"] li > label {\n    margin-right: 0.5rem;\n  }\n}\n\n\n[data-theme=\"dark\"] {\n  ul[data-type=\"taskList\"] li > label input[type=\"checkbox\"] {\n    background-color: rgb(30 41 59); // 800\n    border: 2px solid #666;\n  \n    &:hover {\n      background-color: rgb(51 65 85); // 700\n    }\n  \n    &:active {\n      background-color: rgb(71 85 105);\n    }\n  }\n}\n  \n\nul[data-type=\"taskList\"] li > label input[type=\"checkbox\"] {\n  -webkit-appearance: none;\n  appearance: none;\n  background-color: white;\n  margin: 0;\n  cursor: pointer;\n  width: 1.2em;\n  height: 1.2em;\n  position: relative;\n  top: 5px;\n  border: 2px solid #777;\n  border-radius: 0.25em;\n  margin-right: 0.3rem;\n  display: grid;\n  place-content: center;\n\n  &:hover {\n    background-color: rgb(241 245 249); //100\n  }\n\n  &:active {\n    background-color: rgb(226 232 240); //200\n  }\n\n  &::before {\n    content: \"\";\n    width: 0.65em;\n    height: 0.65em;\n    transform: scale(0);\n    transition: 120ms transform ease-in-out;\n    box-shadow: inset 1em 1em;\n    transform-origin: center;\n    clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);\n  }\n\n  &:checked::before {\n    transform: scale(1);\n  }\n}\n\n[data-theme=\"dark\"] {\n  ul[data-type=\"taskList\"] li[data-checked=\"true\"] > div > p {\n    color: rgb(226 232 240);\n    text-decoration: line-through;\n    text-decoration-thickness: 2px;\n  }\n}\n\nul[data-type=\"taskList\"] li[data-checked=\"true\"] > div > p {\n  color: rgb(51 65 85); // 700\n  text-decoration: line-through;\n  text-decoration-thickness: 2px;\n}\n\n/* Overwrite tippy-box original max-width */\n\n.tippy-box {\n  max-width: 400px !important;\n}\n\n.ProseMirror:not(.dragging) .ProseMirror-selectednode {\n  // outline: none !important;\n  background-color: rgb(219 234 254); // blue 100\n  transition: background-color 0.2s;\n  box-shadow: none;\n}\n\n[data-theme=\"dark\"] .ProseMirror:not(.dragging) .ProseMirror-selectednode {\n  background-color:  rgb(51 65 85); // 700\n}\n\n.prose-base table p {\n    margin: 0;\n}\n\n.drag-handle {\n  position: absolute;\n  opacity: 1;\n  transition: opacity ease-in 0.2s;\n  border-radius: 0.25rem;\n\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10' style='fill: rgba(128, 128, 128, 0.9)'%3E%3Cpath d='M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z'%3E%3C/path%3E%3C/svg%3E\");\n  background-size: calc(0.5em + 0.375rem) calc(0.5em + 0.375rem);\n  background-repeat: no-repeat;\n  background-position: center;\n  width: 1.2rem;\n  height: 1.5rem;\n  z-index: 100;\n  cursor: grab;\n\n  &:hover {\n    background-color: rgb(241 245 249); //100\n    transition: background-color 0.2s;\n  }\n\n  &:active {\n    background-color: rgb(226 232 240); //200\n    transition: background-color 0.2s;\n  }\n\n  &.hide {\n    opacity: 0;\n    pointer-events: none;\n  }\n\n  @media screen and (max-width: 600px) {\n    display: none;\n    pointer-events: none;\n  }\n}\n\n[data-theme=\"dark\"] .drag-handle {\n  &:hover {\n    background-color: rgb(51 65 85); // 700\n  }\n\n  &:active {\n    background-color: rgb(51 65 85); // 700\n  }\n}\n`;\n\n//# sourceMappingURL=index.es.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQGZpcmVjbXMrZWRpdG9yQDMuMC4wLWJldGEuMTJfQHR5cGVzK3JlYWN0LWRvbUAxOC4zLjZfQHR5cGVzK3JlYWN0QDE4LjMuMjBfX0B0eXBlcytyZWFjdEAxOC4zX2g1NWYzNzNpaXI0bW5qaHJ1YXUzaTJ6b3hlL25vZGVfbW9kdWxlcy9AZmlyZWNtcy9lZGl0b3IvZGlzdC9pbmRleC5lcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQThDO0FBQ3lFO0FBQ3lTO0FBQzVSO0FBQ2xGO0FBQ1A7QUFDUztBQUNKO0FBQ0s7QUFDVDtBQUNRO0FBQ1Y7QUFDSTtBQUNBO0FBQ0g7QUFDQztBQUNDO0FBQ2tCO0FBQ2Y7QUFDRTtBQUNNO0FBQ0Q7QUFDQTtBQUNIO0FBQ0U7QUFDTztBQUNKO0FBQ0Y7QUFDSjtBQUNFO0FBQ0M7QUFDWjtBQUM4RTtBQUN6QjtBQUNuRDtBQUNmO0FBQzdCLHFCQUFxQixpREFBVTtBQUMvQixZQUFZLDBEQUFDO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLEVBQUUsZ0VBQWdCO0FBQ3RCLHNCQUFzQiw2Q0FBTTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEVBQUUsZ0RBQVM7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QztBQUN4Qzs7QUFFQTtBQUNBLHdDQUF3QztBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0NBQW9DO0FBQ3BDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTs7QUFFQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFDQUFxQztBQUNyQzs7QUFFQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMva3Jpc3RvZmZlcndpbmRvbGYvU2l0ZXMvbXJrdy9ub2RlX21vZHVsZXMvLnBucG0vQGZpcmVjbXMrZWRpdG9yQDMuMC4wLWJldGEuMTJfQHR5cGVzK3JlYWN0LWRvbUAxOC4zLjZfQHR5cGVzK3JlYWN0QDE4LjMuMjBfX0B0eXBlcytyZWFjdEAxOC4zX2g1NWYzNzNpaXI0bW5qaHJ1YXUzaTJ6b3hlL25vZGVfbW9kdWxlcy9AZmlyZWNtcy9lZGl0b3IvZGlzdC9pbmRleC5lcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3gsIGpzeHMgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCBSZWFjdCwgeyBmb3J3YXJkUmVmLCB1c2VSZWYsIHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUltcGVyYXRpdmVIYW5kbGUsIHVzZU1lbW8sIHVzZURlZmVycmVkVmFsdWUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IENoZWNrSWNvbiwgVGV4dEZpZWxkc0ljb24sIExvb2tzT25lSWNvbiwgTG9va3NUd29JY29uLCBMb29rczNJY29uLCBDaGVja0JveEljb24sIEZvcm1hdExpc3RCdWxsZXRlZEljb24sIEZvcm1hdExpc3ROdW1iZXJlZEljb24sIEZvcm1hdFF1b3RlSWNvbiwgQ29kZUljb24sIEtleWJvYXJkQXJyb3dEb3duSWNvbiwgQnV0dG9uLCBQb3BvdmVyLCBjbHMsIGZvY3VzZWREaXNhYmxlZCwgRGVsZXRlSWNvbiwgRm9ybWF0Qm9sZEljb24sIEZvcm1hdEl0YWxpY0ljb24sIEZvcm1hdFVuZGVybGluZWRJY29uLCBGb3JtYXRTdHJpa2V0aHJvdWdoSWNvbiwgZGVmYXVsdEJvcmRlck1peGluLCBBdXRvRml4SGlnaEljb24sIEltYWdlSWNvbiwgdXNlSW5qZWN0U3R5bGVzLCBTZXBhcmF0b3IgfSBmcm9tIFwiQGZpcmVjbXMvdWlcIjtcbmltcG9ydCB7IHVzZUN1cnJlbnRFZGl0b3IsIEJ1YmJsZU1lbnUsIGlzTm9kZVNlbGVjdGlvbiwgTm9kZSwgbWVyZ2VBdHRyaWJ1dGVzLCBSZWFjdFJlbmRlcmVyLCBFZGl0b3JQcm92aWRlciB9IGZyb20gXCJAdGlwdGFwL3JlYWN0XCI7XG5pbXBvcnQgRG9jdW1lbnQgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWRvY3VtZW50XCI7XG5pbXBvcnQgeyBNYXJrZG93biB9IGZyb20gXCJ0aXB0YXAtbWFya2Rvd25cIjtcbmltcG9ydCBVbmRlcmxpbmUgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLXVuZGVybGluZVwiO1xuaW1wb3J0IEhlYWRpbmcgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWhlYWRpbmdcIjtcbmltcG9ydCBUZXh0U3R5bGUgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLXRleHQtc3R5bGVcIjtcbmltcG9ydCBDb2xvciBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tY29sb3JcIjtcbmltcG9ydCBIaWdobGlnaHQgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWhpZ2hsaWdodFwiO1xuaW1wb3J0IEJvbGQgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWJvbGRcIjtcbmltcG9ydCBJdGFsaWMgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWl0YWxpY1wiO1xuaW1wb3J0IFN0cmlrZSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tc3RyaWtlXCI7XG5pbXBvcnQgeyBjIH0gZnJvbSBcInJlYWN0LWNvbXBpbGVyLXJ1bnRpbWVcIjtcbmltcG9ydCB7IFNsb3QgfSBmcm9tIFwiQHJhZGl4LXVpL3JlYWN0LXNsb3RcIjtcbmltcG9ydCBTdGFydGVyS2l0IGZyb20gXCJAdGlwdGFwL3N0YXJ0ZXIta2l0XCI7XG5pbXBvcnQgSG9yaXpvbnRhbFJ1bGUgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWhvcml6b250YWwtcnVsZVwiO1xuaW1wb3J0IFRpcHRhcExpbmsgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWxpbmtcIjtcbmltcG9ydCBUaXB0YXBJbWFnZSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24taW1hZ2VcIjtcbmltcG9ydCBQbGFjZWhvbGRlciBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tcGxhY2Vob2xkZXJcIjtcbmltcG9ydCB7IFRhc2tJdGVtIH0gZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLXRhc2staXRlbVwiO1xuaW1wb3J0IHsgVGFza0xpc3QgfSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tdGFzay1saXN0XCI7XG5pbXBvcnQgeyBFeHRlbnNpb24sIElucHV0UnVsZSB9IGZyb20gXCJAdGlwdGFwL2NvcmVcIjtcbmltcG9ydCB7IFBsdWdpbktleSwgUGx1Z2luIH0gZnJvbSBcInByb3NlbWlycm9yLXN0YXRlXCI7XG5pbXBvcnQgeyBEZWNvcmF0aW9uU2V0LCBEZWNvcmF0aW9uIH0gZnJvbSBcInByb3NlbWlycm9yLXZpZXdcIjtcbmltcG9ydCBPcmRlcmVkTGlzdCBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tb3JkZXJlZC1saXN0XCI7XG5pbXBvcnQgQnVsbGV0TGlzdCBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tYnVsbGV0LWxpc3RcIjtcbmltcG9ydCBMaXN0SXRlbSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tbGlzdC1pdGVtXCI7XG5pbXBvcnQgQ29kZUJsb2NrIGZyb20gXCJAdGlwdGFwL2V4dGVuc2lvbi1jb2RlLWJsb2NrXCI7XG5pbXBvcnQgQmxvY2txdW90ZSBmcm9tIFwiQHRpcHRhcC9leHRlbnNpb24tYmxvY2txdW90ZVwiO1xuaW1wb3J0IENvZGUgZnJvbSBcIkB0aXB0YXAvZXh0ZW5zaW9uLWNvZGVcIjtcbmltcG9ydCB7IERlY29yYXRpb25TZXQgYXMgRGVjb3JhdGlvblNldCQxLCBEZWNvcmF0aW9uIGFzIERlY29yYXRpb24kMSwgX19zZXJpYWxpemVGb3JDbGlwYm9hcmQgfSBmcm9tIFwiQHRpcHRhcC9wbS92aWV3XCI7XG5pbXBvcnQgeyBQbHVnaW5LZXkgYXMgUGx1Z2luS2V5JDEsIFBsdWdpbiBhcyBQbHVnaW4kMSwgTm9kZVNlbGVjdGlvbiB9IGZyb20gXCJAdGlwdGFwL3BtL3N0YXRlXCI7XG5pbXBvcnQgU3VnZ2VzdGlvbiBmcm9tIFwiQHRpcHRhcC9zdWdnZXN0aW9uXCI7XG5pbXBvcnQgdGlwcHkgZnJvbSBcInRpcHB5LmpzXCI7XG5jb25zdCBFZGl0b3JCdWJibGUgPSBmb3J3YXJkUmVmKCh0MCwgcmVmKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDIxKTtcbiAgbGV0IGNoaWxkcmVuO1xuICBsZXQgcmVzdDtcbiAgbGV0IHRpcHB5T3B0aW9ucztcbiAgaWYgKCRbMF0gIT09IHQwKSB7XG4gICAgKHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgdGlwcHlPcHRpb25zLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSB0MCk7XG4gICAgJFswXSA9IHQwO1xuICAgICRbMV0gPSBjaGlsZHJlbjtcbiAgICAkWzJdID0gcmVzdDtcbiAgICAkWzNdID0gdGlwcHlPcHRpb25zO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkcmVuID0gJFsxXTtcbiAgICByZXN0ID0gJFsyXTtcbiAgICB0aXBweU9wdGlvbnMgPSAkWzNdO1xuICB9XG4gIGNvbnN0IHtcbiAgICBlZGl0b3JcbiAgfSA9IHVzZUN1cnJlbnRFZGl0b3IoKTtcbiAgY29uc3QgaW5zdGFuY2VSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGxldCB0MTtcbiAgaWYgKCRbNF0gIT09IHRpcHB5T3B0aW9ucykge1xuICAgIHQxID0gKCkgPT4ge1xuICAgICAgaWYgKCFpbnN0YW5jZVJlZi5jdXJyZW50IHx8ICF0aXBweU9wdGlvbnM/LnBsYWNlbWVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpbnN0YW5jZVJlZi5jdXJyZW50LnNldFByb3BzKHtcbiAgICAgICAgcGxhY2VtZW50OiB0aXBweU9wdGlvbnMucGxhY2VtZW50XG4gICAgICB9KTtcbiAgICAgIGluc3RhbmNlUmVmLmN1cnJlbnQucG9wcGVySW5zdGFuY2U/LnVwZGF0ZSgpO1xuICAgIH07XG4gICAgJFs0XSA9IHRpcHB5T3B0aW9ucztcbiAgICAkWzVdID0gdDE7XG4gIH0gZWxzZSB7XG4gICAgdDEgPSAkWzVdO1xuICB9XG4gIGNvbnN0IHQyID0gdGlwcHlPcHRpb25zPy5wbGFjZW1lbnQ7XG4gIGxldCB0MztcbiAgaWYgKCRbNl0gIT09IHQyKSB7XG4gICAgdDMgPSBbdDJdO1xuICAgICRbNl0gPSB0MjtcbiAgICAkWzddID0gdDM7XG4gIH0gZWxzZSB7XG4gICAgdDMgPSAkWzddO1xuICB9XG4gIHVzZUVmZmVjdCh0MSwgdDMpO1xuICBsZXQgdDQ7XG4gIGNvbnN0IHNob3VsZFNob3cgPSBfdGVtcCQxO1xuICBsZXQgdDU7XG4gIGlmICgkWzhdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSkge1xuICAgIHQ1ID0gKHZhbCkgPT4ge1xuICAgICAgaW5zdGFuY2VSZWYuY3VycmVudCA9IHZhbDtcbiAgICB9O1xuICAgICRbOF0gPSB0NTtcbiAgfSBlbHNlIHtcbiAgICB0NSA9ICRbOF07XG4gIH1cbiAgbGV0IHQ2O1xuICBpZiAoJFs5XSAhPT0gdGlwcHlPcHRpb25zKSB7XG4gICAgdDYgPSB7XG4gICAgICBvbkNyZWF0ZTogdDUsXG4gICAgICBtb3ZlVHJhbnNpdGlvbjogXCJ0cmFuc2Zvcm0gMC4xNXMgZWFzZS1vdXRcIixcbiAgICAgIC4uLnRpcHB5T3B0aW9uc1xuICAgIH07XG4gICAgJFs5XSA9IHRpcHB5T3B0aW9ucztcbiAgICAkWzEwXSA9IHQ2O1xuICB9IGVsc2Uge1xuICAgIHQ2ID0gJFsxMF07XG4gIH1cbiAgbGV0IHQ3O1xuICBpZiAoJFsxMV0gIT09IHJlc3QgfHwgJFsxMl0gIT09IHQ2KSB7XG4gICAgdDcgPSB7XG4gICAgICBzaG91bGRTaG93LFxuICAgICAgdGlwcHlPcHRpb25zOiB0NixcbiAgICAgIC4uLnJlc3RcbiAgICB9O1xuICAgICRbMTFdID0gcmVzdDtcbiAgICAkWzEyXSA9IHQ2O1xuICAgICRbMTNdID0gdDc7XG4gIH0gZWxzZSB7XG4gICAgdDcgPSAkWzEzXTtcbiAgfVxuICB0NCA9IHQ3O1xuICBjb25zdCBidWJibGVNZW51UHJvcHMgPSB0NDtcbiAgaWYgKCFlZGl0b3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgdDg7XG4gIGlmICgkWzE0XSAhPT0gYnViYmxlTWVudVByb3BzIHx8ICRbMTVdICE9PSBjaGlsZHJlbiB8fCAkWzE2XSAhPT0gZWRpdG9yKSB7XG4gICAgdDggPSAvKiBAX19QVVJFX18gKi8ganN4KEJ1YmJsZU1lbnUsIHsgZWRpdG9yLCAuLi5idWJibGVNZW51UHJvcHMsIGNoaWxkcmVuIH0pO1xuICAgICRbMTRdID0gYnViYmxlTWVudVByb3BzO1xuICAgICRbMTVdID0gY2hpbGRyZW47XG4gICAgJFsxNl0gPSBlZGl0b3I7XG4gICAgJFsxN10gPSB0ODtcbiAgfSBlbHNlIHtcbiAgICB0OCA9ICRbMTddO1xuICB9XG4gIGxldCB0OTtcbiAgaWYgKCRbMThdICE9PSByZWYgfHwgJFsxOV0gIT09IHQ4KSB7XG4gICAgdDkgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgcmVmLCBjaGlsZHJlbjogdDggfSk7XG4gICAgJFsxOF0gPSByZWY7XG4gICAgJFsxOV0gPSB0ODtcbiAgICAkWzIwXSA9IHQ5O1xuICB9IGVsc2Uge1xuICAgIHQ5ID0gJFsyMF07XG4gIH1cbiAgcmV0dXJuIHQ5O1xufSk7XG5mdW5jdGlvbiBfdGVtcCQxKHQwKSB7XG4gIGNvbnN0IHtcbiAgICBlZGl0b3I6IGVkaXRvcl8wLFxuICAgIHN0YXRlXG4gIH0gPSB0MDtcbiAgY29uc3Qge1xuICAgIHNlbGVjdGlvblxuICB9ID0gc3RhdGU7XG4gIGNvbnN0IHtcbiAgICBlbXB0eVxuICB9ID0gc2VsZWN0aW9uO1xuICBpZiAoZWRpdG9yXzAuaXNBY3RpdmUoXCJpbWFnZVwiKSB8fCBlbXB0eSB8fCBpc05vZGVTZWxlY3Rpb24oc2VsZWN0aW9uKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbmNvbnN0IEVkaXRvckJ1YmJsZUl0ZW0gPSBmb3J3YXJkUmVmKCh0MCwgcmVmKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDE0KTtcbiAgbGV0IGFzQ2hpbGQ7XG4gIGxldCBjaGlsZHJlbjtcbiAgbGV0IG9uU2VsZWN0O1xuICBsZXQgcmVzdDtcbiAgaWYgKCRbMF0gIT09IHQwKSB7XG4gICAgKHtcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgYXNDaGlsZCxcbiAgICAgIG9uU2VsZWN0LFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSB0MCk7XG4gICAgJFswXSA9IHQwO1xuICAgICRbMV0gPSBhc0NoaWxkO1xuICAgICRbMl0gPSBjaGlsZHJlbjtcbiAgICAkWzNdID0gb25TZWxlY3Q7XG4gICAgJFs0XSA9IHJlc3Q7XG4gIH0gZWxzZSB7XG4gICAgYXNDaGlsZCA9ICRbMV07XG4gICAgY2hpbGRyZW4gPSAkWzJdO1xuICAgIG9uU2VsZWN0ID0gJFszXTtcbiAgICByZXN0ID0gJFs0XTtcbiAgfVxuICBjb25zdCB7XG4gICAgZWRpdG9yXG4gIH0gPSB1c2VDdXJyZW50RWRpdG9yKCk7XG4gIGNvbnN0IENvbXAgPSBhc0NoaWxkID8gU2xvdCA6IFwiZGl2XCI7XG4gIGlmICghZWRpdG9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IHQxO1xuICBpZiAoJFs1XSAhPT0gZWRpdG9yIHx8ICRbNl0gIT09IG9uU2VsZWN0KSB7XG4gICAgdDEgPSAoKSA9PiBvblNlbGVjdD8uKGVkaXRvcik7XG4gICAgJFs1XSA9IGVkaXRvcjtcbiAgICAkWzZdID0gb25TZWxlY3Q7XG4gICAgJFs3XSA9IHQxO1xuICB9IGVsc2Uge1xuICAgIHQxID0gJFs3XTtcbiAgfVxuICBsZXQgdDI7XG4gIGlmICgkWzhdICE9PSBDb21wIHx8ICRbOV0gIT09IGNoaWxkcmVuIHx8ICRbMTBdICE9PSByZWYgfHwgJFsxMV0gIT09IHJlc3QgfHwgJFsxMl0gIT09IHQxKSB7XG4gICAgdDIgPSAvKiBAX19QVVJFX18gKi8ganN4KENvbXAsIHsgcmVmLCAuLi5yZXN0LCBvbkNsaWNrOiB0MSwgY2hpbGRyZW4gfSk7XG4gICAgJFs4XSA9IENvbXA7XG4gICAgJFs5XSA9IGNoaWxkcmVuO1xuICAgICRbMTBdID0gcmVmO1xuICAgICRbMTFdID0gcmVzdDtcbiAgICAkWzEyXSA9IHQxO1xuICAgICRbMTNdID0gdDI7XG4gIH0gZWxzZSB7XG4gICAgdDIgPSAkWzEzXTtcbiAgfVxuICByZXR1cm4gdDI7XG59KTtcbkVkaXRvckJ1YmJsZUl0ZW0uZGlzcGxheU5hbWUgPSBcIkVkaXRvckJ1YmJsZUl0ZW1cIjtcbmNvbnN0IGl0ZW1zID0gW3tcbiAgbmFtZTogXCJUZXh0XCIsXG4gIGljb246IFRleHRGaWVsZHNJY29uLFxuICBjb21tYW5kOiAoZWRpdG9yKSA9PiBlZGl0b3I/LmNoYWluKCkuZm9jdXMoKS50b2dnbGVOb2RlKFwicGFyYWdyYXBoXCIsIFwicGFyYWdyYXBoXCIpLnJ1bigpLFxuICAvLyBJIGZlZWwgbGlrZSB0aGVyZSBoYXMgdG8gYmUgYSBtb3JlIGVmZmljaWVudCB3YXkgdG8gZG8gdGhpcyDigJMgZmVlbCBmcmVlIHRvIFBSIGlmIHlvdSBrbm93IGhvdyFcbiAgaXNBY3RpdmU6IChlZGl0b3IpID0+IChlZGl0b3I/LmlzQWN0aXZlKFwicGFyYWdyYXBoXCIpICYmICFlZGl0b3I/LmlzQWN0aXZlKFwiYnVsbGV0TGlzdFwiKSAmJiAhZWRpdG9yPy5pc0FjdGl2ZShcIm9yZGVyZWRMaXN0XCIpKSA/PyBmYWxzZVxufSwge1xuICBuYW1lOiBcIkhlYWRpbmcgMVwiLFxuICBpY29uOiBMb29rc09uZUljb24sXG4gIGNvbW1hbmQ6IChlZGl0b3IpID0+IGVkaXRvcj8uY2hhaW4oKS5mb2N1cygpLnRvZ2dsZUhlYWRpbmcoe1xuICAgIGxldmVsOiAxXG4gIH0pLnJ1bigpLFxuICBpc0FjdGl2ZTogKGVkaXRvcikgPT4gZWRpdG9yPy5pc0FjdGl2ZShcImhlYWRpbmdcIiwge1xuICAgIGxldmVsOiAxXG4gIH0pID8/IGZhbHNlXG59LCB7XG4gIG5hbWU6IFwiSGVhZGluZyAyXCIsXG4gIGljb246IExvb2tzVHdvSWNvbixcbiAgY29tbWFuZDogKGVkaXRvcikgPT4gZWRpdG9yPy5jaGFpbigpLmZvY3VzKCkudG9nZ2xlSGVhZGluZyh7XG4gICAgbGV2ZWw6IDJcbiAgfSkucnVuKCksXG4gIGlzQWN0aXZlOiAoZWRpdG9yKSA9PiBlZGl0b3I/LmlzQWN0aXZlKFwiaGVhZGluZ1wiLCB7XG4gICAgbGV2ZWw6IDJcbiAgfSkgPz8gZmFsc2Vcbn0sIHtcbiAgbmFtZTogXCJIZWFkaW5nIDNcIixcbiAgaWNvbjogTG9va3MzSWNvbixcbiAgY29tbWFuZDogKGVkaXRvcikgPT4gZWRpdG9yPy5jaGFpbigpLmZvY3VzKCkudG9nZ2xlSGVhZGluZyh7XG4gICAgbGV2ZWw6IDNcbiAgfSkucnVuKCksXG4gIGlzQWN0aXZlOiAoZWRpdG9yKSA9PiBlZGl0b3I/LmlzQWN0aXZlKFwiaGVhZGluZ1wiLCB7XG4gICAgbGV2ZWw6IDNcbiAgfSkgPz8gZmFsc2Vcbn0sIHtcbiAgbmFtZTogXCJUby1kbyBMaXN0XCIsXG4gIGljb246IENoZWNrQm94SWNvbixcbiAgY29tbWFuZDogKGVkaXRvcikgPT4gZWRpdG9yPy5jaGFpbigpLmZvY3VzKCkudG9nZ2xlVGFza0xpc3QoKS5ydW4oKSxcbiAgaXNBY3RpdmU6IChlZGl0b3IpID0+IGVkaXRvcj8uaXNBY3RpdmUoXCJ0YXNrSXRlbVwiKSA/PyBmYWxzZVxufSwge1xuICBuYW1lOiBcIkJ1bGxldCBMaXN0XCIsXG4gIGljb246IEZvcm1hdExpc3RCdWxsZXRlZEljb24sXG4gIGNvbW1hbmQ6IChlZGl0b3IpID0+IGVkaXRvcj8uY2hhaW4oKS5mb2N1cygpLnRvZ2dsZUJ1bGxldExpc3QoKS5ydW4oKSxcbiAgaXNBY3RpdmU6IChlZGl0b3IpID0+IGVkaXRvcj8uaXNBY3RpdmUoXCJidWxsZXRMaXN0XCIpID8/IGZhbHNlXG59LCB7XG4gIG5hbWU6IFwiTnVtYmVyZWQgTGlzdFwiLFxuICBpY29uOiBGb3JtYXRMaXN0TnVtYmVyZWRJY29uLFxuICBjb21tYW5kOiAoZWRpdG9yKSA9PiBlZGl0b3I/LmNoYWluKCkuZm9jdXMoKS50b2dnbGVPcmRlcmVkTGlzdCgpLnJ1bigpLFxuICBpc0FjdGl2ZTogKGVkaXRvcikgPT4gZWRpdG9yPy5pc0FjdGl2ZShcIm9yZGVyZWRMaXN0XCIpID8/IGZhbHNlXG59LCB7XG4gIG5hbWU6IFwiUXVvdGVcIixcbiAgaWNvbjogRm9ybWF0UXVvdGVJY29uLFxuICBjb21tYW5kOiAoZWRpdG9yKSA9PiBlZGl0b3I/LmNoYWluKCkuZm9jdXMoKS50b2dnbGVOb2RlKFwicGFyYWdyYXBoXCIsIFwicGFyYWdyYXBoXCIpLnRvZ2dsZUJsb2NrcXVvdGUoKS5ydW4oKSxcbiAgaXNBY3RpdmU6IChlZGl0b3IpID0+IGVkaXRvcj8uaXNBY3RpdmUoXCJibG9ja3F1b3RlXCIpID8/IGZhbHNlXG59LCB7XG4gIG5hbWU6IFwiQ29kZVwiLFxuICBpY29uOiBDb2RlSWNvbixcbiAgY29tbWFuZDogKGVkaXRvcikgPT4gZWRpdG9yPy5jaGFpbigpLmZvY3VzKCkudG9nZ2xlQ29kZUJsb2NrKCkucnVuKCksXG4gIGlzQWN0aXZlOiAoZWRpdG9yKSA9PiBlZGl0b3I/LmlzQWN0aXZlKFwiY29kZUJsb2NrXCIpID8/IGZhbHNlXG59XTtcbmNvbnN0IE5vZGVTZWxlY3RvciA9ICh0MCkgPT4ge1xuICBjb25zdCAkID0gYygxNik7XG4gIGNvbnN0IHtcbiAgICBvcGVuLFxuICAgIG9uT3BlbkNoYW5nZSxcbiAgICBwb3J0YWxDb250YWluZXJcbiAgfSA9IHQwO1xuICBjb25zdCB7XG4gICAgZWRpdG9yXG4gIH0gPSB1c2VDdXJyZW50RWRpdG9yKCk7XG4gIGlmICghZWRpdG9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IHQxO1xuICBpZiAoJFswXSAhPT0gZWRpdG9yKSB7XG4gICAgdDEgPSBpdGVtcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaXNBY3RpdmUoZWRpdG9yKSkucG9wKCkgPz8ge1xuICAgICAgbmFtZTogXCJNdWx0aXBsZVwiXG4gICAgfTtcbiAgICAkWzBdID0gZWRpdG9yO1xuICAgICRbMV0gPSB0MTtcbiAgfSBlbHNlIHtcbiAgICB0MSA9ICRbMV07XG4gIH1cbiAgY29uc3QgYWN0aXZlSXRlbSA9IHQxO1xuICBsZXQgdDI7XG4gIGlmICgkWzJdICE9PSBhY3RpdmVJdGVtLm5hbWUpIHtcbiAgICB0MiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJzcGFuXCIsIHsgY2xhc3NOYW1lOiBcIndoaXRlc3BhY2Utbm93cmFwIHRleHQtc21cIiwgY2hpbGRyZW46IGFjdGl2ZUl0ZW0ubmFtZSB9KTtcbiAgICAkWzJdID0gYWN0aXZlSXRlbS5uYW1lO1xuICAgICRbM10gPSB0MjtcbiAgfSBlbHNlIHtcbiAgICB0MiA9ICRbM107XG4gIH1cbiAgbGV0IHQzO1xuICBpZiAoJFs0XSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikpIHtcbiAgICB0MyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goS2V5Ym9hcmRBcnJvd0Rvd25JY29uLCB7IHNpemU6IFwic21hbGxcIiB9KTtcbiAgICAkWzRdID0gdDM7XG4gIH0gZWxzZSB7XG4gICAgdDMgPSAkWzRdO1xuICB9XG4gIGxldCB0NDtcbiAgaWYgKCRbNV0gIT09IHQyKSB7XG4gICAgdDQgPSAvKiBAX19QVVJFX18gKi8ganN4cyhCdXR0b24sIHsgdmFyaWFudDogXCJ0ZXh0XCIsIGNsYXNzTmFtZTogXCJnYXAtMiByb3VuZGVkLW5vbmVcIiwgY29sb3I6IFwidGV4dFwiLCBjaGlsZHJlbjogW1xuICAgICAgdDIsXG4gICAgICB0M1xuICAgIF0gfSk7XG4gICAgJFs1XSA9IHQyO1xuICAgICRbNl0gPSB0NDtcbiAgfSBlbHNlIHtcbiAgICB0NCA9ICRbNl07XG4gIH1cbiAgbGV0IHQ1O1xuICBpZiAoJFs3XSAhPT0gYWN0aXZlSXRlbS5uYW1lIHx8ICRbOF0gIT09IG9uT3BlbkNoYW5nZSkge1xuICAgIHQ1ID0gaXRlbXMubWFwKChpdGVtXzAsIGluZGV4KSA9PiAvKiBAX19QVVJFX18gKi8ganN4cyhFZGl0b3JCdWJibGVJdGVtLCB7IG9uU2VsZWN0OiAoZWRpdG9yXzApID0+IHtcbiAgICAgIGl0ZW1fMC5jb21tYW5kKGVkaXRvcl8wKTtcbiAgICAgIG9uT3BlbkNoYW5nZShmYWxzZSk7XG4gICAgfSwgY2xhc3NOYW1lOiBcImZsZXggY3Vyc29yLXBvaW50ZXIgaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiByb3VuZGVkIHB4LTIgcHktMSB0ZXh0LXNtIGhvdmVyOmJnLWJsdWUtNTAgaG92ZXI6ZGFyazpiZy1zdXJmYWNlLTcwMCB0ZXh0LXN1cmZhY2UtOTAwIGRhcms6dGV4dC13aGl0ZVwiLCBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleCBpdGVtcy1jZW50ZXIgc3BhY2UteC0yXCIsIGNoaWxkcmVuOiBbXG4gICAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goaXRlbV8wLmljb24sIHsgc2l6ZTogXCJzbWFsbGVzdFwiIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwic3BhblwiLCB7IGNoaWxkcmVuOiBpdGVtXzAubmFtZSB9KVxuICAgICAgXSB9KSxcbiAgICAgIGFjdGl2ZUl0ZW0ubmFtZSA9PT0gaXRlbV8wLm5hbWUgJiYgLyogQF9fUFVSRV9fICovIGpzeChDaGVja0ljb24sIHsgc2l6ZTogXCJzbWFsbGVzdFwiIH0pXG4gICAgXSB9LCBpbmRleCkpO1xuICAgICRbN10gPSBhY3RpdmVJdGVtLm5hbWU7XG4gICAgJFs4XSA9IG9uT3BlbkNoYW5nZTtcbiAgICAkWzldID0gdDU7XG4gIH0gZWxzZSB7XG4gICAgdDUgPSAkWzldO1xuICB9XG4gIGxldCB0NjtcbiAgaWYgKCRbMTBdICE9PSBvbk9wZW5DaGFuZ2UgfHwgJFsxMV0gIT09IG9wZW4gfHwgJFsxMl0gIT09IHBvcnRhbENvbnRhaW5lciB8fCAkWzEzXSAhPT0gdDQgfHwgJFsxNF0gIT09IHQ1KSB7XG4gICAgdDYgPSAvKiBAX19QVVJFX18gKi8ganN4KFBvcG92ZXIsIHsgc2lkZU9mZnNldDogNSwgYWxpZ246IFwic3RhcnRcIiwgcG9ydGFsQ29udGFpbmVyLCBjbGFzc05hbWU6IFwidy00OCBwLTFcIiwgdHJpZ2dlcjogdDQsIG1vZGFsOiB0cnVlLCBvcGVuLCBvbk9wZW5DaGFuZ2UsIGNoaWxkcmVuOiB0NSB9KTtcbiAgICAkWzEwXSA9IG9uT3BlbkNoYW5nZTtcbiAgICAkWzExXSA9IG9wZW47XG4gICAgJFsxMl0gPSBwb3J0YWxDb250YWluZXI7XG4gICAgJFsxM10gPSB0NDtcbiAgICAkWzE0XSA9IHQ1O1xuICAgICRbMTVdID0gdDY7XG4gIH0gZWxzZSB7XG4gICAgdDYgPSAkWzE1XTtcbiAgfVxuICByZXR1cm4gdDY7XG59O1xuZnVuY3Rpb24gaXNWYWxpZFVybCh1cmwpIHtcbiAgdHJ5IHtcbiAgICBuZXcgVVJMKHVybCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFVybEZyb21TdHJpbmcoc3RyKSB7XG4gIGlmIChpc1ZhbGlkVXJsKHN0cikpIHJldHVybiBzdHI7XG4gIHRyeSB7XG4gICAgaWYgKHN0ci5pbmNsdWRlcyhcIi5cIikgJiYgIXN0ci5pbmNsdWRlcyhcIiBcIikpIHtcbiAgICAgIHJldHVybiBuZXcgVVJMKGBodHRwczovLyR7c3RyfWApLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbmNvbnN0IExpbmtTZWxlY3RvciA9ICh0MCkgPT4ge1xuICBjb25zdCAkID0gYygyNCk7XG4gIGNvbnN0IHtcbiAgICBvcGVuLFxuICAgIG9uT3BlbkNoYW5nZVxuICB9ID0gdDA7XG4gIGNvbnN0IGlucHV0UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB7XG4gICAgZWRpdG9yXG4gIH0gPSB1c2VDdXJyZW50RWRpdG9yKCk7XG4gIGxldCB0MTtcbiAgaWYgKCRbMF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpKSB7XG4gICAgdDEgPSAoKSA9PiB7XG4gICAgICBpbnB1dFJlZi5jdXJyZW50ICYmIGlucHV0UmVmLmN1cnJlbnQ/LmZvY3VzKCk7XG4gICAgfTtcbiAgICAkWzBdID0gdDE7XG4gIH0gZWxzZSB7XG4gICAgdDEgPSAkWzBdO1xuICB9XG4gIHVzZUVmZmVjdCh0MSk7XG4gIGlmICghZWRpdG9yKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgbGV0IHQyO1xuICBpZiAoJFsxXSAhPT0gZWRpdG9yKSB7XG4gICAgdDIgPSBjbHMoXCJ1bmRlcmxpbmUgZGVjb3JhdGlvbi1zdG9uZS00MDAgdW5kZXJsaW5lLW9mZnNldC00XCIsIHtcbiAgICAgIFwidGV4dC1ibHVlLTUwMFwiOiBlZGl0b3IuaXNBY3RpdmUoXCJsaW5rXCIpXG4gICAgfSk7XG4gICAgJFsxXSA9IGVkaXRvcjtcbiAgICAkWzJdID0gdDI7XG4gIH0gZWxzZSB7XG4gICAgdDIgPSAkWzJdO1xuICB9XG4gIGxldCB0MztcbiAgaWYgKCRbM10gIT09IHQyKSB7XG4gICAgdDMgPSAvKiBAX19QVVJFX18gKi8ganN4KEJ1dHRvbiwgeyB2YXJpYW50OiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImdhcC0yIHJvdW5kZWQtbm9uZVwiLCBjb2xvcjogXCJ0ZXh0XCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFwicFwiLCB7IGNsYXNzTmFtZTogdDIsIGNoaWxkcmVuOiBcIkxpbmtcIiB9KSB9KTtcbiAgICAkWzNdID0gdDI7XG4gICAgJFs0XSA9IHQzO1xuICB9IGVsc2Uge1xuICAgIHQzID0gJFs0XTtcbiAgfVxuICBsZXQgdDQ7XG4gIGlmICgkWzVdICE9PSBlZGl0b3IpIHtcbiAgICB0NCA9IChlKSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zdCBpbnB1dCA9IHRhcmdldFswXTtcbiAgICAgIGNvbnN0IHVybCA9IGdldFVybEZyb21TdHJpbmcoaW5wdXQudmFsdWUpO1xuICAgICAgdXJsICYmIGVkaXRvci5jaGFpbigpLmZvY3VzKCkuc2V0TGluayh7XG4gICAgICAgIGhyZWY6IHVybFxuICAgICAgfSkucnVuKCk7XG4gICAgfTtcbiAgICAkWzVdID0gZWRpdG9yO1xuICAgICRbNl0gPSB0NDtcbiAgfSBlbHNlIHtcbiAgICB0NCA9ICRbNl07XG4gIH1cbiAgbGV0IHQ1O1xuICBpZiAoJFs3XSAhPT0gZWRpdG9yKSB7XG4gICAgdDUgPSBlZGl0b3IuZ2V0QXR0cmlidXRlcyhcImxpbmtcIikuaHJlZiB8fCBcIlwiO1xuICAgICRbN10gPSBlZGl0b3I7XG4gICAgJFs4XSA9IHQ1O1xuICB9IGVsc2Uge1xuICAgIHQ1ID0gJFs4XTtcbiAgfVxuICBsZXQgdDY7XG4gIGlmICgkWzldID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSkge1xuICAgIHQ2ID0gY2xzKFwidGV4dC1zdXJmYWNlLTkwMCBkYXJrOnRleHQtd2hpdGUgZmxleC1ncm93IGJnLXRyYW5zcGFyZW50IHAtMSB0ZXh0LXNtIG91dGxpbmUtbm9uZVwiLCBmb2N1c2VkRGlzYWJsZWQpO1xuICAgICRbOV0gPSB0NjtcbiAgfSBlbHNlIHtcbiAgICB0NiA9ICRbOV07XG4gIH1cbiAgbGV0IHQ3O1xuICBpZiAoJFsxMF0gIT09IG9wZW4gfHwgJFsxMV0gIT09IHQ1KSB7XG4gICAgdDcgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiaW5wdXRcIiwgeyByZWY6IGlucHV0UmVmLCBhdXRvRm9jdXM6IG9wZW4sIHBsYWNlaG9sZGVyOiBcIlBhc3RlIGEgbGlua1wiLCBkZWZhdWx0VmFsdWU6IHQ1LCBjbGFzc05hbWU6IHQ2IH0pO1xuICAgICRbMTBdID0gb3BlbjtcbiAgICAkWzExXSA9IHQ1O1xuICAgICRbMTJdID0gdDc7XG4gIH0gZWxzZSB7XG4gICAgdDcgPSAkWzEyXTtcbiAgfVxuICBsZXQgdDg7XG4gIGlmICgkWzEzXSAhPT0gZWRpdG9yKSB7XG4gICAgdDggPSBlZGl0b3IuZ2V0QXR0cmlidXRlcyhcImxpbmtcIikuaHJlZiA/IC8qIEBfX1BVUkVfXyAqLyBqc3goQnV0dG9uLCB7IHNpemU6IFwic21hbGxcIiwgdmFyaWFudDogXCJ0ZXh0XCIsIHR5cGU6IFwiYnV0dG9uXCIsIGNvbG9yOiBcInRleHRcIiwgY2xhc3NOYW1lOiBcImZsZXggaXRlbXMtY2VudGVyXCIsIG9uQ2xpY2s6ICgpID0+IHtcbiAgICAgIGVkaXRvci5jaGFpbigpLmZvY3VzKCkudW5zZXRMaW5rKCkucnVuKCk7XG4gICAgfSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRGVsZXRlSWNvbiwgeyBzaXplOiBcInNtYWxsXCIgfSkgfSkgOiAvKiBAX19QVVJFX18gKi8ganN4KEJ1dHRvbiwgeyBzaXplOiBcInNtYWxsXCIsIHZhcmlhbnQ6IFwidGV4dFwiLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChDaGVja0ljb24sIHsgc2l6ZTogXCJzbWFsbFwiIH0pIH0pO1xuICAgICRbMTNdID0gZWRpdG9yO1xuICAgICRbMTRdID0gdDg7XG4gIH0gZWxzZSB7XG4gICAgdDggPSAkWzE0XTtcbiAgfVxuICBsZXQgdDk7XG4gIGlmICgkWzE1XSAhPT0gdDQgfHwgJFsxNl0gIT09IHQ3IHx8ICRbMTddICE9PSB0OCkge1xuICAgIHQ5ID0gLyogQF9fUFVSRV9fICovIGpzeHMoXCJmb3JtXCIsIHsgb25TdWJtaXQ6IHQ0LCBjbGFzc05hbWU6IFwiZmxleCBwLTFcIiwgY2hpbGRyZW46IFtcbiAgICAgIHQ3LFxuICAgICAgdDhcbiAgICBdIH0pO1xuICAgICRbMTVdID0gdDQ7XG4gICAgJFsxNl0gPSB0NztcbiAgICAkWzE3XSA9IHQ4O1xuICAgICRbMThdID0gdDk7XG4gIH0gZWxzZSB7XG4gICAgdDkgPSAkWzE4XTtcbiAgfVxuICBsZXQgdDEwO1xuICBpZiAoJFsxOV0gIT09IG9uT3BlbkNoYW5nZSB8fCAkWzIwXSAhPT0gb3BlbiB8fCAkWzIxXSAhPT0gdDMgfHwgJFsyMl0gIT09IHQ5KSB7XG4gICAgdDEwID0gLyogQF9fUFVSRV9fICovIGpzeChQb3BvdmVyLCB7IG1vZGFsOiB0cnVlLCBvcGVuLCBvbk9wZW5DaGFuZ2UsIHRyaWdnZXI6IHQzLCBjaGlsZHJlbjogdDkgfSk7XG4gICAgJFsxOV0gPSBvbk9wZW5DaGFuZ2U7XG4gICAgJFsyMF0gPSBvcGVuO1xuICAgICRbMjFdID0gdDM7XG4gICAgJFsyMl0gPSB0OTtcbiAgICAkWzIzXSA9IHQxMDtcbiAgfSBlbHNlIHtcbiAgICB0MTAgPSAkWzIzXTtcbiAgfVxuICByZXR1cm4gdDEwO1xufTtcbmNvbnN0IFRleHRCdXR0b25zID0gKCkgPT4ge1xuICBjb25zdCAkID0gYygyKTtcbiAgY29uc3Qge1xuICAgIGVkaXRvclxuICB9ID0gdXNlQ3VycmVudEVkaXRvcigpO1xuICBpZiAoIWVkaXRvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGxldCB0MDtcbiAgaWYgKCRbMF0gIT09IGVkaXRvcikge1xuICAgIGNvbnN0IGl0ZW1zMiA9IFt7XG4gICAgICBuYW1lOiBcImJvbGRcIixcbiAgICAgIGlzQWN0aXZlOiBfdGVtcCxcbiAgICAgIGNvbW1hbmQ6IF90ZW1wMixcbiAgICAgIGljb246IEZvcm1hdEJvbGRJY29uXG4gICAgfSwge1xuICAgICAgbmFtZTogXCJpdGFsaWNcIixcbiAgICAgIGlzQWN0aXZlOiBfdGVtcDMsXG4gICAgICBjb21tYW5kOiBfdGVtcDQsXG4gICAgICBpY29uOiBGb3JtYXRJdGFsaWNJY29uXG4gICAgfSwge1xuICAgICAgbmFtZTogXCJ1bmRlcmxpbmVcIixcbiAgICAgIGlzQWN0aXZlOiBfdGVtcDUsXG4gICAgICBjb21tYW5kOiBfdGVtcDYsXG4gICAgICBpY29uOiBGb3JtYXRVbmRlcmxpbmVkSWNvblxuICAgIH0sIHtcbiAgICAgIG5hbWU6IFwic3RyaWtlXCIsXG4gICAgICBpc0FjdGl2ZTogX3RlbXA3LFxuICAgICAgY29tbWFuZDogX3RlbXA4LFxuICAgICAgaWNvbjogRm9ybWF0U3RyaWtldGhyb3VnaEljb25cbiAgICB9LCB7XG4gICAgICBuYW1lOiBcImNvZGVcIixcbiAgICAgIGlzQWN0aXZlOiBfdGVtcDksXG4gICAgICBjb21tYW5kOiBfdGVtcDEwLFxuICAgICAgaWNvbjogQ29kZUljb25cbiAgICB9XTtcbiAgICB0MCA9IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiZmxleFwiLCBjaGlsZHJlbjogaXRlbXMyLm1hcCgoaXRlbSwgaW5kZXgpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goRWRpdG9yQnViYmxlSXRlbSwgeyBvblNlbGVjdDogKGVkaXRvcl8xMCkgPT4ge1xuICAgICAgaXRlbS5jb21tYW5kKGVkaXRvcl8xMCk7XG4gICAgfSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goQnV0dG9uLCB7IHNpemU6IFwic21hbGxcIiwgY29sb3I6IFwidGV4dFwiLCBjbGFzc05hbWU6IFwiZ2FwLTIgcm91bmRlZC1ub25lIGgtZnVsbFwiLCB2YXJpYW50OiBcInRleHRcIiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goaXRlbS5pY29uLCB7IGNsYXNzTmFtZTogY2xzKHtcbiAgICAgIFwidGV4dC1pbmhlcml0XCI6ICFpdGVtLmlzQWN0aXZlKGVkaXRvciksXG4gICAgICBcInRleHQtYmx1ZS01MDBcIjogaXRlbS5pc0FjdGl2ZShlZGl0b3IpXG4gICAgfSkgfSkgfSkgfSwgaW5kZXgpKSB9KTtcbiAgICAkWzBdID0gZWRpdG9yO1xuICAgICRbMV0gPSB0MDtcbiAgfSBlbHNlIHtcbiAgICB0MCA9ICRbMV07XG4gIH1cbiAgcmV0dXJuIHQwO1xufTtcbmZ1bmN0aW9uIF90ZW1wKGVkaXRvcl8wKSB7XG4gIHJldHVybiBlZGl0b3JfMD8uaXNBY3RpdmUoXCJib2xkXCIpID8/IGZhbHNlO1xufVxuZnVuY3Rpb24gX3RlbXAyKGVkaXRvcl8xKSB7XG4gIHJldHVybiBlZGl0b3JfMT8uY2hhaW4oKS5mb2N1cygpLnRvZ2dsZUJvbGQoKS5ydW4oKTtcbn1cbmZ1bmN0aW9uIF90ZW1wMyhlZGl0b3JfMikge1xuICByZXR1cm4gZWRpdG9yXzI/LmlzQWN0aXZlKFwiaXRhbGljXCIpID8/IGZhbHNlO1xufVxuZnVuY3Rpb24gX3RlbXA0KGVkaXRvcl8zKSB7XG4gIHJldHVybiBlZGl0b3JfMz8uY2hhaW4oKS5mb2N1cygpLnRvZ2dsZUl0YWxpYygpLnJ1bigpO1xufVxuZnVuY3Rpb24gX3RlbXA1KGVkaXRvcl80KSB7XG4gIHJldHVybiBlZGl0b3JfND8uaXNBY3RpdmUoXCJ1bmRlcmxpbmVcIikgPz8gZmFsc2U7XG59XG5mdW5jdGlvbiBfdGVtcDYoZWRpdG9yXzUpIHtcbiAgcmV0dXJuIGVkaXRvcl81Py5jaGFpbigpLmZvY3VzKCkudG9nZ2xlVW5kZXJsaW5lKCkucnVuKCk7XG59XG5mdW5jdGlvbiBfdGVtcDcoZWRpdG9yXzYpIHtcbiAgcmV0dXJuIGVkaXRvcl82Py5pc0FjdGl2ZShcInN0cmlrZVwiKSA/PyBmYWxzZTtcbn1cbmZ1bmN0aW9uIF90ZW1wOChlZGl0b3JfNykge1xuICByZXR1cm4gZWRpdG9yXzc/LmNoYWluKCkuZm9jdXMoKS50b2dnbGVTdHJpa2UoKS5ydW4oKTtcbn1cbmZ1bmN0aW9uIF90ZW1wOShlZGl0b3JfOCkge1xuICByZXR1cm4gZWRpdG9yXzg/LmlzQWN0aXZlKFwiY29kZVwiKSA/PyBmYWxzZTtcbn1cbmZ1bmN0aW9uIF90ZW1wMTAoZWRpdG9yXzkpIHtcbiAgcmV0dXJuIGVkaXRvcl85Py5jaGFpbigpLmZvY3VzKCkudG9nZ2xlQ29kZSgpLnJ1bigpO1xufVxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3Nlc0Zyb21Kc29uKGpzb25PYmopIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoanNvbk9iaikpIHtcbiAgICByZXR1cm4ganNvbk9iai5tYXAoKGl0ZW0pID0+IHJlbW92ZUNsYXNzZXNGcm9tSnNvbihpdGVtKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGpzb25PYmogPT09IFwib2JqZWN0XCIgJiYganNvbk9iaiAhPT0gbnVsbCkge1xuICAgIGlmIChqc29uT2JqLmF0dHJzICYmIHR5cGVvZiBqc29uT2JqLmF0dHJzID09PSBcIm9iamVjdFwiICYmIFwiY2xhc3NcIiBpbiBqc29uT2JqLmF0dHJzKSB7XG4gICAgICBkZWxldGUganNvbk9iai5hdHRycy5jbGFzcztcbiAgICB9XG4gICAgT2JqZWN0LmtleXMoanNvbk9iaikuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICBqc29uT2JqW2tleV0gPSByZW1vdmVDbGFzc2VzRnJvbUpzb24oanNvbk9ialtrZXldKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4ganNvbk9iajtcbn1cbmNvbnN0IGxvYWRpbmdEZWNvcmF0aW9uS2V5ID0gbmV3IFBsdWdpbktleShcImxvYWRpbmdEZWNvcmF0aW9uXCIpO1xuY29uc3QgVGV4dExvYWRpbmdEZWNvcmF0aW9uRXh0ZW5zaW9uID0gRXh0ZW5zaW9uLmNyZWF0ZSh7XG4gIG5hbWU6IFwibG9hZGluZ0RlY29yYXRpb25cIixcbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcGx1Z2luS2V5OiBsb2FkaW5nRGVjb3JhdGlvbktleVxuICAgIH07XG4gIH0sXG4gIGFkZFByb3NlTWlycm9yUGx1Z2lucygpIHtcbiAgICBjb25zdCBwbHVnaW5LZXkgPSB0aGlzLm9wdGlvbnMucGx1Z2luS2V5O1xuICAgIHJldHVybiBbbmV3IFBsdWdpbih7XG4gICAgICBrZXk6IHBsdWdpbktleSxcbiAgICAgIHN0YXRlOiB7XG4gICAgICAgIGluaXQoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlY29yYXRpb25TZXQ6IERlY29yYXRpb25TZXQuZW1wdHksXG4gICAgICAgICAgICBoYXNEZWNvcmF0aW9uOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFwcGx5KHRyLCBvbGRTdGF0ZSkge1xuICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRyLmdldE1ldGEocGx1Z2luS2V5KTtcbiAgICAgICAgICBpZiAoYWN0aW9uPy50eXBlID09PSBcImxvYWRpbmdEZWNvcmF0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgICByZW1vdmUsXG4gICAgICAgICAgICAgIGxvYWRpbmdIdG1sXG4gICAgICAgICAgICB9ID0gYWN0aW9uO1xuICAgICAgICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGRlY29yYXRpb25TZXQ6IERlY29yYXRpb25TZXQuZW1wdHksXG4gICAgICAgICAgICAgICAgaGFzRGVjb3JhdGlvbjogZmFsc2VcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlY29yYXRpb24gPSBEZWNvcmF0aW9uLndpZGdldChwb3MsICgpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcImxvYWRpbmctZGVjb3JhdGlvblwiO1xuICAgICAgICAgICAgICBpZiAobG9hZGluZ0h0bWwpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gbG9hZGluZ0h0bWw7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gXCJsb2FkaW5nLi4uXCI7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGRlY29yYXRpb25TZXQ6IERlY29yYXRpb25TZXQuZW1wdHkuYWRkKHRyLmRvYywgW2RlY29yYXRpb25dKSxcbiAgICAgICAgICAgICAgaGFzRGVjb3JhdGlvbjogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlY29yYXRpb25TZXQ6IG9sZFN0YXRlLmRlY29yYXRpb25TZXQubWFwKHRyLm1hcHBpbmcsIHRyLmRvYyksXG4gICAgICAgICAgICBoYXNEZWNvcmF0aW9uOiBvbGRTdGF0ZS5oYXNEZWNvcmF0aW9uXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByb3BzOiB7XG4gICAgICAgIGRlY29yYXRpb25zKHN0YXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RhdGUoc3RhdGUpPy5kZWNvcmF0aW9uU2V0IHx8IERlY29yYXRpb25TZXQuZW1wdHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KV07XG4gIH0sXG4gIGFkZENvbW1hbmRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0b2dnbGVMb2FkaW5nRGVjb3JhdGlvbjogKGxvYWRpbmdIdG1sKSA9PiAoe1xuICAgICAgICBzdGF0ZSxcbiAgICAgICAgZGlzcGF0Y2hcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHNlbGVjdGlvblxuICAgICAgICB9ID0gc3RhdGU7XG4gICAgICAgIGNvbnN0IHBvcyA9IHNlbGVjdGlvbi5mcm9tO1xuICAgICAgICBpZiAoIWRpc3BhdGNoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IHBsdWdpbktleSA9IHRoaXMub3B0aW9ucy5wbHVnaW5LZXk7XG4gICAgICAgIGNvbnN0IHRyID0gc3RhdGUudHIuc2V0TWV0YShwbHVnaW5LZXksIHtcbiAgICAgICAgICBwb3MsXG4gICAgICAgICAgdHlwZTogXCJsb2FkaW5nRGVjb3JhdGlvblwiLFxuICAgICAgICAgIHJlbW92ZTogZmFsc2UsXG4gICAgICAgICAgbG9hZGluZ0h0bWxcbiAgICAgICAgfSk7XG4gICAgICAgIGRpc3BhdGNoKHRyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9LFxuICAgICAgcmVtb3ZlTG9hZGluZ0RlY29yYXRpb246ICgpID0+ICh7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBkaXNwYXRjaFxuICAgICAgfSkgPT4ge1xuICAgICAgICBpZiAoIWRpc3BhdGNoKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IHBsdWdpbktleSA9IHRoaXMub3B0aW9ucy5wbHVnaW5LZXk7XG4gICAgICAgIGNvbnN0IHRyID0gc3RhdGUudHIuc2V0TWV0YShwbHVnaW5LZXksIHtcbiAgICAgICAgICBwb3M6IDAsXG4gICAgICAgICAgLy8gV2UgY2FuIHBhc3MgYW55IHBvc2l0aW9uIGFzIGl0IHdpbGwgcmVtb3ZlIHRoZSBlbnRpcmUgZGVjb3JhdGlvbiBzZXRcbiAgICAgICAgICB0eXBlOiBcImxvYWRpbmdEZWNvcmF0aW9uXCIsXG4gICAgICAgICAgcmVtb3ZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBkaXNwYXRjaCh0cik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn0pO1xuY29uc3QgUGxhY2Vob2xkZXJFeHRlbnNpb24gPSBQbGFjZWhvbGRlci5jb25maWd1cmUoe1xuICBwbGFjZWhvbGRlcjogKHtcbiAgICBub2RlLFxuICAgIGVkaXRvclxuICB9KSA9PiB7XG4gICAgZWRpdG9yLnN0YXRlLnNlbGVjdGlvbjtcbiAgICBmdW5jdGlvbiBoYXNMb2FkaW5nRGVjb3JhdGlvbihlZGl0b3IyKSB7XG4gICAgICBjb25zdCBwbHVnaW5TdGF0ZSA9IGxvYWRpbmdEZWNvcmF0aW9uS2V5LmdldChlZGl0b3IyLnN0YXRlKTtcbiAgICAgIHJldHVybiBwbHVnaW5TdGF0ZT8uZ2V0U3RhdGUoZWRpdG9yMi5zdGF0ZSk/Lmhhc0RlY29yYXRpb24gPz8gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGhhc0RlY29yYXRpb24gPSBoYXNMb2FkaW5nRGVjb3JhdGlvbihlZGl0b3IpO1xuICAgIGlmIChoYXNEZWNvcmF0aW9uKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgaWYgKG5vZGUudHlwZS5uYW1lID09PSBcImhlYWRpbmdcIikge1xuICAgICAgcmV0dXJuIGBIZWFkaW5nICR7bm9kZS5hdHRycy5sZXZlbH1gO1xuICAgIH1cbiAgICBpZiAobm9kZS50eXBlLm5hbWUgPT09IFwicGFyYWdyYXBoXCIpIHtcbiAgICAgIHJldHVybiBcIlByZXNzICcvJyBmb3IgY29tbWFuZHNcIjtcbiAgICB9XG4gICAgcmV0dXJuIFwiXCI7XG4gIH0sXG4gIGluY2x1ZGVDaGlsZHJlbjogdHJ1ZVxufSk7XG5jb25zdCBIb3Jpem9udGFsID0gSG9yaXpvbnRhbFJ1bGUuZXh0ZW5kKHtcbiAgYWRkSW5wdXRSdWxlcygpIHtcbiAgICByZXR1cm4gW25ldyBJbnB1dFJ1bGUoe1xuICAgICAgZmluZDogL14oPzotLS184oCULXxfX19cXHN8XFwqXFwqXFwqXFxzKSQvLFxuICAgICAgaGFuZGxlcjogKHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJhbmdlXG4gICAgICB9KSA9PiB7XG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHRyXG4gICAgICAgIH0gPSBzdGF0ZTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSByYW5nZS5mcm9tO1xuICAgICAgICBjb25zdCBlbmQgPSByYW5nZS50bztcbiAgICAgICAgdHIuaW5zZXJ0KHN0YXJ0IC0gMSwgdGhpcy50eXBlLmNyZWF0ZShhdHRyaWJ1dGVzKSkuZGVsZXRlKHRyLm1hcHBpbmcubWFwKHN0YXJ0KSwgdHIubWFwcGluZy5tYXAoZW5kKSk7XG4gICAgICB9XG4gICAgfSldO1xuICB9XG59KTtcbmNvbnN0IHBsYWNlaG9sZGVyID0gUGxhY2Vob2xkZXJFeHRlbnNpb247XG5jb25zdCB0aXB0YXBMaW5rID0gVGlwdGFwTGluay5jb25maWd1cmUoe1xuICBIVE1MQXR0cmlidXRlczoge1xuICAgIGNsYXNzOiBjbHMoXCJ0ZXh0LXN1cmZhY2UtNzAwIGRhcms6dGV4dC1zdXJmYWNlLWFjY2VudC0yMDAgdW5kZXJsaW5lIHVuZGVybGluZS1vZmZzZXQtWzNweF0gaG92ZXI6dGV4dC1wcmltYXJ5IHRyYW5zaXRpb24tY29sb3JzIGN1cnNvci1wb2ludGVyXCIpXG4gIH1cbn0pO1xuY29uc3QgdGFza0xpc3QgPSBUYXNrTGlzdC5jb25maWd1cmUoe1xuICBIVE1MQXR0cmlidXRlczoge1xuICAgIGNsYXNzOiBjbHMoXCJub3QtcHJvc2VcIilcbiAgfVxufSk7XG5jb25zdCB0YXNrSXRlbSA9IFRhc2tJdGVtLmNvbmZpZ3VyZSh7XG4gIEhUTUxBdHRyaWJ1dGVzOiB7XG4gICAgY2xhc3M6IGNscyhcImZsZXggaXRlbXMtc3RhcnQgbXktNFwiKVxuICB9LFxuICBuZXN0ZWQ6IHRydWVcbn0pO1xuY29uc3QgaG9yaXpvbnRhbFJ1bGUgPSBIb3Jpem9udGFsLmNvbmZpZ3VyZSh7XG4gIEhUTUxBdHRyaWJ1dGVzOiB7XG4gICAgY2xhc3M6IGNscyhcIm10LTQgbWItNiBib3JkZXItdFwiLCBkZWZhdWx0Qm9yZGVyTWl4aW4pXG4gIH1cbn0pO1xuY29uc3QgYnVsbGV0TGlzdCA9IEJ1bGxldExpc3QuY29uZmlndXJlKHtcbiAgSFRNTEF0dHJpYnV0ZXM6IHtcbiAgICBjbGFzczogY2xzKFwibGlzdC1kaXNjIGxpc3Qtb3V0c2lkZSBsZWFkaW5nLTMgLW10LTJcIilcbiAgfVxufSk7XG5jb25zdCBvcmRlcmVkTGlzdCA9IE9yZGVyZWRMaXN0LmNvbmZpZ3VyZSh7XG4gIEhUTUxBdHRyaWJ1dGVzOiB7XG4gICAgY2xhc3M6IGNscyhcImxpc3QtZGVjaW1hbCBsaXN0LW91dHNpZGUgbGVhZGluZy0zIC1tdC0yXCIpXG4gIH1cbn0pO1xuY29uc3QgbGlzdEl0ZW0gPSBMaXN0SXRlbS5jb25maWd1cmUoe1xuICBIVE1MQXR0cmlidXRlczoge1xuICAgIGNsYXNzOiBjbHMoXCJsZWFkaW5nLW5vcm1hbCAtbWItMlwiKVxuICB9XG59KTtcbmNvbnN0IGJsb2NrcXVvdGUgPSBCbG9ja3F1b3RlLmNvbmZpZ3VyZSh7XG4gIEhUTUxBdHRyaWJ1dGVzOiB7XG4gICAgY2xhc3M6IGNscyhcImJvcmRlci1sLTQgYm9yZGVyLXByaW1hcnlcIilcbiAgfVxufSk7XG5jb25zdCBjb2RlQmxvY2sgPSBDb2RlQmxvY2suY29uZmlndXJlKHtcbiAgSFRNTEF0dHJpYnV0ZXM6IHtcbiAgICBjbGFzczogY2xzKFwicm91bmRlZCBiZy1ibHVlLTUwIGRhcms6Ymctc3VyZmFjZS03MDAgYm9yZGVyIHAtNSBmb250LW1vbm8gZm9udC1tZWRpdW1cIiwgZGVmYXVsdEJvcmRlck1peGluKVxuICB9XG59KTtcbmNvbnN0IGNvZGUgPSBDb2RlLmNvbmZpZ3VyZSh7XG4gIEhUTUxBdHRyaWJ1dGVzOiB7XG4gICAgY2xhc3M6IGNscyhcInJvdW5kZWQtbWQgYmctc3VyZmFjZS1hY2NlbnQtNTAgZGFyazpiZy1zdXJmYWNlLTcwMCBweC0xLjUgcHktMSBmb250LW1vbm8gZm9udC1tZWRpdW1cIiksXG4gICAgc3BlbGxjaGVjazogXCJmYWxzZVwiXG4gIH1cbn0pO1xuY29uc3Qgc3RhcnRlcktpdCA9IFN0YXJ0ZXJLaXQuY29uZmlndXJlKHtcbiAgZG9jdW1lbnQ6IGZhbHNlLFxuICBob3Jpem9udGFsUnVsZTogZmFsc2UsXG4gIGRyb3BjdXJzb3I6IHtcbiAgICBjb2xvcjogXCIjREJFQUZFXCIsXG4gICAgd2lkdGg6IDRcbiAgfSxcbiAgZ2FwY3Vyc29yOiBmYWxzZVxufSk7XG5hc3luYyBmdW5jdGlvbiBvbkZpbGVSZWFkKHZpZXcsIHJlYWRlckV2ZW50LCBwb3MsIHVwbG9hZCwgaW1hZ2UpIHtcbiAgY29uc3Qge1xuICAgIHNjaGVtYVxuICB9ID0gdmlldy5zdGF0ZTtcbiAgY29uc3QgcGx1Z2luID0gdmlldy5zdGF0ZS5wbHVnaW5zLmZpbmQoKHApID0+IHAua2V5ID09PSBJbWFnZVBsdWdpbktleS5rZXkpO1xuICBpZiAoIXBsdWdpbikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJJbWFnZSBwbHVnaW4gbm90IGZvdW5kXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgZGVjb3JhdGlvblNldCA9IHBsdWdpbi5nZXRTdGF0ZSh2aWV3LnN0YXRlKTtcbiAgY29uc3QgcGxhY2Vob2xkZXIyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29uc3QgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgaW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwib3BhY2l0eS00MCByb3VuZGVkLWxnIGJvcmRlciBcIiArIGRlZmF1bHRCb3JkZXJNaXhpbik7XG4gIGltYWdlRWxlbWVudC5zcmMgPSByZWFkZXJFdmVudC50YXJnZXQ/LnJlc3VsdDtcbiAgcGxhY2Vob2xkZXIyLmFwcGVuZENoaWxkKGltYWdlRWxlbWVudCk7XG4gIGNvbnN0IGRlY28gPSBEZWNvcmF0aW9uJDEud2lkZ2V0KHBvcywgcGxhY2Vob2xkZXIyKTtcbiAgZGVjb3JhdGlvblNldCA9IGRlY29yYXRpb25TZXQ/LmFkZCh2aWV3LnN0YXRlLmRvYywgW2RlY29dKTtcbiAgdmlldy5kaXNwYXRjaCh2aWV3LnN0YXRlLnRyLnNldE1ldGEocGx1Z2luLCB7XG4gICAgZGVjb3JhdGlvblNldFxuICB9KSk7XG4gIGNvbnN0IHNyYyA9IGF3YWl0IHVwbG9hZChpbWFnZSk7XG4gIGNvbnNvbGUuZGVidWcoXCJVcGxvYWRlZCBpbWFnZVwiLCBzcmMpO1xuICBjb25zdCBpbWFnZU5vZGUgPSBzY2hlbWEubm9kZXMuaW1hZ2UuY3JlYXRlKHtcbiAgICBzcmNcbiAgfSk7XG4gIGNvbnN0IHRyID0gdmlldy5zdGF0ZS50ci5yZXBsYWNlV2l0aChwb3MsIHBvcywgaW1hZ2VOb2RlKTtcbiAgZGVjb3JhdGlvblNldCA9IGRlY29yYXRpb25TZXQ/LnJlbW92ZShbZGVjb10pO1xuICB0ci5zZXRNZXRhKHBsdWdpbiwge1xuICAgIGRlY29yYXRpb25TZXRcbiAgfSk7XG4gIHZpZXcuZGlzcGF0Y2godHIpO1xufVxuY29uc3QgSW1hZ2VQbHVnaW5LZXkgPSBuZXcgUGx1Z2luS2V5JDEoXCJpbWFnZVBsdWdpblwiKTtcbmNvbnN0IGNyZWF0ZURyb3BJbWFnZVBsdWdpbiA9ICh1cGxvYWQpID0+IHtcbiAgY29uc3QgcGx1Z2luID0gbmV3IFBsdWdpbiQxKHtcbiAgICBrZXk6IEltYWdlUGx1Z2luS2V5LFxuICAgIHN0YXRlOiB7XG4gICAgICAvLyBJbml0aWFsaXplIHRoZSBwbHVnaW4gc3RhdGUgd2l0aCBhbiBlbXB0eSBEZWNvcmF0aW9uU2V0XG4gICAgICBpbml0OiAoKSA9PiBEZWNvcmF0aW9uU2V0JDEuZW1wdHksXG4gICAgICAvLyBBcHBseSB0cmFuc2FjdGlvbnMgdG8gdXBkYXRlIHRoZSBzdGF0ZVxuICAgICAgYXBwbHk6ICh0ciwgb2xkKSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGEgPSB0ci5nZXRNZXRhKHBsdWdpbik7XG4gICAgICAgIGlmIChtZXRhICYmIG1ldGEuZGVjb3JhdGlvblNldCkge1xuICAgICAgICAgIHJldHVybiBtZXRhLmRlY29yYXRpb25TZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9sZC5tYXAodHIubWFwcGluZywgdHIuZG9jKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHByb3BzOiB7XG4gICAgICBoYW5kbGVET01FdmVudHM6IHtcbiAgICAgICAgZHJvcDogKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXI/LmZpbGVzIHx8IGV2ZW50LmRhdGFUcmFuc2Zlcj8uZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcyk7XG4gICAgICAgICAgY29uc3QgaW1hZ2VzID0gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiAvaW1hZ2UvaS50ZXN0KGZpbGUudHlwZSkpO1xuICAgICAgICAgIGlmIChpbWFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGltYWdlcyBmb3VuZCBpbiBkcm9wcGVkIGZpbGVzXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbWFnZXMuZm9yRWFjaCgoaW1hZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdmlldy5wb3NBdENvb3Jkcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGV2ZW50LmNsaWVudFgsXG4gICAgICAgICAgICAgIHRvcDogZXZlbnQuY2xpZW50WVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIXBvc2l0aW9uKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGFzeW5jIChyZWFkZXJFdmVudCkgPT4ge1xuICAgICAgICAgICAgICBhd2FpdCBvbkZpbGVSZWFkKHZpZXcsIHJlYWRlckV2ZW50LCBwb3NpdGlvbi5wb3MsIHVwbG9hZCwgaW1hZ2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhhbmRsZVBhc3RlKHZpZXcsIGV2ZW50LCBzbGljZSkge1xuICAgICAgICBjb25zdCBpdGVtczIgPSBBcnJheS5mcm9tKGV2ZW50LmNsaXBib2FyZERhdGE/Lml0ZW1zIHx8IFtdKTtcbiAgICAgICAgY29uc3QgcG9zID0gdmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbTtcbiAgICAgICAgbGV0IGFueUltYWdlRm91bmQgPSBmYWxzZTtcbiAgICAgICAgaXRlbXMyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICBjb25zdCBpbWFnZSA9IGl0ZW0uZ2V0QXNGaWxlKCk7XG4gICAgICAgICAgaWYgKGltYWdlKSB7XG4gICAgICAgICAgICBhbnlJbWFnZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICByZWFkZXIub25sb2FkID0gYXN5bmMgKHJlYWRlckV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGF3YWl0IG9uRmlsZVJlYWQodmlldywgcmVhZGVyRXZlbnQsIHBvcywgdXBsb2FkLCBpbWFnZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbnlJbWFnZUZvdW5kO1xuICAgICAgfSxcbiAgICAgIGRlY29yYXRpb25zKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW4uZ2V0U3RhdGUoc3RhdGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgdmlldyhlZGl0b3JWaWV3KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1cGRhdGUodmlldywgcHJldlN0YXRlKSB7XG4gICAgICAgICAgY29uc3QgcHJldkRlY29zID0gcGx1Z2luLmdldFN0YXRlKHByZXZTdGF0ZSk7XG4gICAgICAgICAgY29uc3QgbmV3RGVjb3MgPSBwbHVnaW4uZ2V0U3RhdGUodmlldy5zdGF0ZSk7XG4gICAgICAgICAgaWYgKHByZXZEZWNvcyAhPT0gbmV3RGVjb3MpIHtcbiAgICAgICAgICAgIHZpZXcudXBkYXRlU3RhdGUodmlldy5zdGF0ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwbHVnaW47XG59O1xuY29uc3QgY3JlYXRlSW1hZ2VFeHRlbnNpb24gPSAoZHJvcEltYWdlUGx1Z2luKSA9PiB7XG4gIHJldHVybiBUaXB0YXBJbWFnZS5leHRlbmQoe1xuICAgIGFkZFByb3NlTWlycm9yUGx1Z2lucygpIHtcbiAgICAgIHJldHVybiBbZHJvcEltYWdlUGx1Z2luXTtcbiAgICB9XG4gIH0pLmNvbmZpZ3VyZSh7XG4gICAgYWxsb3dCYXNlNjQ6IHRydWUsXG4gICAgSFRNTEF0dHJpYnV0ZXM6IHtcbiAgICAgIGNsYXNzOiBjbHMoXCJyb3VuZGVkLWxnIGJvcmRlclwiLCBkZWZhdWx0Qm9yZGVyTWl4aW4pXG4gICAgfVxuICB9KTtcbn07XG5jb25zdCBDdXN0b21LZXltYXAgPSBFeHRlbnNpb24uY3JlYXRlKHtcbiAgbmFtZTogXCJDdXN0b21LZXltYXBcIixcbiAgYWRkQ29tbWFuZHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlbGVjdFRleHRXaXRoaW5Ob2RlQm91bmRhcmllczogKCkgPT4gKHtcbiAgICAgICAgZWRpdG9yLFxuICAgICAgICBjb21tYW5kc1xuICAgICAgfSkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgc3RhdGVcbiAgICAgICAgfSA9IGVkaXRvcjtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHRyXG4gICAgICAgIH0gPSBzdGF0ZTtcbiAgICAgICAgY29uc3Qgc3RhcnROb2RlUG9zID0gdHIuc2VsZWN0aW9uLiRmcm9tLnN0YXJ0KCk7XG4gICAgICAgIGNvbnN0IGVuZE5vZGVQb3MgPSB0ci5zZWxlY3Rpb24uJHRvLmVuZCgpO1xuICAgICAgICByZXR1cm4gY29tbWFuZHMuc2V0VGV4dFNlbGVjdGlvbih7XG4gICAgICAgICAgZnJvbTogc3RhcnROb2RlUG9zLFxuICAgICAgICAgIHRvOiBlbmROb2RlUG9zXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0sXG4gIGFkZEtleWJvYXJkU2hvcnRjdXRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBcIk1vZC1hXCI6ICh7XG4gICAgICAgIGVkaXRvclxuICAgICAgfSkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgc3RhdGVcbiAgICAgICAgfSA9IGVkaXRvcjtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHRyXG4gICAgICAgIH0gPSBzdGF0ZTtcbiAgICAgICAgY29uc3Qgc3RhcnRTZWxlY3Rpb25Qb3MgPSB0ci5zZWxlY3Rpb24uZnJvbTtcbiAgICAgICAgY29uc3QgZW5kU2VsZWN0aW9uUG9zID0gdHIuc2VsZWN0aW9uLnRvO1xuICAgICAgICBjb25zdCBzdGFydE5vZGVQb3MgPSB0ci5zZWxlY3Rpb24uJGZyb20uc3RhcnQoKTtcbiAgICAgICAgY29uc3QgZW5kTm9kZVBvcyA9IHRyLnNlbGVjdGlvbi4kdG8uZW5kKCk7XG4gICAgICAgIGNvbnN0IGlzQ3VycmVudFRleHRTZWxlY3Rpb25Ob3RFeHRlbmRlZFRvTm9kZUJvdW5kYXJpZXMgPSBzdGFydFNlbGVjdGlvblBvcyA+IHN0YXJ0Tm9kZVBvcyB8fCBlbmRTZWxlY3Rpb25Qb3MgPCBlbmROb2RlUG9zO1xuICAgICAgICBpZiAoaXNDdXJyZW50VGV4dFNlbGVjdGlvbk5vdEV4dGVuZGVkVG9Ob2RlQm91bmRhcmllcykge1xuICAgICAgICAgIGVkaXRvci5jaGFpbigpLnNlbGVjdFRleHRXaXRoaW5Ob2RlQm91bmRhcmllcygpLnJ1bigpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcbmZ1bmN0aW9uIGFic29sdXRlUmVjdChlbGVtZW50KSB7XG4gIGNvbnN0IGRhdGEgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBsZXQgYW5jZXN0b3IgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIHdoaWxlIChhbmNlc3RvciAmJiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShhbmNlc3RvcikucG9zaXRpb24gPT09IFwic3RhdGljXCIpIHtcbiAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudEVsZW1lbnQ7XG4gIH1cbiAgY29uc3QgYW5jZXN0b3JSZWN0ID0gYW5jZXN0b3I/LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIHRvcDogZGF0YS50b3AgLSAoYW5jZXN0b3JSZWN0Py50b3AgPz8gMCksXG4gICAgbGVmdDogZGF0YS5sZWZ0IC0gKGFuY2VzdG9yUmVjdD8ubGVmdCA/PyAwKSxcbiAgICB3aWR0aDogZGF0YS53aWR0aFxuICB9O1xufVxuZnVuY3Rpb24gbm9kZURPTUF0Q29vcmRzKGNvb3Jkcykge1xuICByZXR1cm4gZG9jdW1lbnQuZWxlbWVudHNGcm9tUG9pbnQoY29vcmRzLngsIGNvb3Jkcy55KS5maW5kKChlbGVtKSA9PiBlbGVtLnBhcmVudEVsZW1lbnQ/Lm1hdGNoZXM/LihcIi5Qcm9zZU1pcnJvclwiKSB8fCBlbGVtLm1hdGNoZXMoW1wibGlcIiwgXCJwOm5vdCg6Zmlyc3QtY2hpbGQpXCIsIFwicHJlXCIsIFwiYmxvY2txdW90ZVwiLCBcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIl0uam9pbihcIiwgXCIpKSk7XG59XG5mdW5jdGlvbiBub2RlUG9zQXRET00obm9kZSwgdmlldywgb3B0aW9ucykge1xuICBjb25zdCBib3VuZGluZ1JlY3QgPSBub2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4gdmlldy5wb3NBdENvb3Jkcyh7XG4gICAgbGVmdDogYm91bmRpbmdSZWN0LmxlZnQgKyA1MCArIG9wdGlvbnMuZHJhZ0hhbmRsZVdpZHRoLFxuICAgIHRvcDogYm91bmRpbmdSZWN0LnRvcCArIDFcbiAgfSk/Lmluc2lkZTtcbn1cbmZ1bmN0aW9uIERyYWdIYW5kbGUob3B0aW9ucykge1xuICBmdW5jdGlvbiBoYW5kbGVEcmFnU3RhcnQoZXZlbnQsIHZpZXcpIHtcbiAgICB2aWV3LmZvY3VzKCk7XG4gICAgaWYgKCFldmVudC5kYXRhVHJhbnNmZXIpIHJldHVybjtcbiAgICBjb25zdCBub2RlID0gbm9kZURPTUF0Q29vcmRzKHtcbiAgICAgIHg6IGV2ZW50LmNsaWVudFggKyA1MCArIG9wdGlvbnMuZHJhZ0hhbmRsZVdpZHRoLFxuICAgICAgeTogZXZlbnQuY2xpZW50WVxuICAgIH0pO1xuICAgIGlmICghKG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuO1xuICAgIGNvbnN0IG5vZGVQb3MgPSBub2RlUG9zQXRET00obm9kZSwgdmlldywgb3B0aW9ucyk7XG4gICAgaWYgKG5vZGVQb3MgPT0gbnVsbCB8fCBub2RlUG9zIDwgMCkgcmV0dXJuO1xuICAgIHZpZXcuZGlzcGF0Y2godmlldy5zdGF0ZS50ci5zZXRTZWxlY3Rpb24oTm9kZVNlbGVjdGlvbi5jcmVhdGUodmlldy5zdGF0ZS5kb2MsIG5vZGVQb3MpKSk7XG4gICAgY29uc3Qgc2xpY2UgPSB2aWV3LnN0YXRlLnNlbGVjdGlvbi5jb250ZW50KCk7XG4gICAgY29uc3Qge1xuICAgICAgZG9tLFxuICAgICAgdGV4dFxuICAgIH0gPSBfX3NlcmlhbGl6ZUZvckNsaXBib2FyZCh2aWV3LCBzbGljZSk7XG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLmNsZWFyRGF0YSgpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9odG1sXCIsIGRvbS5pbm5lckhUTUwpO1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9wbGFpblwiLCB0ZXh0KTtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwiY29weU1vdmVcIjtcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKG5vZGUsIDAsIDApO1xuICAgIHZpZXcuZHJhZ2dpbmcgPSB7XG4gICAgICBzbGljZSxcbiAgICAgIG1vdmU6IGV2ZW50LmN0cmxLZXlcbiAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKGV2ZW50LCB2aWV3KSB7XG4gICAgdmlldy5mb2N1cygpO1xuICAgIHZpZXcuZG9tLmNsYXNzTGlzdC5yZW1vdmUoXCJkcmFnZ2luZ1wiKTtcbiAgICBjb25zdCBub2RlID0gbm9kZURPTUF0Q29vcmRzKHtcbiAgICAgIHg6IGV2ZW50LmNsaWVudFggKyA1MCArIG9wdGlvbnMuZHJhZ0hhbmRsZVdpZHRoLFxuICAgICAgeTogZXZlbnQuY2xpZW50WVxuICAgIH0pO1xuICAgIGlmICghKG5vZGUgaW5zdGFuY2VvZiBFbGVtZW50KSkgcmV0dXJuO1xuICAgIGNvbnN0IG5vZGVQb3MgPSBub2RlUG9zQXRET00obm9kZSwgdmlldywgb3B0aW9ucyk7XG4gICAgaWYgKCFub2RlUG9zKSByZXR1cm47XG4gICAgdmlldy5kaXNwYXRjaCh2aWV3LnN0YXRlLnRyLnNldFNlbGVjdGlvbihOb2RlU2VsZWN0aW9uLmNyZWF0ZSh2aWV3LnN0YXRlLmRvYywgbm9kZVBvcykpKTtcbiAgfVxuICBsZXQgZHJhZ0hhbmRsZUVsZW1lbnQgPSBudWxsO1xuICBmdW5jdGlvbiBoaWRlRHJhZ0hhbmRsZSgpIHtcbiAgICBpZiAoZHJhZ0hhbmRsZUVsZW1lbnQpIHtcbiAgICAgIGRyYWdIYW5kbGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzaG93RHJhZ0hhbmRsZSgpIHtcbiAgICBpZiAoZHJhZ0hhbmRsZUVsZW1lbnQpIHtcbiAgICAgIGRyYWdIYW5kbGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3IFBsdWdpbiQxKHtcbiAgICB2aWV3OiAodmlldykgPT4ge1xuICAgICAgZHJhZ0hhbmRsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgZHJhZ0hhbmRsZUVsZW1lbnQuZHJhZ2dhYmxlID0gdHJ1ZTtcbiAgICAgIGRyYWdIYW5kbGVFbGVtZW50LmRhdGFzZXQuZHJhZ0hhbmRsZSA9IFwiXCI7XG4gICAgICBkcmFnSGFuZGxlRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZHJhZy1oYW5kbGVcIik7XG4gICAgICBkcmFnSGFuZGxlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIChlKSA9PiB7XG4gICAgICAgIGhhbmRsZURyYWdTdGFydChlLCB2aWV3KTtcbiAgICAgIH0pO1xuICAgICAgZHJhZ0hhbmRsZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGhhbmRsZUNsaWNrKGUsIHZpZXcpO1xuICAgICAgfSk7XG4gICAgICBoaWRlRHJhZ0hhbmRsZSgpO1xuICAgICAgdmlldz8uZG9tPy5wYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZChkcmFnSGFuZGxlRWxlbWVudCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZXN0cm95OiAoKSA9PiB7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBwcm9wczoge1xuICAgICAgaGFuZGxlRE9NRXZlbnRzOiB7XG4gICAgICAgIG1vdXNlbW92ZTogKHZpZXcsIGV2ZW50KSA9PiB7XG4gICAgICAgICAgaWYgKCF2aWV3LmVkaXRhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5vZGUgPSBub2RlRE9NQXRDb29yZHMoe1xuICAgICAgICAgICAgeDogZXZlbnQuY2xpZW50WCArIDUwICsgb3B0aW9ucy5kcmFnSGFuZGxlV2lkdGgsXG4gICAgICAgICAgICB5OiBldmVudC5jbGllbnRZXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKCEobm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG4gICAgICAgICAgICBoaWRlRHJhZ0hhbmRsZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjb21wU3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShub2RlKTtcbiAgICAgICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gcGFyc2VJbnQoY29tcFN0eWxlLmxpbmVIZWlnaHQsIDEwKTtcbiAgICAgICAgICBjb25zdCBwYWRkaW5nVG9wID0gcGFyc2VJbnQoY29tcFN0eWxlLnBhZGRpbmdUb3AsIDEwKTtcbiAgICAgICAgICBjb25zdCByZWN0ID0gYWJzb2x1dGVSZWN0KG5vZGUpO1xuICAgICAgICAgIHJlY3QudG9wICs9IChsaW5lSGVpZ2h0IC0gMjQpIC8gMjtcbiAgICAgICAgICByZWN0LnRvcCArPSBwYWRkaW5nVG9wO1xuICAgICAgICAgIGlmIChub2RlLm1hdGNoZXMoXCJ1bDpub3QoW2RhdGEtdHlwZT10YXNrTGlzdF0pIGxpLCBvbCBsaVwiKSkge1xuICAgICAgICAgICAgcmVjdC5sZWZ0IC09IG9wdGlvbnMuZHJhZ0hhbmRsZVdpZHRoO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZWN0LndpZHRoID0gb3B0aW9ucy5kcmFnSGFuZGxlV2lkdGg7XG4gICAgICAgICAgaWYgKCFkcmFnSGFuZGxlRWxlbWVudCkgcmV0dXJuO1xuICAgICAgICAgIGRyYWdIYW5kbGVFbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtyZWN0LmxlZnQgLSByZWN0LndpZHRofXB4YDtcbiAgICAgICAgICBkcmFnSGFuZGxlRWxlbWVudC5zdHlsZS50b3AgPSBgJHtyZWN0LnRvcH1weGA7XG4gICAgICAgICAgc2hvd0RyYWdIYW5kbGUoKTtcbiAgICAgICAgfSxcbiAgICAgICAga2V5ZG93bjogKCkgPT4ge1xuICAgICAgICAgIGhpZGVEcmFnSGFuZGxlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1vdXNld2hlZWw6ICgpID0+IHtcbiAgICAgICAgICBoaWRlRHJhZ0hhbmRsZSgpO1xuICAgICAgICB9LFxuICAgICAgICAvLyBkcmFnZ2luZyBjbGFzcyBpcyB1c2VkIGZvciBDU1NcbiAgICAgICAgZHJhZ3N0YXJ0OiAodmlldykgPT4ge1xuICAgICAgICAgIHZpZXcuZG9tLmNsYXNzTGlzdC5hZGQoXCJkcmFnZ2luZ1wiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZHJvcDogKHZpZXcpID0+IHtcbiAgICAgICAgICB2aWV3LmRvbS5jbGFzc0xpc3QucmVtb3ZlKFwiZHJhZ2dpbmdcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGRyYWdlbmQ6ICh2aWV3KSA9PiB7XG4gICAgICAgICAgdmlldy5kb20uY2xhc3NMaXN0LnJlbW92ZShcImRyYWdnaW5nXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn1cbmNvbnN0IERyYWdBbmREcm9wID0gRXh0ZW5zaW9uLmNyZWF0ZSh7XG4gIG5hbWU6IFwiZHJhZ0FuZERyb3BcIixcbiAgYWRkUHJvc2VNaXJyb3JQbHVnaW5zKCkge1xuICAgIHJldHVybiBbRHJhZ0hhbmRsZSh7XG4gICAgICBkcmFnSGFuZGxlV2lkdGg6IDI0XG4gICAgfSldO1xuICB9XG59KTtcbmZ1bmN0aW9uIGJ1aWxkRGVjb3JhdGlvblNldChoaWdobGlnaHQsIGRvYykge1xuICBjb25zdCBkZWNvcmF0aW9ucyA9IFtdO1xuICBpZiAoaGlnaGxpZ2h0KSB7XG4gICAgZGVjb3JhdGlvbnMucHVzaChEZWNvcmF0aW9uJDEuaW5saW5lKGhpZ2hsaWdodC5mcm9tLCBoaWdobGlnaHQudG8sIHtcbiAgICAgIGNsYXNzOiBcImRhcms6Ymctc3VyZmFjZS1hY2NlbnQtNzAwIGJnLXN1cmZhY2UtYWNjZW50LTMwMFwiXG4gICAgfSkpO1xuICB9XG4gIGNvbnN0IGRlY29yYXRpb25TZXQgPSBEZWNvcmF0aW9uU2V0JDEuY3JlYXRlKGRvYywgZGVjb3JhdGlvbnMpO1xuICByZXR1cm4gZGVjb3JhdGlvblNldDtcbn1cbmNvbnN0IEhpZ2hsaWdodERlY29yYXRpb25FeHRlbnNpb24gPSAoaW5pdGlhbEhpZ2hsaWdodCkgPT4gRXh0ZW5zaW9uLmNyZWF0ZSh7XG4gIG5hbWU6IFwiaGlnaGxpZ2h0RGVjb3JhdGlvblwiLFxuICBhZGRPcHRpb25zKCkge1xuICAgIHJldHVybiB7XG4gICAgICBwbHVnaW5LZXk6IG5ldyBQbHVnaW5LZXkkMShcImhpZ2hsaWdodERlY29yYXRpb25cIiksXG4gICAgICBoaWdobGlnaHQ6IGluaXRpYWxIaWdobGlnaHRcbiAgICB9O1xuICB9LFxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgY29uc3QgcGx1Z2luS2V5ID0gdGhpcy5vcHRpb25zLnBsdWdpbktleTtcbiAgICByZXR1cm4gW25ldyBQbHVnaW4kMSh7XG4gICAgICBrZXk6IHBsdWdpbktleSxcbiAgICAgIHN0YXRlOiB7XG4gICAgICAgIGluaXQ6IChfLCB7XG4gICAgICAgICAgZG9jXG4gICAgICAgIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBoaWdobGlnaHQgPSB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0O1xuICAgICAgICAgIGNvbnN0IGRlY29yYXRpb25TZXQgPSBoaWdobGlnaHQgJiYgZG9jID8gYnVpbGREZWNvcmF0aW9uU2V0KGhpZ2hsaWdodCwgZG9jKSA6IERlY29yYXRpb25TZXQkMS5lbXB0eTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGVjb3JhdGlvblNldCxcbiAgICAgICAgICAgIGhpZ2hsaWdodFxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFwcGx5KHRyYW5zYWN0aW9uLCBvbGRTdGF0ZSkge1xuICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRyYW5zYWN0aW9uLmdldE1ldGEocGx1Z2luS2V5KTtcbiAgICAgICAgICBjb25zdCBoaWdobGlnaHQgPSBhY3Rpb24/LnJhbmdlO1xuICAgICAgICAgIGlmIChhY3Rpb24/LnR5cGUgPT09IFwiaGlnaGxpZ2h0RGVjb3JhdGlvblwiKSB7XG4gICAgICAgICAgICBjb25zdCBkb2MgPSB0cmFuc2FjdGlvbi5kb2M7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgIHJlbW92ZVxuICAgICAgICAgICAgfSA9IGFjdGlvbjtcbiAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkZWNvcmF0aW9uU2V0OiBEZWNvcmF0aW9uU2V0JDEuZW1wdHlcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGRlY29yYXRpb25TZXQgPSBidWlsZERlY29yYXRpb25TZXQoaGlnaGxpZ2h0LCBkb2MpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgZGVjb3JhdGlvblNldCxcbiAgICAgICAgICAgICAgaGlnaGxpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gb2xkU3RhdGU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJvcHM6IHtcbiAgICAgICAgZGVjb3JhdGlvbnMoc3RhdGUpIHtcbiAgICAgICAgICBjb25zdCBhdXRvY29tcGxldGVTdGF0ZSA9IHRoaXMuZ2V0U3RhdGUoc3RhdGUpO1xuICAgICAgICAgIGlmIChhdXRvY29tcGxldGVTdGF0ZT8uZGVjb3JhdGlvblNldCkge1xuICAgICAgICAgICAgcmV0dXJuIGF1dG9jb21wbGV0ZVN0YXRlLmRlY29yYXRpb25TZXQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBEZWNvcmF0aW9uU2V0JDEuZW1wdHk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSldO1xuICB9LFxuICBhZGRDb21tYW5kcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdG9nZ2xlQXV0b2NvbXBsZXRlSGlnaGxpZ2h0OiAocmFuZ2UpID0+ICh7XG4gICAgICAgIHN0YXRlLFxuICAgICAgICBkaXNwYXRjaFxuICAgICAgfSkgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgc2VsZWN0aW9uXG4gICAgICAgIH0gPSBzdGF0ZTtcbiAgICAgICAgY29uc3QgcG9zID0gc2VsZWN0aW9uLmZyb207XG4gICAgICAgIGlmICghZGlzcGF0Y2gpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgcGx1Z2luS2V5ID0gdGhpcy5vcHRpb25zLnBsdWdpbktleTtcbiAgICAgICAgY29uc3QgdHIgPSBzdGF0ZS50ci5zZXRNZXRhKHBsdWdpbktleSwge1xuICAgICAgICAgIHBvcyxcbiAgICAgICAgICB0eXBlOiBcImhpZ2hsaWdodERlY29yYXRpb25cIixcbiAgICAgICAgICByZW1vdmU6IGZhbHNlLFxuICAgICAgICAgIHJhbmdlXG4gICAgICAgIH0pO1xuICAgICAgICBkaXNwYXRjaCh0cik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSxcbiAgICAgIHJlbW92ZUF1dG9jb21wbGV0ZUhpZ2hsaWdodDogKCkgPT4gKHtcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGRpc3BhdGNoXG4gICAgICB9KSA9PiB7XG4gICAgICAgIGlmICghZGlzcGF0Y2gpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgcGx1Z2luS2V5ID0gdGhpcy5vcHRpb25zLnBsdWdpbktleTtcbiAgICAgICAgY29uc3QgdHIgPSBzdGF0ZS50ci5zZXRNZXRhKHBsdWdpbktleSwge1xuICAgICAgICAgIHBvczogMCxcbiAgICAgICAgICAvLyBXZSBjYW4gcGFzcyBhbnkgcG9zaXRpb24gYXMgaXQgd2lsbCByZW1vdmUgdGhlIGVudGlyZSBkZWNvcmF0aW9uIHNldFxuICAgICAgICAgIHR5cGU6IFwiaGlnaGxpZ2h0RGVjb3JhdGlvblwiLFxuICAgICAgICAgIHJlbW92ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgZGlzcGF0Y2godHIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcbmNvbnN0IENvbW1hbmRQbHVnaW5LZXkgPSBuZXcgUGx1Z2luS2V5JDEoXCJzbGFzaC1jb21tYW5kXCIpO1xuY29uc3QgU2xhc2hDb21tYW5kID0gTm9kZS5jcmVhdGUoe1xuICBuYW1lOiBcImNvbW1hbmRcIixcbiAgYWRkT3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgSFRNTEF0dHJpYnV0ZXM6IHt9LFxuICAgICAgcmVuZGVyVGV4dCh7XG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIG5vZGVcbiAgICAgIH0pIHtcbiAgICAgICAgcmV0dXJuIGAke29wdGlvbnMuc3VnZ2VzdGlvbi5jaGFyfSR7bm9kZS5hdHRycy5sYWJlbCA/PyBub2RlLmF0dHJzLmlkfWA7XG4gICAgICB9LFxuICAgICAgZGVsZXRlVHJpZ2dlcldpdGhCYWNrc3BhY2U6IGZhbHNlLFxuICAgICAgcmVuZGVySFRNTCh7XG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIG5vZGVcbiAgICAgIH0pIHtcbiAgICAgICAgcmV0dXJuIFtcInNwYW5cIiwgbWVyZ2VBdHRyaWJ1dGVzKHRoaXMuSFRNTEF0dHJpYnV0ZXMsIG9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMpLCBgJHtvcHRpb25zLnN1Z2dlc3Rpb24uY2hhcn0ke25vZGUuYXR0cnMubGFiZWwgPz8gbm9kZS5hdHRycy5pZH1gXTtcbiAgICAgIH0sXG4gICAgICBzdWdnZXN0aW9uOiB7XG4gICAgICAgIGNoYXI6IFwiL1wiLFxuICAgICAgICBwbHVnaW5LZXk6IENvbW1hbmRQbHVnaW5LZXksXG4gICAgICAgIGNvbW1hbmQ6ICh7XG4gICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgIHJhbmdlLFxuICAgICAgICAgIHByb3BzXG4gICAgICAgIH0pID0+IHtcbiAgICAgICAgICBjb25zdCBub2RlQWZ0ZXIgPSBlZGl0b3Iudmlldy5zdGF0ZS5zZWxlY3Rpb24uJHRvLm5vZGVBZnRlcjtcbiAgICAgICAgICBjb25zdCBvdmVycmlkZVNwYWNlID0gbm9kZUFmdGVyPy50ZXh0Py5zdGFydHNXaXRoKFwiIFwiKTtcbiAgICAgICAgICBpZiAob3ZlcnJpZGVTcGFjZSkge1xuICAgICAgICAgICAgcmFuZ2UudG8gKz0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWRpdG9yLmNoYWluKCkuZm9jdXMoKS5pbnNlcnRDb250ZW50QXQocmFuZ2UsIFt7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBhdHRyczogcHJvcHNcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgICAgIHRleHQ6IFwiIFwiXG4gICAgICAgICAgfV0pLnJ1bigpO1xuICAgICAgICAgIHdpbmRvdy5nZXRTZWxlY3Rpb24oKT8uY29sbGFwc2VUb0VuZCgpO1xuICAgICAgICB9LFxuICAgICAgICBhbGxvdzogKHtcbiAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICByYW5nZVxuICAgICAgICB9KSA9PiB7XG4gICAgICAgICAgY29uc3QgJGZyb20gPSBzdGF0ZS5kb2MucmVzb2x2ZShyYW5nZS5mcm9tKTtcbiAgICAgICAgICBjb25zdCB0eXBlID0gc3RhdGUuc2NoZW1hLm5vZGVzW3RoaXMubmFtZV07XG4gICAgICAgICAgY29uc3QgYWxsb3cgPSAhISRmcm9tLnBhcmVudC50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaFR5cGUodHlwZSk7XG4gICAgICAgICAgcmV0dXJuIGFsbG93O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgZ3JvdXA6IFwiaW5saW5lXCIsXG4gIGlubGluZTogdHJ1ZSxcbiAgc2VsZWN0YWJsZTogZmFsc2UsXG4gIGF0b206IHRydWUsXG4gIGFkZEF0dHJpYnV0ZXMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiB7XG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgIHBhcnNlSFRNTDogKGVsZW1lbnQpID0+IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pZFwiKSxcbiAgICAgICAgcmVuZGVySFRNTDogKGF0dHJpYnV0ZXMpID0+IHtcbiAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMuaWQpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZGF0YS1pZFwiOiBhdHRyaWJ1dGVzLmlkXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGxhYmVsOiB7XG4gICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgIHBhcnNlSFRNTDogKGVsZW1lbnQpID0+IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYWJlbFwiKSxcbiAgICAgICAgcmVuZGVySFRNTDogKGF0dHJpYnV0ZXMpID0+IHtcbiAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMubGFiZWwpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFwiZGF0YS1sYWJlbFwiOiBhdHRyaWJ1dGVzLmxhYmVsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sXG4gIHBhcnNlSFRNTCgpIHtcbiAgICByZXR1cm4gW3tcbiAgICAgIHRhZzogYHNwYW5bZGF0YS10eXBlPVwiJHt0aGlzLm5hbWV9XCJdYFxuICAgIH1dO1xuICB9LFxuICByZW5kZXJIVE1MKHtcbiAgICBub2RlLFxuICAgIEhUTUxBdHRyaWJ1dGVzXG4gIH0pIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnJlbmRlckxhYmVsICE9PSB2b2lkIDApIHtcbiAgICAgIGNvbnNvbGUud2FybihcInJlbmRlckxhYmVsIGlzIGRlcHJlY2F0ZWQgdXNlIHJlbmRlclRleHQgYW5kIHJlbmRlckhUTUwgaW5zdGVhZFwiKTtcbiAgICAgIHJldHVybiBbXCJzcGFuXCIsIG1lcmdlQXR0cmlidXRlcyh7XG4gICAgICAgIFwiZGF0YS10eXBlXCI6IHRoaXMubmFtZVxuICAgICAgfSwgdGhpcy5vcHRpb25zLkhUTUxBdHRyaWJ1dGVzLCBIVE1MQXR0cmlidXRlcyksIHRoaXMub3B0aW9ucy5yZW5kZXJMYWJlbCh7XG4gICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgbm9kZVxuICAgICAgfSldO1xuICAgIH1cbiAgICBjb25zdCBtZXJnZWRPcHRpb25zID0ge1xuICAgICAgLi4udGhpcy5vcHRpb25zXG4gICAgfTtcbiAgICBtZXJnZWRPcHRpb25zLkhUTUxBdHRyaWJ1dGVzID0gbWVyZ2VBdHRyaWJ1dGVzKHtcbiAgICAgIFwiZGF0YS10eXBlXCI6IHRoaXMubmFtZVxuICAgIH0sIHRoaXMub3B0aW9ucy5IVE1MQXR0cmlidXRlcywgSFRNTEF0dHJpYnV0ZXMpO1xuICAgIGNvbnN0IGh0bWwgPSB0aGlzLm9wdGlvbnMucmVuZGVySFRNTCh7XG4gICAgICBvcHRpb25zOiBtZXJnZWRPcHRpb25zLFxuICAgICAgbm9kZVxuICAgIH0pO1xuICAgIGlmICh0eXBlb2YgaHRtbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIFtcInNwYW5cIiwgbWVyZ2VBdHRyaWJ1dGVzKHtcbiAgICAgICAgXCJkYXRhLXR5cGVcIjogdGhpcy5uYW1lXG4gICAgICB9LCB0aGlzLm9wdGlvbnMuSFRNTEF0dHJpYnV0ZXMsIEhUTUxBdHRyaWJ1dGVzKSwgaHRtbF07XG4gICAgfVxuICAgIHJldHVybiBodG1sO1xuICB9LFxuICByZW5kZXJUZXh0KHtcbiAgICBub2RlXG4gIH0pIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJlbmRlclRleHQoe1xuICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgbm9kZVxuICAgIH0pO1xuICB9LFxuICBhZGRLZXlib2FyZFNob3J0Y3V0cygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQmFja3NwYWNlOiAoKSA9PiB0aGlzLmVkaXRvci5jb21tYW5kcy5jb21tYW5kKCh7XG4gICAgICAgIHRyLFxuICAgICAgICBzdGF0ZVxuICAgICAgfSkgPT4ge1xuICAgICAgICBsZXQgaXNDb21tYW5kID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBzZWxlY3Rpb25cbiAgICAgICAgfSA9IHN0YXRlO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZW1wdHksXG4gICAgICAgICAgYW5jaG9yXG4gICAgICAgIH0gPSBzZWxlY3Rpb247XG4gICAgICAgIGlmICghZW1wdHkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuZG9jLm5vZGVzQmV0d2VlbihhbmNob3IgLSAxLCBhbmNob3IsIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgICBpZiAobm9kZS50eXBlLm5hbWUgPT09IHRoaXMubmFtZSkge1xuICAgICAgICAgICAgaXNDb21tYW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHRyLmluc2VydFRleHQodGhpcy5vcHRpb25zLmRlbGV0ZVRyaWdnZXJXaXRoQmFja3NwYWNlID8gXCJcIiA6IHRoaXMub3B0aW9ucy5zdWdnZXN0aW9uLmNoYXIgfHwgXCJcIiwgcG9zLCBwb3MgKyBub2RlLm5vZGVTaXplKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaXNDb21tYW5kO1xuICAgICAgfSlcbiAgICB9O1xuICB9LFxuICBhZGRQcm9zZU1pcnJvclBsdWdpbnMoKSB7XG4gICAgcmV0dXJuIFtTdWdnZXN0aW9uKHtcbiAgICAgIGVkaXRvcjogdGhpcy5lZGl0b3IsXG4gICAgICAuLi50aGlzLm9wdGlvbnMuc3VnZ2VzdGlvblxuICAgIH0pXTtcbiAgfVxufSk7XG5jb25zdCBzdWdnZXN0aW9uID0gKHJlZiwge1xuICB1cGxvYWQsXG4gIGFpQ29udHJvbGxlclxufSkgPT4gKHtcbiAgaXRlbXM6ICh7XG4gICAgcXVlcnlcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGF2YWlsYWJsZVN1Z2dlc3Rpb25JdGVtcyA9IFsuLi5zdWdnZXN0aW9uSXRlbXNdO1xuICAgIGlmIChhaUNvbnRyb2xsZXIpIHtcbiAgICAgIGF2YWlsYWJsZVN1Z2dlc3Rpb25JdGVtcy5wdXNoKGF1dG9jb21wbGV0ZVN1Z2dlc3Rpb25JdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIGF2YWlsYWJsZVN1Z2dlc3Rpb25JdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGluVGl0bGUgPSBpdGVtLnRpdGxlLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChxdWVyeS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChpblRpdGxlKSByZXR1cm4gaW5UaXRsZTtcbiAgICAgIGNvbnN0IGluU2VhcmNoVGVybXMgPSBpdGVtLnNlYXJjaFRlcm1zPy5zb21lKCh0ZXJtKSA9PiB0ZXJtLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChxdWVyeS50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICByZXR1cm4gaW5TZWFyY2hUZXJtcztcbiAgICB9KTtcbiAgfSxcbiAgcmVuZGVyOiAoKSA9PiB7XG4gICAgbGV0IGNvbXBvbmVudDtcbiAgICBsZXQgcG9wdXA7XG4gICAgcmV0dXJuIHtcbiAgICAgIG9uU3RhcnQ6IChwcm9wcykgPT4ge1xuICAgICAgICBjb21wb25lbnQgPSBuZXcgUmVhY3RSZW5kZXJlcihDb21tYW5kTGlzdCwge1xuICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAuLi5wcm9wcyxcbiAgICAgICAgICAgIHVwbG9hZCxcbiAgICAgICAgICAgIGFpQ29udHJvbGxlclxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWRpdG9yOiBwcm9wcy5lZGl0b3JcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcHJvcHMuY2xpZW50UmVjdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwb3B1cCA9IHRpcHB5KFwiYm9keVwiLCB7XG4gICAgICAgICAgZ2V0UmVmZXJlbmNlQ2xpZW50UmVjdDogcHJvcHMuY2xpZW50UmVjdCxcbiAgICAgICAgICBhcHBlbmRUbzogcmVmPy5jdXJyZW50LFxuICAgICAgICAgIGNvbnRlbnQ6IGNvbXBvbmVudC5lbGVtZW50LFxuICAgICAgICAgIHNob3dPbkNyZWF0ZTogdHJ1ZSxcbiAgICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICB0cmlnZ2VyOiBcIm1hbnVhbFwiLFxuICAgICAgICAgIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIlxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBvblVwZGF0ZShwcm9wcykge1xuICAgICAgICBjb21wb25lbnQudXBkYXRlUHJvcHMocHJvcHMpO1xuICAgICAgICBpZiAoIXByb3BzLmNsaWVudFJlY3QpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcG9wdXBbMF0uc2V0UHJvcHMoe1xuICAgICAgICAgIGdldFJlZmVyZW5jZUNsaWVudFJlY3Q6IHByb3BzLmNsaWVudFJlY3RcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb25LZXlEb3duKHByb3BzKSB7XG4gICAgICAgIGlmIChwcm9wcy5ldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICBwb3B1cFswXS5oaWRlKCk7XG4gICAgICAgICAgcHJvcHMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29tcG9uZW50LnJlZj8ub25LZXlEb3duKHByb3BzKTtcbiAgICAgIH0sXG4gICAgICBvbkV4aXQoKSB7XG4gICAgICAgIGlmIChwb3B1cCAmJiBwb3B1cFswXSkgcG9wdXBbMF0uZGVzdHJveSgpO1xuICAgICAgICBjb21wb25lbnQ/LmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59KTtcbmNvbnN0IENvbW1hbmRMaXN0ID0gZm9yd2FyZFJlZigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCAkID0gYygzMyk7XG4gIGNvbnN0IFtzZWxlY3RlZEluZGV4LCBzZXRTZWxlY3RlZEluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCB7XG4gICAgZWRpdG9yXG4gIH0gPSB1c2VDdXJyZW50RWRpdG9yKCk7XG4gIGxldCB0MDtcbiAgaWYgKCRbMF0gIT09IGVkaXRvciB8fCAkWzFdICE9PSBwcm9wcy5haUNvbnRyb2xsZXIgfHwgJFsyXSAhPT0gcHJvcHMucmFuZ2UgfHwgJFszXSAhPT0gcHJvcHMudXBsb2FkKSB7XG4gICAgdDAgPSAoaXRlbSkgPT4ge1xuICAgICAgaWYgKCFlZGl0b3IpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaXRlbT8uY29tbWFuZD8uKHtcbiAgICAgICAgZWRpdG9yLFxuICAgICAgICByYW5nZTogcHJvcHMucmFuZ2UsXG4gICAgICAgIHVwbG9hZDogcHJvcHMudXBsb2FkLFxuICAgICAgICBhaUNvbnRyb2xsZXI6IHByb3BzLmFpQ29udHJvbGxlclxuICAgICAgfSk7XG4gICAgfTtcbiAgICAkWzBdID0gZWRpdG9yO1xuICAgICRbMV0gPSBwcm9wcy5haUNvbnRyb2xsZXI7XG4gICAgJFsyXSA9IHByb3BzLnJhbmdlO1xuICAgICRbM10gPSBwcm9wcy51cGxvYWQ7XG4gICAgJFs0XSA9IHQwO1xuICB9IGVsc2Uge1xuICAgIHQwID0gJFs0XTtcbiAgfVxuICBjb25zdCBzZWxlY3RJdGVtID0gdDA7XG4gIGxldCB0MTtcbiAgaWYgKCRbNV0gIT09IHByb3BzLml0ZW1zLmxlbmd0aCB8fCAkWzZdICE9PSBzZWxlY3RlZEluZGV4KSB7XG4gICAgdDEgPSAoKSA9PiB7XG4gICAgICBzZXRTZWxlY3RlZEluZGV4KChzZWxlY3RlZEluZGV4ICsgcHJvcHMuaXRlbXMubGVuZ3RoIC0gMSkgJSBwcm9wcy5pdGVtcy5sZW5ndGgpO1xuICAgIH07XG4gICAgJFs1XSA9IHByb3BzLml0ZW1zLmxlbmd0aDtcbiAgICAkWzZdID0gc2VsZWN0ZWRJbmRleDtcbiAgICAkWzddID0gdDE7XG4gIH0gZWxzZSB7XG4gICAgdDEgPSAkWzddO1xuICB9XG4gIGNvbnN0IHVwSGFuZGxlciA9IHQxO1xuICBsZXQgdDI7XG4gIGlmICgkWzhdICE9PSBwcm9wcy5pdGVtcy5sZW5ndGggfHwgJFs5XSAhPT0gc2VsZWN0ZWRJbmRleCkge1xuICAgIHQyID0gKCkgPT4ge1xuICAgICAgc2V0U2VsZWN0ZWRJbmRleCgoc2VsZWN0ZWRJbmRleCArIDEpICUgcHJvcHMuaXRlbXMubGVuZ3RoKTtcbiAgICB9O1xuICAgICRbOF0gPSBwcm9wcy5pdGVtcy5sZW5ndGg7XG4gICAgJFs5XSA9IHNlbGVjdGVkSW5kZXg7XG4gICAgJFsxMF0gPSB0MjtcbiAgfSBlbHNlIHtcbiAgICB0MiA9ICRbMTBdO1xuICB9XG4gIGNvbnN0IGRvd25IYW5kbGVyID0gdDI7XG4gIGxldCB0MztcbiAgaWYgKCRbMTFdICE9PSBwcm9wcy5pdGVtcyB8fCAkWzEyXSAhPT0gc2VsZWN0SXRlbSB8fCAkWzEzXSAhPT0gc2VsZWN0ZWRJbmRleCkge1xuICAgIHQzID0gKCkgPT4ge1xuICAgICAgY29uc3QgaXRlbV8wID0gcHJvcHMuaXRlbXNbc2VsZWN0ZWRJbmRleF07XG4gICAgICBzZWxlY3RJdGVtKGl0ZW1fMCk7XG4gICAgfTtcbiAgICAkWzExXSA9IHByb3BzLml0ZW1zO1xuICAgICRbMTJdID0gc2VsZWN0SXRlbTtcbiAgICAkWzEzXSA9IHNlbGVjdGVkSW5kZXg7XG4gICAgJFsxNF0gPSB0MztcbiAgfSBlbHNlIHtcbiAgICB0MyA9ICRbMTRdO1xuICB9XG4gIGNvbnN0IGVudGVySGFuZGxlciA9IHQzO1xuICBsZXQgdDQ7XG4gIGlmICgkWzE1XSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikpIHtcbiAgICB0NCA9ICgpID0+IHNldFNlbGVjdGVkSW5kZXgoMCk7XG4gICAgJFsxNV0gPSB0NDtcbiAgfSBlbHNlIHtcbiAgICB0NCA9ICRbMTVdO1xuICB9XG4gIGxldCB0NTtcbiAgaWYgKCRbMTZdICE9PSBwcm9wcy5pdGVtcykge1xuICAgIHQ1ID0gW3Byb3BzLml0ZW1zXTtcbiAgICAkWzE2XSA9IHByb3BzLml0ZW1zO1xuICAgICRbMTddID0gdDU7XG4gIH0gZWxzZSB7XG4gICAgdDUgPSAkWzE3XTtcbiAgfVxuICB1c2VFZmZlY3QodDQsIHQ1KTtcbiAgbGV0IHQ2O1xuICBpZiAoJFsxOF0gIT09IGRvd25IYW5kbGVyIHx8ICRbMTldICE9PSBlbnRlckhhbmRsZXIgfHwgJFsyMF0gIT09IHVwSGFuZGxlcikge1xuICAgIHQ2ID0gKCkgPT4gKHtcbiAgICAgIG9uS2V5RG93bjogKHQ3MikgPT4ge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZXZlbnRcbiAgICAgICAgfSA9IHQ3MjtcbiAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd1VwXCIpIHtcbiAgICAgICAgICB1cEhhbmRsZXIoKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkFycm93RG93blwiKSB7XG4gICAgICAgICAgZG93bkhhbmRsZXIoKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICBlbnRlckhhbmRsZXIoKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgJFsxOF0gPSBkb3duSGFuZGxlcjtcbiAgICAkWzE5XSA9IGVudGVySGFuZGxlcjtcbiAgICAkWzIwXSA9IHVwSGFuZGxlcjtcbiAgICAkWzIxXSA9IHQ2O1xuICB9IGVsc2Uge1xuICAgIHQ2ID0gJFsyMV07XG4gIH1cbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShyZWYsIHQ2KTtcbiAgbGV0IHQ3O1xuICBpZiAoJFsyMl0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpKSB7XG4gICAgdDcgPSBbXTtcbiAgICAkWzIyXSA9IHQ3O1xuICB9IGVsc2Uge1xuICAgIHQ3ID0gJFsyMl07XG4gIH1cbiAgY29uc3QgaXRlbVJlZnMgPSB1c2VSZWYodDcpO1xuICBsZXQgdDg7XG4gIGxldCB0OTtcbiAgaWYgKCRbMjNdICE9PSBzZWxlY3RlZEluZGV4KSB7XG4gICAgdDggPSAoKSA9PiB7XG4gICAgICBpZiAoaXRlbVJlZnMuY3VycmVudFtzZWxlY3RlZEluZGV4XSkge1xuICAgICAgICBpdGVtUmVmcy5jdXJyZW50W3NlbGVjdGVkSW5kZXhdLnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICBibG9jazogXCJuZWFyZXN0XCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0OSA9IFtzZWxlY3RlZEluZGV4XTtcbiAgICAkWzIzXSA9IHNlbGVjdGVkSW5kZXg7XG4gICAgJFsyNF0gPSB0ODtcbiAgICAkWzI1XSA9IHQ5O1xuICB9IGVsc2Uge1xuICAgIHQ4ID0gJFsyNF07XG4gICAgdDkgPSAkWzI1XTtcbiAgfVxuICB1c2VFZmZlY3QodDgsIHQ5KTtcbiAgbGV0IHQxMDtcbiAgaWYgKCRbMjZdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSkge1xuICAgIHQxMCA9IGNscyhcInRleHQtc3VyZmFjZS05MDAgZGFyazp0ZXh0LXdoaXRlIHotNTAgbWF4LWgtWzI4MHB4XSBoLWF1dG8gdy03MiBvdmVyZmxvdy15LWF1dG8gcm91bmRlZC1tZCBib3JkZXIgYmctd2hpdGUgZGFyazpiZy1zdXJmYWNlLTkwMCBweC0xIHB5LTIgc2hhZG93IHRyYW5zaXRpb24tYWxsXCIsIGRlZmF1bHRCb3JkZXJNaXhpbik7XG4gICAgJFsyNl0gPSB0MTA7XG4gIH0gZWxzZSB7XG4gICAgdDEwID0gJFsyNl07XG4gIH1cbiAgbGV0IHQxMTtcbiAgaWYgKCRbMjddICE9PSBwcm9wcy5pdGVtcyB8fCAkWzI4XSAhPT0gc2VsZWN0SXRlbSB8fCAkWzI5XSAhPT0gc2VsZWN0ZWRJbmRleCkge1xuICAgIHQxMSA9IHByb3BzLml0ZW1zLmxlbmd0aCA/IHByb3BzLml0ZW1zLm1hcCgoaXRlbV8xLCBpbmRleCkgPT4gLyogQF9fUFVSRV9fICovIGpzeHMoXCJidXR0b25cIiwgeyB2YWx1ZTogaXRlbV8xLnRpdGxlLCByZWY6IChlbCkgPT4ge1xuICAgICAgaWYgKCFlbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpdGVtUmVmcy5jdXJyZW50W2luZGV4XSA9IGVsO1xuICAgIH0sIG9uQ2xpY2s6ICgpID0+IHNlbGVjdEl0ZW0oaXRlbV8xKSwgdGFiSW5kZXg6IGluZGV4ID09PSBzZWxlY3RlZEluZGV4ID8gMCA6IC0xLCBcImFyaWEtc2VsZWN0ZWRcIjogaW5kZXggPT09IHNlbGVjdGVkSW5kZXgsIGNsYXNzTmFtZTogY2xzKFwiZmxleCB3LWZ1bGwgaXRlbXMtY2VudGVyIHNwYWNlLXgtMiByb3VuZGVkLW1kIHB4LTIgcHktMSB0ZXh0LWxlZnQgdGV4dC1zbSBob3ZlcjpiZy1ibHVlLTUwIGhvdmVyOmRhcms6Ymctc3VyZmFjZS03MDAgYXJpYS1zZWxlY3RlZDpiZy1ibHVlLTUwIGFyaWEtc2VsZWN0ZWQ6ZGFyazpiZy1zdXJmYWNlLTcwMFwiLCBpbmRleCA9PT0gc2VsZWN0ZWRJbmRleCA/IFwiYmctYmx1ZS0xMDAgZGFyazpiZy1zdXJmYWNlLWFjY2VudC05NTBcIiA6IFwiXCIpLCBjaGlsZHJlbjogW1xuICAgICAgLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogY2xzKFwiZmxleCBoLTEwIHctMTAgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHJvdW5kZWQtbWQgYm9yZGVyIGJnLXdoaXRlIGRhcms6Ymctc3VyZmFjZS05MDBcIiwgZGVmYXVsdEJvcmRlck1peGluKSwgY2hpbGRyZW46IGl0ZW1fMS5pY29uIH0pLFxuICAgICAgLyogQF9fUFVSRV9fICovIGpzeHMoXCJkaXZcIiwgeyBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJmb250LW1lZGl1bVwiLCBjaGlsZHJlbjogaXRlbV8xLnRpdGxlIH0pLFxuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KFwicFwiLCB7IGNsYXNzTmFtZTogXCJ0ZXh0LXhzIHRleHQtc3VyZmFjZS03MDAgZGFyazp0ZXh0LXN1cmZhY2UtYWNjZW50LTMwMFwiLCBjaGlsZHJlbjogaXRlbV8xLmRlc2NyaXB0aW9uIH0pXG4gICAgICBdIH0pXG4gICAgXSB9LCBpdGVtXzEudGl0bGUpKSA6IC8qIEBfX1BVUkVfXyAqLyBqc3goXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiaXRlbVwiLCBjaGlsZHJlbjogXCJObyByZXN1bHRcIiB9KTtcbiAgICAkWzI3XSA9IHByb3BzLml0ZW1zO1xuICAgICRbMjhdID0gc2VsZWN0SXRlbTtcbiAgICAkWzI5XSA9IHNlbGVjdGVkSW5kZXg7XG4gICAgJFszMF0gPSB0MTE7XG4gIH0gZWxzZSB7XG4gICAgdDExID0gJFszMF07XG4gIH1cbiAgbGV0IHQxMjtcbiAgaWYgKCRbMzFdICE9PSB0MTEpIHtcbiAgICB0MTIgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiB0MTAsIGNoaWxkcmVuOiB0MTEgfSk7XG4gICAgJFszMV0gPSB0MTE7XG4gICAgJFszMl0gPSB0MTI7XG4gIH0gZWxzZSB7XG4gICAgdDEyID0gJFszMl07XG4gIH1cbiAgcmV0dXJuIHQxMjtcbn0pO1xuQ29tbWFuZExpc3QuZGlzcGxheU5hbWUgPSBcIkNvbW1hbmRMaXN0XCI7XG5jb25zdCBhdXRvY29tcGxldGVTdWdnZXN0aW9uSXRlbSA9IHtcbiAgdGl0bGU6IFwiQXV0b2NvbXBsZXRlXCIsXG4gIGRlc2NyaXB0aW9uOiBcIkFkZCB0ZXh0IGJhc2VkIG9uIHRoZSBjb250ZXh0LlwiLFxuICBzZWFyY2hUZXJtczogW1wiYWlcIl0sXG4gIGljb246IC8qIEBfX1BVUkVfXyAqLyBqc3goQXV0b0ZpeEhpZ2hJY29uLCB7IHNpemU6IDE4IH0pLFxuICBjb21tYW5kOiBhc3luYyAoe1xuICAgIGVkaXRvcixcbiAgICByYW5nZSxcbiAgICBhaUNvbnRyb2xsZXJcbiAgfSkgPT4ge1xuICAgIGlmICghYWlDb250cm9sbGVyKSB0aHJvdyBFcnJvcihcIk5vIEFpQ29udHJvbGxlclwiKTtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS50b2dnbGVOb2RlKFwicGFyYWdyYXBoXCIsIFwicGFyYWdyYXBoXCIpLnJ1bigpO1xuICAgIGNvbnN0IHtcbiAgICAgIHN0YXRlXG4gICAgfSA9IGVkaXRvcjtcbiAgICBjb25zdCB7XG4gICAgICBmcm9tLFxuICAgICAgdG9cbiAgICB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgIGNvbnN0IHRleHRCZWZvcmVDdXJzb3IgPSBzdGF0ZS5kb2MudGV4dEJldHdlZW4oMCwgZnJvbSwgXCJcXG5cIik7XG4gICAgY29uc3QgdGV4dEFmdGVyQ3Vyc29yID0gc3RhdGUuZG9jLnRleHRCZXR3ZWVuKHRvLCBzdGF0ZS5kb2MuY29udGVudC5zaXplLCBcIlxcblwiKTtcbiAgICBsZXQgYnVmZmVyID0gXCJcIjtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhaUNvbnRyb2xsZXIuYXV0b2NvbXBsZXRlKHRleHRCZWZvcmVDdXJzb3IsIHRleHRBZnRlckN1cnNvciwgKGRlbHRhKSA9PiB7XG4gICAgICBidWZmZXIgKz0gZGVsdGE7XG4gICAgICBpZiAoZGVsdGEubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGVkaXRvci5jaGFpbigpLmZvY3VzKCkudG9nZ2xlTG9hZGluZ0RlY29yYXRpb24oYnVmZmVyKS5ydW4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmluc2VydENvbnRlbnQocmVzdWx0LCB7XG4gICAgICBhcHBseUlucHV0UnVsZXM6IGZhbHNlLFxuICAgICAgYXBwbHlQYXN0ZVJ1bGVzOiBmYWxzZSxcbiAgICAgIHBhcnNlT3B0aW9uczoge1xuICAgICAgICBwcmVzZXJ2ZVdoaXRlc3BhY2U6IGZhbHNlXG4gICAgICB9XG4gICAgfSkucnVuKCk7XG4gIH1cbn07XG5jb25zdCBzdWdnZXN0aW9uSXRlbXMgPSBbe1xuICB0aXRsZTogXCJUZXh0XCIsXG4gIGRlc2NyaXB0aW9uOiBcIkp1c3Qgc3RhcnQgdHlwaW5nIHdpdGggcGxhaW4gdGV4dC5cIixcbiAgc2VhcmNoVGVybXM6IFtcInBcIiwgXCJwYXJhZ3JhcGhcIl0sXG4gIGljb246IC8qIEBfX1BVUkVfXyAqLyBqc3goVGV4dEZpZWxkc0ljb24sIHsgc2l6ZTogMTggfSksXG4gIGNvbW1hbmQ6ICh7XG4gICAgZWRpdG9yLFxuICAgIHJhbmdlXG4gIH0pID0+IHtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS50b2dnbGVOb2RlKFwicGFyYWdyYXBoXCIsIFwicGFyYWdyYXBoXCIpLnJ1bigpO1xuICB9XG59LCB7XG4gIHRpdGxlOiBcIlRvLWRvIExpc3RcIixcbiAgZGVzY3JpcHRpb246IFwiVHJhY2sgdGFza3Mgd2l0aCBhIHRvLWRvIGxpc3QuXCIsXG4gIHNlYXJjaFRlcm1zOiBbXCJ0b2RvXCIsIFwidGFza1wiLCBcImxpc3RcIiwgXCJjaGVja1wiLCBcImNoZWNrYm94XCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KENoZWNrQm94SWNvbiwgeyBzaXplOiAxOCB9KSxcbiAgY29tbWFuZDogKHtcbiAgICBlZGl0b3IsXG4gICAgcmFuZ2VcbiAgfSkgPT4ge1xuICAgIGVkaXRvci5jaGFpbigpLmZvY3VzKCkuZGVsZXRlUmFuZ2UocmFuZ2UpLnRvZ2dsZVRhc2tMaXN0KCkucnVuKCk7XG4gIH1cbn0sIHtcbiAgdGl0bGU6IFwiSGVhZGluZyAxXCIsXG4gIGRlc2NyaXB0aW9uOiBcIkJpZyBzZWN0aW9uIGhlYWRpbmcuXCIsXG4gIHNlYXJjaFRlcm1zOiBbXCJ0aXRsZVwiLCBcImJpZ1wiLCBcImxhcmdlXCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KExvb2tzT25lSWNvbiwgeyBzaXplOiAxOCB9KSxcbiAgY29tbWFuZDogKHtcbiAgICBlZGl0b3IsXG4gICAgcmFuZ2VcbiAgfSkgPT4ge1xuICAgIGVkaXRvci5jaGFpbigpLmZvY3VzKCkuZGVsZXRlUmFuZ2UocmFuZ2UpLnNldE5vZGUoXCJoZWFkaW5nXCIsIHtcbiAgICAgIGxldmVsOiAxXG4gICAgfSkucnVuKCk7XG4gIH1cbn0sIHtcbiAgdGl0bGU6IFwiSGVhZGluZyAyXCIsXG4gIGRlc2NyaXB0aW9uOiBcIk1lZGl1bSBzZWN0aW9uIGhlYWRpbmcuXCIsXG4gIHNlYXJjaFRlcm1zOiBbXCJzdWJ0aXRsZVwiLCBcIm1lZGl1bVwiXSxcbiAgaWNvbjogLyogQF9fUFVSRV9fICovIGpzeChMb29rc1R3b0ljb24sIHsgc2l6ZTogMTggfSksXG4gIGNvbW1hbmQ6ICh7XG4gICAgZWRpdG9yLFxuICAgIHJhbmdlXG4gIH0pID0+IHtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS5zZXROb2RlKFwiaGVhZGluZ1wiLCB7XG4gICAgICBsZXZlbDogMlxuICAgIH0pLnJ1bigpO1xuICB9XG59LCB7XG4gIHRpdGxlOiBcIkhlYWRpbmcgM1wiLFxuICBkZXNjcmlwdGlvbjogXCJTbWFsbCBzZWN0aW9uIGhlYWRpbmcuXCIsXG4gIHNlYXJjaFRlcm1zOiBbXCJzdWJ0aXRsZVwiLCBcInNtYWxsXCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KExvb2tzM0ljb24sIHsgc2l6ZTogMTggfSksXG4gIGNvbW1hbmQ6ICh7XG4gICAgZWRpdG9yLFxuICAgIHJhbmdlXG4gIH0pID0+IHtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS5zZXROb2RlKFwiaGVhZGluZ1wiLCB7XG4gICAgICBsZXZlbDogM1xuICAgIH0pLnJ1bigpO1xuICB9XG59LCB7XG4gIHRpdGxlOiBcIkJ1bGxldCBMaXN0XCIsXG4gIGRlc2NyaXB0aW9uOiBcIkNyZWF0ZSBhIHNpbXBsZSBidWxsZXQgbGlzdC5cIixcbiAgc2VhcmNoVGVybXM6IFtcInVub3JkZXJlZFwiLCBcInBvaW50XCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KEZvcm1hdExpc3RCdWxsZXRlZEljb24sIHsgc2l6ZTogMTggfSksXG4gIGNvbW1hbmQ6ICh7XG4gICAgZWRpdG9yLFxuICAgIHJhbmdlXG4gIH0pID0+IHtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS50b2dnbGVCdWxsZXRMaXN0KCkucnVuKCk7XG4gIH1cbn0sIHtcbiAgdGl0bGU6IFwiTnVtYmVyZWQgTGlzdFwiLFxuICBkZXNjcmlwdGlvbjogXCJDcmVhdGUgYSBsaXN0IHdpdGggbnVtYmVyaW5nLlwiLFxuICBzZWFyY2hUZXJtczogW1wib3JkZXJlZFwiXSxcbiAgaWNvbjogLyogQF9fUFVSRV9fICovIGpzeChGb3JtYXRMaXN0TnVtYmVyZWRJY29uLCB7IHNpemU6IDE4IH0pLFxuICBjb21tYW5kOiAoe1xuICAgIGVkaXRvcixcbiAgICByYW5nZVxuICB9KSA9PiB7XG4gICAgZWRpdG9yLmNoYWluKCkuZm9jdXMoKS5kZWxldGVSYW5nZShyYW5nZSkudG9nZ2xlT3JkZXJlZExpc3QoKS5ydW4oKTtcbiAgfVxufSwge1xuICB0aXRsZTogXCJRdW90ZVwiLFxuICBkZXNjcmlwdGlvbjogXCJDYXB0dXJlIGEgcXVvdGUuXCIsXG4gIHNlYXJjaFRlcm1zOiBbXCJibG9ja3F1b3RlXCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KEZvcm1hdFF1b3RlSWNvbiwgeyBzaXplOiAxOCB9KSxcbiAgY29tbWFuZDogKHtcbiAgICBlZGl0b3IsXG4gICAgcmFuZ2VcbiAgfSkgPT4gZWRpdG9yLmNoYWluKCkuZm9jdXMoKS5kZWxldGVSYW5nZShyYW5nZSkudG9nZ2xlTm9kZShcInBhcmFncmFwaFwiLCBcInBhcmFncmFwaFwiKS50b2dnbGVCbG9ja3F1b3RlKCkucnVuKClcbn0sIHtcbiAgdGl0bGU6IFwiQ29kZVwiLFxuICBkZXNjcmlwdGlvbjogXCJDYXB0dXJlIGEgY29kZSBzbmlwcGV0LlwiLFxuICBzZWFyY2hUZXJtczogW1wiY29kZWJsb2NrXCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KENvZGVJY29uLCB7IHNpemU6IDE4IH0pLFxuICBjb21tYW5kOiAoe1xuICAgIGVkaXRvcixcbiAgICByYW5nZVxuICB9KSA9PiBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS50b2dnbGVDb2RlQmxvY2soKS5ydW4oKVxufSwge1xuICB0aXRsZTogXCJJbWFnZVwiLFxuICBkZXNjcmlwdGlvbjogXCJVcGxvYWQgYW4gaW1hZ2UgZnJvbSB5b3VyIGNvbXB1dGVyLlwiLFxuICBzZWFyY2hUZXJtczogW1wicGhvdG9cIiwgXCJwaWN0dXJlXCIsIFwibWVkaWFcIiwgXCJ1cGxvYWRcIiwgXCJmaWxlXCJdLFxuICBpY29uOiAvKiBAX19QVVJFX18gKi8ganN4KEltYWdlSWNvbiwgeyBzaXplOiAxOCB9KSxcbiAgY29tbWFuZDogKHtcbiAgICBlZGl0b3IsXG4gICAgcmFuZ2UsXG4gICAgdXBsb2FkXG4gIH0pID0+IHtcbiAgICBlZGl0b3IuY2hhaW4oKS5mb2N1cygpLmRlbGV0ZVJhbmdlKHJhbmdlKS5ydW4oKTtcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBpbnB1dC50eXBlID0gXCJmaWxlXCI7XG4gICAgaW5wdXQuYWNjZXB0ID0gXCJpbWFnZS8qXCI7XG4gICAgaW5wdXQub25jaGFuZ2UgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoaW5wdXQuZmlsZXM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXNbMF07XG4gICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBwb3MgPSBlZGl0b3Iudmlldy5zdGF0ZS5zZWxlY3Rpb24uZnJvbTtcbiAgICAgICAgY29uc3QgZmlsZUxpc3QgPSBpbnB1dC5maWxlcztcbiAgICAgICAgY29uc3QgZmlsZXMgPSBBcnJheS5mcm9tKGZpbGVMaXN0KTtcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gZmlsZXMuZmlsdGVyKChmaWxlMikgPT4gL2ltYWdlL2kudGVzdChmaWxlMi50eXBlKSk7XG4gICAgICAgIGlmIChpbWFnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJObyBpbWFnZXMgZm91bmQgaW4gdXBsb2FkZWQgZmlsZXNcIik7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZpZXcgPSBlZGl0b3IudmlldztcbiAgICAgICAgaW1hZ2VzLmZvckVhY2goKGltYWdlKSA9PiB7XG4gICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICByZWFkZXIub25sb2FkID0gYXN5bmMgKHJlYWRlckV2ZW50KSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBvbkZpbGVSZWFkKHZpZXcsIHJlYWRlckV2ZW50LCBwb3MsIHVwbG9hZCwgaW1hZ2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgaW5wdXQuY2xpY2soKTtcbiAgfVxufV07XG5jb25zdCBDdXN0b21Eb2N1bWVudCA9IERvY3VtZW50LmV4dGVuZCh7XG4gIC8vIGNvbnRlbnQ6ICdoZWFkaW5nIGJsb2NrKicsXG59KTtcbmNvbnN0IHByb3NlQ2xhc3NlcyA9IHtcbiAgXCJzbVwiOiBcInByb3NlLXNtXCIsXG4gIFwiYmFzZVwiOiBcInByb3NlLWJhc2VcIixcbiAgXCJsZ1wiOiBcInByb3NlLWxnXCJcbn07XG5jb25zdCBGaXJlQ01TRWRpdG9yID0gKHtcbiAgY29udGVudCxcbiAgb25Kc29uQ29udGVudENoYW5nZSxcbiAgb25IdG1sQ29udGVudENoYW5nZSxcbiAgb25NYXJrZG93bkNvbnRlbnRDaGFuZ2UsXG4gIHZlcnNpb24sXG4gIHRleHRTaXplID0gXCJiYXNlXCIsXG4gIGhpZ2hsaWdodCxcbiAgaGFuZGxlSW1hZ2VVcGxvYWQsXG4gIGFpQ29udHJvbGxlcixcbiAgZGlzYWJsZWRcbn0pID0+IHtcbiAgY29uc3QgcmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICBjb25zdCBlZGl0b3JSZWYgPSBSZWFjdC51c2VSZWYobnVsbCk7XG4gIGNvbnN0IGltYWdlUGx1Z2luID0gY3JlYXRlRHJvcEltYWdlUGx1Z2luKGhhbmRsZUltYWdlVXBsb2FkKTtcbiAgY29uc3QgaW1hZ2VFeHRlbnNpb24gPSB1c2VNZW1vKCgpID0+IGNyZWF0ZUltYWdlRXh0ZW5zaW9uKGltYWdlUGx1Z2luKSwgW10pO1xuICBjb25zdCBbb3Blbk5vZGUsIHNldE9wZW5Ob2RlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW29wZW5MaW5rLCBzZXRPcGVuTGlua10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIHVzZUluamVjdFN0eWxlcyhcIkVkaXRvclwiLCBjc3NTdHlsZXMpO1xuICBjb25zdCBkZWZlcnJlZEhpZ2hsaWdodCA9IHVzZURlZmVycmVkVmFsdWUoaGlnaGxpZ2h0KTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodmVyc2lvbiA9PT0gdm9pZCAwKSByZXR1cm47XG4gICAgaWYgKHZlcnNpb24gPiAtMSAmJiBlZGl0b3JSZWYuY3VycmVudCkge1xuICAgICAgZWRpdG9yUmVmLmN1cnJlbnQ/LmNvbW1hbmRzLnNldENvbnRlbnQoY29udGVudCA/PyBcIlwiKTtcbiAgICB9XG4gIH0sIFt2ZXJzaW9uXSk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZWRpdG9yUmVmPy5jdXJyZW50Py5zZXRFZGl0YWJsZSghZGlzYWJsZWQpO1xuICB9LCBbZGlzYWJsZWRdKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodmVyc2lvbiA9PT0gdm9pZCAwKSByZXR1cm47XG4gICAgaWYgKGVkaXRvclJlZi5jdXJyZW50ICYmIHZlcnNpb24gPiAwKSB7XG4gICAgICBjb25zdCBjaGFpbiA9IGVkaXRvclJlZi5jdXJyZW50LmNoYWluKCk7XG4gICAgICBpZiAoZGVmZXJyZWRIaWdobGlnaHQpIHtcbiAgICAgICAgY2hhaW4uZm9jdXMoKS50b2dnbGVBdXRvY29tcGxldGVIaWdobGlnaHQoZGVmZXJyZWRIaWdobGlnaHQpLnJ1bigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhaW4uZm9jdXMoKS5yZW1vdmVBdXRvY29tcGxldGVIaWdobGlnaHQoKS5ydW4oKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIFtkZWZlcnJlZEhpZ2hsaWdodD8uZnJvbSwgZGVmZXJyZWRIaWdobGlnaHQ/LnRvXSk7XG4gIGNvbnN0IG9uRWRpdG9yVXBkYXRlID0gKGVkaXRvcikgPT4ge1xuICAgIGVkaXRvclJlZi5jdXJyZW50ID0gZWRpdG9yO1xuICAgIGlmIChvbk1hcmtkb3duQ29udGVudENoYW5nZSkge1xuICAgICAgY29uc3QgbWFya2Rvd24gPSBlZGl0b3JSZWYuY3VycmVudC5zdG9yYWdlLm1hcmtkb3duLmdldE1hcmtkb3duKCk7XG4gICAgICBvbk1hcmtkb3duQ29udGVudENoYW5nZT8uKGFkZExpbmVCcmVha0FmdGVySW1hZ2VzKG1hcmtkb3duKSk7XG4gICAgfVxuICAgIGlmIChvbkpzb25Db250ZW50Q2hhbmdlKSB7XG4gICAgICBjb25zdCBqc29uQ29udGVudCA9IHJlbW92ZUNsYXNzZXNGcm9tSnNvbihlZGl0b3IuZ2V0SlNPTigpKTtcbiAgICAgIG9uSnNvbkNvbnRlbnRDaGFuZ2UoanNvbkNvbnRlbnQpO1xuICAgIH1cbiAgICBpZiAob25IdG1sQ29udGVudENoYW5nZSkge1xuICAgICAgb25IdG1sQ29udGVudENoYW5nZT8uKGVkaXRvci5nZXRIVE1MKCkpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgcHJvc2VDbGFzcyA9IHByb3NlQ2xhc3Nlc1t0ZXh0U2l6ZV07XG4gIGNvbnN0IGV4dGVuc2lvbnMgPSB1c2VNZW1vKCgpID0+IFtcbiAgICBzdGFydGVyS2l0LFxuICAgIEN1c3RvbURvY3VtZW50LFxuICAgIEhpZ2hsaWdodERlY29yYXRpb25FeHRlbnNpb24oaGlnaGxpZ2h0KSxcbiAgICBUZXh0TG9hZGluZ0RlY29yYXRpb25FeHRlbnNpb24sXG4gICAgVW5kZXJsaW5lLFxuICAgIEJvbGQsXG4gICAgVGV4dFN0eWxlLFxuICAgIEl0YWxpYyxcbiAgICBTdHJpa2UsXG4gICAgQ29sb3IsXG4gICAgSGlnaGxpZ2h0LmNvbmZpZ3VyZSh7XG4gICAgICBtdWx0aWNvbG9yOiB0cnVlXG4gICAgfSksXG4gICAgLy8gQ3VzdG9tQmxvY2suY29uZmlndXJlKHtcbiAgICAvLyAgICAgY29tcG9uZW50OiBDdXN0b21Db21wb25lbnQsXG4gICAgLy8gICAgIGRlbGltaXRlcjogXCJgYGBjdXN0b21cIlxuICAgIC8vIH0pLFxuICAgIEhlYWRpbmcsXG4gICAgQ3VzdG9tS2V5bWFwLFxuICAgIERyYWdBbmREcm9wLFxuICAgIHBsYWNlaG9sZGVyLFxuICAgIHRpcHRhcExpbmssXG4gICAgaW1hZ2VFeHRlbnNpb24sXG4gICAgdGFza0xpc3QsXG4gICAgdGFza0l0ZW0sXG4gICAgTWFya2Rvd24uY29uZmlndXJlKHtcbiAgICAgIGh0bWw6IHRydWVcbiAgICB9KSxcbiAgICBob3Jpem9udGFsUnVsZSxcbiAgICBidWxsZXRMaXN0LFxuICAgIG9yZGVyZWRMaXN0LFxuICAgIGxpc3RJdGVtLFxuICAgIGJsb2NrcXVvdGUsXG4gICAgY29kZUJsb2NrLFxuICAgIGNvZGUsXG4gICAgU2xhc2hDb21tYW5kLmNvbmZpZ3VyZSh7XG4gICAgICBIVE1MQXR0cmlidXRlczoge1xuICAgICAgICBjbGFzczogXCJtZW50aW9uXCJcbiAgICAgIH0sXG4gICAgICBzdWdnZXN0aW9uOiBzdWdnZXN0aW9uKHJlZiwge1xuICAgICAgICB1cGxvYWQ6IGhhbmRsZUltYWdlVXBsb2FkLFxuICAgICAgICBhaUNvbnRyb2xsZXJcbiAgICAgIH0pXG4gICAgfSlcbiAgXSwgW10pO1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IHJlZiwgY2xhc3NOYW1lOiBcInJlbGF0aXZlIG1pbi1oLVszMDBweF0gdy1mdWxsXCIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KEVkaXRvclByb3ZpZGVyLCB7IGNvbnRlbnQ6IGNvbnRlbnQgPz8gXCJcIiwgZXh0ZW5zaW9ucywgZWRpdG9yUHJvcHM6IHtcbiAgICBlZGl0YWJsZTogKCkgPT4gIWRpc2FibGVkLFxuICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgIGNsYXNzOiBjbHMocHJvc2VDbGFzcywgXCJwcm9zZS1oZWFkaW5nczpmb250LXRpdGxlIGZvbnQtZGVmYXVsdCBmb2N1czpvdXRsaW5lLW5vbmUgbWF4LXctZnVsbCBwLTEyXCIpXG4gICAgfVxuICB9LCBvbkNyZWF0ZTogKHtcbiAgICBlZGl0b3I6IGVkaXRvcl8wXG4gIH0pID0+IHtcbiAgICBlZGl0b3JSZWYuY3VycmVudCA9IGVkaXRvcl8wO1xuICAgIGVkaXRvcl8wLnNldEVkaXRhYmxlKCFkaXNhYmxlZCk7XG4gIH0sIG9uVXBkYXRlOiAoe1xuICAgIGVkaXRvcjogZWRpdG9yXzFcbiAgfSkgPT4ge1xuICAgIG9uRWRpdG9yVXBkYXRlKGVkaXRvcl8xKTtcbiAgfSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEVkaXRvckJ1YmJsZSwgeyB0aXBweU9wdGlvbnM6IHtcbiAgICBwbGFjZW1lbnQ6IFwidG9wXCJcbiAgfSwgY2xhc3NOYW1lOiBjbHMoXCJmbGV4IHctZml0IG1heC13LVs5MHZ3XSBoLTEwIG92ZXJmbG93LWhpZGRlbiByb3VuZGVkIGJvcmRlciBiZy13aGl0ZSBkYXJrOmJnLXN1cmZhY2UtOTAwIHNoYWRvd1wiLCBkZWZhdWx0Qm9yZGVyTWl4aW4pLCBjaGlsZHJlbjogW1xuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goTm9kZVNlbGVjdG9yLCB7IHBvcnRhbENvbnRhaW5lcjogcmVmLmN1cnJlbnQsIG9wZW46IG9wZW5Ob2RlLCBvbk9wZW5DaGFuZ2U6IHNldE9wZW5Ob2RlIH0pLFxuICAgIC8qIEBfX1BVUkVfXyAqLyBqc3goU2VwYXJhdG9yLCB7IG9yaWVudGF0aW9uOiBcInZlcnRpY2FsXCIgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChMaW5rU2VsZWN0b3IsIHsgb3Blbjogb3BlbkxpbmssIG9uT3BlbkNoYW5nZTogc2V0T3BlbkxpbmsgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChTZXBhcmF0b3IsIHsgb3JpZW50YXRpb246IFwidmVydGljYWxcIiB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFRleHRCdXR0b25zLCB7fSlcbiAgXSB9KSB9KSB9KTtcbn07XG5mdW5jdGlvbiBhZGRMaW5lQnJlYWtBZnRlckltYWdlcyhtYXJrZG93bikge1xuICBjb25zdCBpbWFnZVJlZ2V4ID0gLyFcXFsuKj9cXF1cXCguKj9cXCkvZztcbiAgcmV0dXJuIG1hcmtkb3duLnJlcGxhY2UoaW1hZ2VSZWdleCwgKG1hdGNoKSA9PiBgJHttYXRjaH1cbmApO1xufVxuY29uc3QgY3NzU3R5bGVzID0gYFxuLlByb3NlTWlycm9yIHtcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XG59XG4uUHJvc2VNaXJyb3IgLmlzLWVkaXRvci1lbXB0eTpmaXJzdC1jaGlsZDo6YmVmb3JlIHtcbiAgY29udGVudDogYXR0cihkYXRhLXBsYWNlaG9sZGVyKTtcbiAgZmxvYXQ6IGxlZnQ7XG4gIGNvbG9yOiAgcmdiKDEwMCAxMTYgMTM5KTsgLy81MDBcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIGhlaWdodDogMDtcbn1cbi5Qcm9zZU1pcnJvciAuaXMtZW1wdHk6OmJlZm9yZSB7XG4gIGNvbnRlbnQ6IGF0dHIoZGF0YS1wbGFjZWhvbGRlcik7XG4gIGZsb2F0OiBsZWZ0O1xuICBjb2xvcjogIHJnYigxMDAgMTE2IDEzOSk7IC8vNTAwXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBoZWlnaHQ6IDA7XG59XG5cbltkYXRhLXRoZW1lPVwiZGFya1wiXSB7XG4gIC5Qcm9zZU1pcnJvciAuaXMtZW1wdHk6OmJlZm9yZSB7XG4gICAgY29sb3I6IHJnYigxMDAgMTE2IDEzOSk7IC8vNTAwXG4gIH1cbn1cblxuLmlzLWVtcHR5IHtcbiAgY3Vyc29yOiB0ZXh0O1xuICBjb2xvcjogcmdiKDEwMCAxMTYgMTM5KTsgLy81MDBcbn1cblxuXG4vKiBDdXN0b20gaW1hZ2Ugc3R5bGVzICovXG5cbi5Qcm9zZU1pcnJvciBpbWcge1xuICB0cmFuc2l0aW9uOiBmaWx0ZXIgMC4xcyBlYXNlLWluLW91dDtcblxuICAmOmhvdmVyIHtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgZmlsdGVyOiBicmlnaHRuZXNzKDkwJSk7XG4gIH1cblxuICAmLlByb3NlTWlycm9yLXNlbGVjdGVkbm9kZSB7XG4gICAgb3V0bGluZTogM3B4IHNvbGlkICM1YWJiZjc7XG4gICAgZmlsdGVyOiBicmlnaHRuZXNzKDkwJSk7XG4gICAgYm94LXNoYWRvdzogdmFyKC0tdHctcmluZy1vZmZzZXQtc2hhZG93KSwgdmFyKC0tdHctcmluZy1zaGFkb3cpLCB2YXIoLS10dy1zaGFkb3csIDAgMCAjMDAwMCkgIWltcG9ydGFudDtcbiAgfVxufVxuXG4vKiBDdXN0b20gVE9ETyBsaXN0IGNoZWNrYm94ZXMg4oCTIHNob3V0b3V0IHRvIHRoaXMgYXdlc29tZSB0dXRvcmlhbDogaHR0cHM6Ly9tb2Rlcm5jc3MuZGV2L3B1cmUtY3NzLWN1c3RvbS1jaGVja2JveC1zdHlsZS8gKi9cblxudWxbZGF0YS10eXBlPVwidGFza0xpc3RcIl0gbGkgPiBsYWJlbCB7XG4gIG1hcmdpbi1yaWdodDogMC4ycmVtO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbn1cblxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpIHtcbiAgdWxbZGF0YS10eXBlPVwidGFza0xpc3RcIl0gbGkgPiBsYWJlbCB7XG4gICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gIH1cbn1cblxuXG5bZGF0YS10aGVtZT1cImRhcmtcIl0ge1xuICB1bFtkYXRhLXR5cGU9XCJ0YXNrTGlzdFwiXSBsaSA+IGxhYmVsIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDMwIDQxIDU5KTsgLy8gODAwXG4gICAgYm9yZGVyOiAycHggc29saWQgIzY2NjtcbiAgXG4gICAgJjpob3ZlciB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNTEgNjUgODUpOyAvLyA3MDBcbiAgICB9XG4gIFxuICAgICY6YWN0aXZlIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYig3MSA4NSAxMDUpO1xuICAgIH1cbiAgfVxufVxuICBcblxudWxbZGF0YS10eXBlPVwidGFza0xpc3RcIl0gbGkgPiBsYWJlbCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0ge1xuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gIGFwcGVhcmFuY2U6IG5vbmU7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBtYXJnaW46IDA7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgd2lkdGg6IDEuMmVtO1xuICBoZWlnaHQ6IDEuMmVtO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHRvcDogNXB4O1xuICBib3JkZXI6IDJweCBzb2xpZCAjNzc3O1xuICBib3JkZXItcmFkaXVzOiAwLjI1ZW07XG4gIG1hcmdpbi1yaWdodDogMC4zcmVtO1xuICBkaXNwbGF5OiBncmlkO1xuICBwbGFjZS1jb250ZW50OiBjZW50ZXI7XG5cbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0MSAyNDUgMjQ5KTsgLy8xMDBcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjI2IDIzMiAyNDApOyAvLzIwMFxuICB9XG5cbiAgJjo6YmVmb3JlIHtcbiAgICBjb250ZW50OiBcIlwiO1xuICAgIHdpZHRoOiAwLjY1ZW07XG4gICAgaGVpZ2h0OiAwLjY1ZW07XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgwKTtcbiAgICB0cmFuc2l0aW9uOiAxMjBtcyB0cmFuc2Zvcm0gZWFzZS1pbi1vdXQ7XG4gICAgYm94LXNoYWRvdzogaW5zZXQgMWVtIDFlbTtcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXI7XG4gICAgY2xpcC1wYXRoOiBwb2x5Z29uKDE0JSA0NCUsIDAgNjUlLCA1MCUgMTAwJSwgMTAwJSAxNiUsIDgwJSAwJSwgNDMlIDYyJSk7XG4gIH1cblxuICAmOmNoZWNrZWQ6OmJlZm9yZSB7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgfVxufVxuXG5bZGF0YS10aGVtZT1cImRhcmtcIl0ge1xuICB1bFtkYXRhLXR5cGU9XCJ0YXNrTGlzdFwiXSBsaVtkYXRhLWNoZWNrZWQ9XCJ0cnVlXCJdID4gZGl2ID4gcCB7XG4gICAgY29sb3I6IHJnYigyMjYgMjMyIDI0MCk7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7XG4gICAgdGV4dC1kZWNvcmF0aW9uLXRoaWNrbmVzczogMnB4O1xuICB9XG59XG5cbnVsW2RhdGEtdHlwZT1cInRhc2tMaXN0XCJdIGxpW2RhdGEtY2hlY2tlZD1cInRydWVcIl0gPiBkaXYgPiBwIHtcbiAgY29sb3I6IHJnYig1MSA2NSA4NSk7IC8vIDcwMFxuICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcbiAgdGV4dC1kZWNvcmF0aW9uLXRoaWNrbmVzczogMnB4O1xufVxuXG4vKiBPdmVyd3JpdGUgdGlwcHktYm94IG9yaWdpbmFsIG1heC13aWR0aCAqL1xuXG4udGlwcHktYm94IHtcbiAgbWF4LXdpZHRoOiA0MDBweCAhaW1wb3J0YW50O1xufVxuXG4uUHJvc2VNaXJyb3I6bm90KC5kcmFnZ2luZykgLlByb3NlTWlycm9yLXNlbGVjdGVkbm9kZSB7XG4gIC8vIG91dGxpbmU6IG5vbmUgIWltcG9ydGFudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIxOSAyMzQgMjU0KTsgLy8gYmx1ZSAxMDBcbiAgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjJzO1xuICBib3gtc2hhZG93OiBub25lO1xufVxuXG5bZGF0YS10aGVtZT1cImRhcmtcIl0gLlByb3NlTWlycm9yOm5vdCguZHJhZ2dpbmcpIC5Qcm9zZU1pcnJvci1zZWxlY3RlZG5vZGUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAgcmdiKDUxIDY1IDg1KTsgLy8gNzAwXG59XG5cbi5wcm9zZS1iYXNlIHRhYmxlIHAge1xuICAgIG1hcmdpbjogMDtcbn1cblxuLmRyYWctaGFuZGxlIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBvcGFjaXR5OiAxO1xuICB0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4ycztcbiAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcblxuICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEwIDEwJyBzdHlsZT0nZmlsbDogcmdiYSgxMjgsIDEyOCwgMTI4LCAwLjkpJyUzRSUzQ3BhdGggZD0nTTMsMiBDMi40NDc3MTUyNSwyIDIsMS41NTIyODQ3NSAyLDEgQzIsMC40NDc3MTUyNSAyLjQ0NzcxNTI1LDAgMywwIEMzLjU1MjI4NDc1LDAgNCwwLjQ0NzcxNTI1IDQsMSBDNCwxLjU1MjI4NDc1IDMuNTUyMjg0NzUsMiAzLDIgWiBNMyw2IEMyLjQ0NzcxNTI1LDYgMiw1LjU1MjI4NDc1IDIsNSBDMiw0LjQ0NzcxNTI1IDIuNDQ3NzE1MjUsNCAzLDQgQzMuNTUyMjg0NzUsNCA0LDQuNDQ3NzE1MjUgNCw1IEM0LDUuNTUyMjg0NzUgMy41NTIyODQ3NSw2IDMsNiBaIE0zLDEwIEMyLjQ0NzcxNTI1LDEwIDIsOS41NTIyODQ3NSAyLDkgQzIsOC40NDc3MTUyNSAyLjQ0NzcxNTI1LDggMyw4IEMzLjU1MjI4NDc1LDggNCw4LjQ0NzcxNTI1IDQsOSBDNCw5LjU1MjI4NDc1IDMuNTUyMjg0NzUsMTAgMywxMCBaIE03LDIgQzYuNDQ3NzE1MjUsMiA2LDEuNTUyMjg0NzUgNiwxIEM2LDAuNDQ3NzE1MjUgNi40NDc3MTUyNSwwIDcsMCBDNy41NTIyODQ3NSwwIDgsMC40NDc3MTUyNSA4LDEgQzgsMS41NTIyODQ3NSA3LjU1MjI4NDc1LDIgNywyIFogTTcsNiBDNi40NDc3MTUyNSw2IDYsNS41NTIyODQ3NSA2LDUgQzYsNC40NDc3MTUyNSA2LjQ0NzcxNTI1LDQgNyw0IEM3LjU1MjI4NDc1LDQgOCw0LjQ0NzcxNTI1IDgsNSBDOCw1LjU1MjI4NDc1IDcuNTUyMjg0NzUsNiA3LDYgWiBNNywxMCBDNi40NDc3MTUyNSwxMCA2LDkuNTUyMjg0NzUgNiw5IEM2LDguNDQ3NzE1MjUgNi40NDc3MTUyNSw4IDcsOCBDNy41NTIyODQ3NSw4IDgsOC40NDc3MTUyNSA4LDkgQzgsOS41NTIyODQ3NSA3LjU1MjI4NDc1LDEwIDcsMTAgWiclM0UlM0MvcGF0aCUzRSUzQy9zdmclM0VcIik7XG4gIGJhY2tncm91bmQtc2l6ZTogY2FsYygwLjVlbSArIDAuMzc1cmVtKSBjYWxjKDAuNWVtICsgMC4zNzVyZW0pO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gIHdpZHRoOiAxLjJyZW07XG4gIGhlaWdodDogMS41cmVtO1xuICB6LWluZGV4OiAxMDA7XG4gIGN1cnNvcjogZ3JhYjtcblxuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQxIDI0NSAyNDkpOyAvLzEwMFxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgfVxuXG4gICY6YWN0aXZlIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjI2IDIzMiAyNDApOyAvLzIwMFxuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4ycztcbiAgfVxuXG4gICYuaGlkZSB7XG4gICAgb3BhY2l0eTogMDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxuXG4gIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgfVxufVxuXG5bZGF0YS10aGVtZT1cImRhcmtcIl0gLmRyYWctaGFuZGxlIHtcbiAgJjpob3ZlciB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDUxIDY1IDg1KTsgLy8gNzAwXG4gIH1cblxuICAmOmFjdGl2ZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDUxIDY1IDg1KTsgLy8gNzAwXG4gIH1cbn1cbmA7XG5leHBvcnQge1xuICBGaXJlQ01TRWRpdG9yXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXMuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@firecms+editor@3.0.0-beta.12_@types+react-dom@18.3.6_@types+react@18.3.20__@types+react@18.3_h55f373iir4mnjhruau3i2zoxe/node_modules/@firecms/editor/dist/index.es.js\n");

/***/ })

};
;